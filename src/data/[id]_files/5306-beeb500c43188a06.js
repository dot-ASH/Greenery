"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5306],{28221:function(e,t,i){i.d(t,{y:function(){return r}});var r=new RegExp("(".concat(/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm.source,")|(").concat(/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i.source,")|(").concat(/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i.source,")|(").concat(/chrome-extension:\/\/([a-zA-Z]*)/gm.source,")"),"i")},90409:function(e,t,i){i.d(t,{dU:function(){return Ee},Lh:function(){return fe},uW:function(){return Le},m9:function(){return Oe},Q:function(){return At}});var r=i(44285),n=i(43659),s=i(45355),o=i(14633),a=i(28221),c=function(e){return atob(e.replace(/[-]/g,"+").replace(/[_]/g,"/"))},l="http://json-schema.org/draft-07/schema#",u={$schema:l,type:"object",title:"Email",properties:{EXTERNAL_EMAIL_ENABLED:{title:"Enable Email provider",description:"This will enable Email based signup and login for your application",type:"boolean"},MAILER_AUTOCONFIRM:{title:"Confirm email",description:"Users will need to confirm their email address before signing in for the first time.",type:"boolean"},MAILER_SECURE_EMAIL_CHANGE_ENABLED:{title:"Secure email change",description:"Users will be required to confirm any email change on both the old email address and new email address.\n      If disabled, only the new email is required to confirm.",type:"boolean"},SECURITY_UPDATE_PASSWORD_REQUIRE_REAUTHENTICATION:{title:"Secure password change",description:"Users will need to be recently logged in to change their password.\n      If disabled, a user can change their password at any time.",type:"boolean"},MAILER_OTP_EXP:{title:"Mailer OTP Expiration",type:"number",description:"Duration before an email otp / link expires.",units:"seconds"},PASSWORD_MIN_LENGTH:{title:"Min password length",description:"Users will not be able to use a password shorter than this.",type:"number"}},validationSchema:(0,o.object)().shape({PASSWORD_MIN_LENGTH:(0,o.number)().required("A password is required.").min(6,"Password length must be at least 6 characters long"),MAILER_OTP_EXP:(0,o.number)().min(0,"Must be more than 0").max(86400,"Must be no more than 86400").required("This is required")}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},d={$schema:l,type:"object",title:"Phone",properties:{EXTERNAL_PHONE_ENABLED:{title:"Enable Phone provider",description:"This will enable phone based login for your application",type:"boolean"},SMS_PROVIDER:{type:"select",title:"SMS provider",description:"External provider that will handle sending SMS messages",enum:[{label:"Twilio",value:"twilio",icon:"twilio-icon.svg"},{label:"Messagebird",value:"messagebird",icon:"messagebird-icon.svg"},{label:"Textlocal",value:"textlocal",icon:"textlocal-icon.png"},{label:"Vonage",value:"vonage",icon:"vonage-icon.svg"}]},RATE_LIMIT_SMS_SENT:{type:"number",title:"Rate limit for sending SMS messages",description:"How many SMS messages can be sent per hour"},SMS_TWILIO_ACCOUNT_SID:{type:"string",title:"Twilio Account Sid",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Message Service Sid",show:{key:"SMS_PROVIDER",matches:["twilio"]}},SMS_TWILIO_VERIFY_ACCOUNT_SID:{type:"string",title:"Twilio Account Sid",show:{key:"SMS_PROVIDER",matches:["twilio-verify"]}},SMS_TWILIO_VERIFY_AUTH_TOKEN:{type:"string",title:"Twilio Auth Token",isSecret:!0,show:{key:"SMS_PROVIDER",matches:["twilio-verify"]}},SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:{type:"string",title:"Twilio Message Service Sid",show:{key:"SMS_PROVIDER",matches:["twilio-verify"]}},SMS_MESSAGEBIRD_ACCESS_KEY:{type:"string",title:"Messagebird Access Key",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_MESSAGEBIRD_ORIGINATOR:{type:"string",title:"Messagebird Originator",show:{key:"SMS_PROVIDER",matches:["messagebird"]}},SMS_TEXTLOCAL_API_KEY:{type:"string",title:"Textlocal API Key",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_TEXTLOCAL_SENDER:{type:"string",title:"Textlocal Sender",show:{key:"SMS_PROVIDER",matches:["textlocal"]}},SMS_VONAGE_API_KEY:{type:"string",title:"Vonage API Key",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_API_SECRET:{type:"string",title:"Vonage API Secret",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_VONAGE_FROM:{type:"string",title:"Vonage From",show:{key:"SMS_PROVIDER",matches:["vonage"]}},SMS_AUTOCONFIRM:{title:"Enable phone confirmations",type:"boolean",description:"Users will need to confirm their phone number before signing in."},SMS_OTP_EXP:{title:"SMS OTP Expiry",type:"number",description:"Duration before an SMS OTP expires",units:"seconds",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_OTP_LENGTH:{title:"SMS OTP Length",type:"number",description:"Number of digits in OTP",units:"digits",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}},SMS_TEMPLATE:{title:"SMS Message",type:"string",description:"To format the OTP code use `{{ .Code }}`",show:{key:"SMS_PROVIDER",matches:["twilio","messagebird","textlocal","vonage"]}}},validationSchema:(0,o.object)().shape({EXTERNAL_PHONE_ENABLED:(0,o.boolean)().required(),SMS_PROVIDER:(0,o.string)().required(),SMS_TWILIO_ACCOUNT_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Account SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_AUTH_TOKEN:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Auth Token is required")},otherwise:function(e){return e}}),SMS_TWILIO_MESSAGE_SERVICE_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio"===t},then:function(e){return e.required("Twilio Message Service SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_ACCOUNT_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Account SID is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_AUTH_TOKEN:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Auth Token is required")},otherwise:function(e){return e}}),SMS_TWILIO_VERIFY_MESSAGE_SERVICE_SID:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"twilio-verify"===t},then:function(e){return e.required("Twilio Verify Service SID is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ACCESS_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Access Key is required")},otherwise:function(e){return e}}),SMS_MESSAGEBIRD_ORIGINATOR:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"messagebird"===t},then:function(e){return e.required("Messagebird Originator is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_API_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal API Key is required")},otherwise:function(e){return e}}),SMS_TEXTLOCAL_SENDER:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"textlocal"===t},then:function(e){return e.required("Textlocal Sender is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_KEY:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API is required")},otherwise:function(e){return e}}),SMS_VONAGE_API_SECRET:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage API Secret is required")},otherwise:function(e){return e}}),SMS_VONAGE_FROM:(0,o.string)().when(["EXTERNAL_PHONE_ENABLED","SMS_PROVIDER"],{is:function(e,t){return e&&"vonage"===t},then:function(e){return e.required("Vonage From is required")},otherwise:function(e){return e}}),SMS_OTP_EXP:(0,o.number)().min(0,"Must be more than 0").required("This is required"),SMS_OTP_LENGTH:(0,o.number)().min(6,"Must be 6 or more in length").required("This is required"),SMS_TEMPLATE:(0,o.string)().required("SMS template is required.")}),misc:{iconKey:"phone-icon4",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},E={$schema:l,type:"object",title:"Apple",properties:{EXTERNAL_APPLE_ENABLED:{title:"Enable Sign in with Apple",description:"Enables Sign in with Apple on the web using OAuth or natively within iOS, macOS, watchOS or tvOS apps.",type:"boolean"},EXTERNAL_APPLE_CLIENT_ID:{title:"Service ID (for OAuth)",description:"Client identifier used in the OAuth flow on the web.\n[Learn more](https://developer.apple.com/documentation/sign_in_with_apple/configuring_your_environment_for_sign_in_with_apple)",type:"string"},EXTERNAL_APPLE_SECRET:{title:"Secret Key (for OAuth)",description:"Secret key used in the OAuth flow.\n[Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#generate-a-client_secret)",type:"string",isSecret:!0},EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (iOS, macOS, watchOS, tvOS bundle IDs or service IDs)",description:"Comma separated list of allowed Apple app bundle IDs for native sign in, or service IDs for Sign in with Apple JS. [Learn more](https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js)",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_APPLE_ENABLED:(0,o.boolean)().required(),EXTERNAL_APPLE_SECRET:(0,o.string)().when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t){return e&&!!t},then:function(e){return e.required("Secret key is required when using the OAuth flow.").matches(/^[a-z0-9_-]+([.][a-z0-9_-]+){2}$/i,"Secret key should be a JWT.").test({message:"Secret key is not a correctly generated JWT.",test:function(e){if(!e)return!0;try{var t=e.split(".").map((function(e){return c(e)})),i=JSON.parse(t[0]),r=JSON.parse(t[1]);return"object"===typeof i&&"object"===typeof r&&i&&r&&"JWT"===i.typ&&"ES256"===i.alg&&"https://appleid.apple.com"===r.aud}catch(n){return console.log(n),!1}return!0}}).test({message:"Secret key expires in less than 7 days!",test:function(e){if(!e)return!0;try{var t=e.split(".").map((function(e){return c(e)})),i=JSON.parse(t[1]);return Date.now()>i.exp-6048e5}catch(r){return console.log(r),!1}return!0}})}}).when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t,i){return e&&!!t&&!i},then:function(e){return e.matches(/^$/,"Secret Key should only be set if Service ID for OAuth is provided.")}}),EXTERNAL_APPLE_CLIENT_ID:(0,o.string)().matches(/^[a-z0-9.-]+$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app)."),EXTERNAL_APPLE_ADDITIONAL_CLIENT_IDS:(0,o.string)().matches(/^([.a-z0-9-]+(,\s*[.a-z0-9-]+)*,*\s*)?$/i,"Invalid characters. Apple recommends a reverse-domain name style string (e.g. com.example.app). You must only use explicit bundle IDs, asterisks (*) are not allowed.").when(["EXTERNAL_APPLE_ENABLED","EXTERNAL_APPLE_CLIENT_ID"],{is:function(e,t){return e&&!t},then:function(e){return e.required("At least one Authorized Client ID is required when not using the OAuth flow.")}})}),misc:{iconKey:"apple-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign in with Apple on the web in the Apple Developer Center.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)",alert:{title:"Apple OAuth secret keys expire every 6 months",description:"A new secret should be generated every 6 months, otherwise users on the web will not be able to sign in."}}},h={$schema:l,type:"object",title:"Azure",properties:{EXTERNAL_AZURE_ENABLED:{title:"Azure enabled",type:"boolean"},EXTERNAL_AZURE_CLIENT_ID:{title:"Application (client) ID",type:"string"},EXTERNAL_AZURE_SECRET:{title:"Secret Value",description:"Enter the data from Value, not the Secret ID. [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-azure#obtain-a-secret-id)",type:"string",isSecret:!0},EXTERNAL_AZURE_URL:{title:"Azure Tenant URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_AZURE_ENABLED:(0,o.boolean)().required(),EXTERNAL_AZURE_CLIENT_ID:(0,o.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Application (client) ID is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_SECRET:(0,o.string)().when("EXTERNAL_AZURE_ENABLED",{is:!0,then:function(e){return e.required("Secret ID is required")},otherwise:function(e){return e}}),EXTERNAL_AZURE_URL:(0,o.string)().matches(a.y,"Must be a valid URL").optional()}),misc:{iconKey:"microsoft-icon",requiresRedirect:!0}},p={$schema:l,type:"object",title:"Bitbucket",properties:{EXTERNAL_BITBUCKET_ENABLED:{title:"Bitbucket enabled",type:"boolean"},EXTERNAL_BITBUCKET_CLIENT_ID:{title:"Key",type:"string"},EXTERNAL_BITBUCKET_SECRET:{title:"Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_BITBUCKET_ENABLED:(0,o.boolean)().required(),EXTERNAL_BITBUCKET_CLIENT_ID:(0,o.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Key is required")},otherwise:function(e){return e}}),EXTERNAL_BITBUCKET_SECRET:(0,o.string)().when("EXTERNAL_BITBUCKET_ENABLED",{is:!0,then:function(e){return e.required("Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"bitbucket-icon",requiresRedirect:!0}},m={$schema:l,type:"object",title:"Discord",properties:{EXTERNAL_DISCORD_ENABLED:{title:"Discord enabled",type:"boolean"},EXTERNAL_DISCORD_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_DISCORD_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_DISCORD_ENABLED:(0,o.boolean)().required(),EXTERNAL_DISCORD_CLIENT_ID:(0,o.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_DISCORD_SECRET:(0,o.string)().when("EXTERNAL_DISCORD_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"discord-icon",requiresRedirect:!0}},_={$schema:l,type:"object",title:"Facebook",properties:{EXTERNAL_FACEBOOK_ENABLED:{title:"Facebook enabled",type:"boolean"},EXTERNAL_FACEBOOK_CLIENT_ID:{title:"Facebook client ID",type:"string"},EXTERNAL_FACEBOOK_SECRET:{title:"Facebook secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_FACEBOOK_ENABLED:(0,o.boolean)().required(),EXTERNAL_FACEBOOK_CLIENT_ID:(0,o.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook client ID" is required')},otherwise:function(e){return e}}),EXTERNAL_FACEBOOK_SECRET:(0,o.string)().when("EXTERNAL_FACEBOOK_ENABLED",{is:!0,then:function(e){return e.required('"Facebook secret" is required')},otherwise:function(e){return e}})}),misc:{iconKey:"facebook-icon",requiresRedirect:!0}},f={$schema:l,type:"object",title:"GitHub",properties:{EXTERNAL_GITHUB_ENABLED:{title:"GitHub enabled",type:"boolean"},EXTERNAL_GITHUB_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_GITHUB_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_GITHUB_ENABLED:(0,o.boolean)().required(),EXTERNAL_GITHUB_CLIENT_ID:(0,o.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITHUB_SECRET:(0,o.string)().when("EXTERNAL_GITHUB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"github-icon",requiresRedirect:!0}},T={$schema:l,type:"object",title:"GitLab",properties:{EXTERNAL_GITLAB_ENABLED:{title:"GitLab enabled",type:"boolean"},EXTERNAL_GITLAB_CLIENT_ID:{title:"Application ID",type:"string"},EXTERNAL_GITLAB_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_GITLAB_URL:{title:"Self Hosted GitLab URL",descriptionOptional:"Optional",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_GITLAB_ENABLED:(0,o.boolean)().required(),EXTERNAL_GITLAB_CLIENT_ID:(0,o.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_SECRET:(0,o.string)().when("EXTERNAL_GITLAB_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}}),EXTERNAL_GITLAB_URL:(0,o.string)().matches(a.y,"Must be a valid URL").optional()}),misc:{iconKey:"gitlab-icon",requiresRedirect:!0}},A={$schema:l,type:"object",title:"Google",properties:{EXTERNAL_GOOGLE_ENABLED:{title:"Enable Sign in with Google",description:"Enables Sign in with Google on the web using OAuth or One Tap, or in Android apps or Chrome extensions.",type:"boolean"},EXTERNAL_GOOGLE_CLIENT_ID:{title:"Client ID (for OAuth)",description:"Client ID to use with the OAuth flow on the web.",type:"string"},EXTERNAL_GOOGLE_SECRET:{title:"Client Secret (for OAuth)",description:"Client Secret to use with the OAuth flow on the web.",type:"string",isSecret:!0},EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:{title:"Authorized Client IDs (for Android, One Tap, and Chrome extensions)",description:"Comma separated list of client IDs of Android apps, One Tap or Chrome extensions that are allowed to log in to your project.",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_GOOGLE_ENABLED:(0,o.boolean)().required(),EXTERNAL_GOOGLE_SECRET:(0,o.string)().when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t){return e&&!!t},then:function(e){return e.matches(/^[a-z0-9.\/_-]*$/i,"Invalid characters. Google OAuth Client Secrets usually contain letters, numbers, dots, dashes and underscores.").required("Client Secret is required when using the OAuth flow.")}}).when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t,i){return e&&!!t&&!i},then:function(e){return e.matches(/^$/,"Client Secret should only be set when Client ID for OAuth is set.")}}),EXTERNAL_GOOGLE_CLIENT_ID:(0,o.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)+)?$/i,"Invalid characters. Google OAuth Client IDs are usually a domain-name (e.g. 01234567890-abcdefghijklmnopqrstuvwxyz012345.apps.googleusercontent.com)."),EXTERNAL_GOOGLE_ADDITIONAL_CLIENT_IDS:(0,o.string)().matches(/^([a-z0-9-]+([.][a-z0-9-]+)*(,\s*[a-z0-9-]+([.][a-z0-9-]+)*)*,*\s*)?$/i,"Invalid characters. Google Client IDs are usually a domain-name style string (e.g. com.example.com.app or *.apps.googleusercontent.com).").when(["EXTERNAL_GOOGLE_ENABLED","EXTERNAL_GOOGLE_CLIENT_ID"],{is:function(e,t){return e&&!t},then:function(e){return e.required("At least one Authorized Client ID is required when not using the OAuth flow.")}})}),misc:{iconKey:"google-icon",requiresRedirect:!0,helper:"Register this callback URL when using Sign-in with Google on the web using OAuth.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},S={$schema:l,type:"object",title:"Kakao",properties:{EXTERNAL_KAKAO_ENABLED:{title:"Kakao enabled",type:"boolean"},EXTERNAL_KAKAO_CLIENT_ID:{title:"REST API Key",type:"string"},EXTERNAL_KAKAO_SECRET:{title:"Client Secret Code",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_KAKAO_ENABLED:(0,o.boolean)().required(),EXTERNAL_KAKAO_CLIENT_ID:(0,o.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:function(e){return e.required("REST API Key is required")},otherwise:function(e){return e}}),EXTERNAL_KAKAO_SECRET:(0,o.string)().when("EXTERNAL_KAKAO_ENABLED",{is:!0,then:function(e){return e.required("Client Secret Code is required")},otherwise:function(e){return e}})}),misc:{iconKey:"kakao-icon",requiresRedirect:!0}},g={$schema:l,type:"object",title:"KeyCloak",properties:{EXTERNAL_KEYCLOAK_ENABLED:{title:"Keycloak enabled",type:"boolean"},EXTERNAL_KEYCLOAK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_KEYCLOAK_SECRET:{title:"Secret",type:"string",isSecret:!0},EXTERNAL_KEYCLOAK_URL:{title:"Realm URL",description:"",type:"string"}},validationSchema:(0,o.object)().shape({EXTERNAL_KEYCLOAK_ENABLED:(0,o.boolean)().required(),EXTERNAL_KEYCLOAK_CLIENT_ID:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_SECRET:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}}),EXTERNAL_KEYCLOAK_URL:(0,o.string)().when("EXTERNAL_KEYCLOAK_ENABLED",{is:!0,then:function(e){return e.matches(a.y,"Must be a valid URL").required("Realm URL is required")},otherwise:function(e){return e.matches(a.y,"Must be a valid URL")}})}),misc:{iconKey:"keycloak-icon",requiresRedirect:!0}},N={$schema:l,type:"object",title:"LinkedIn",properties:{EXTERNAL_LINKEDIN_ENABLED:{title:"Linkedin enabled",type:"boolean"},EXTERNAL_LINKEDIN_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_LINKEDIN_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_LINKEDIN_ENABLED:(0,o.boolean)().required(),EXTERNAL_LINKEDIN_CLIENT_ID:(0,o.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_LINKEDIN_SECRET:(0,o.string)().when("EXTERNAL_LINKEDIN_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"linkedin-icon",requiresRedirect:!0}},b={$schema:l,type:"object",title:"Notion",properties:{EXTERNAL_NOTION_ENABLED:{title:"Notion enabled",type:"boolean"},EXTERNAL_NOTION_CLIENT_ID:{title:"OAuth client ID",type:"string"},EXTERNAL_NOTION_SECRET:{title:"OAuth client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_NOTION_ENABLED:(0,o.boolean)().required(),EXTERNAL_NOTION_CLIENT_ID:(0,o.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client ID is required")},otherwise:function(e){return e}}),EXTERNAL_NOTION_SECRET:(0,o.string)().when("EXTERNAL_NOTION_ENABLED",{is:!0,then:function(e){return e.required("OAuth client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"notion-icon",requiresRedirect:!0}},R={$schema:l,type:"object",title:"Twitch",properties:{EXTERNAL_TWITCH_ENABLED:{title:"Twitch enabled",type:"boolean"},EXTERNAL_TWITCH_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_TWITCH_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_TWITCH_ENABLED:(0,o.boolean)().required(),EXTERNAL_TWITCH_CLIENT_ID:(0,o.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_TWITCH_SECRET:(0,o.string)().when("EXTERNAL_TWITCH_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitch-icon",requiresRedirect:!0}},L={$schema:l,type:"object",title:"Twitter",properties:{EXTERNAL_TWITTER_ENABLED:{title:"Twitter enabled",type:"boolean"},EXTERNAL_TWITTER_CLIENT_ID:{title:"API Key",type:"string"},EXTERNAL_TWITTER_SECRET:{title:"API Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_TWITTER_ENABLED:(0,o.boolean)().required(),EXTERNAL_TWITTER_CLIENT_ID:(0,o.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Key is required")},otherwise:function(e){return e}}),EXTERNAL_TWITTER_SECRET:(0,o.string)().when("EXTERNAL_TWITTER_ENABLED",{is:!0,then:function(e){return e.required("API Secret Key is required")},otherwise:function(e){return e}})}),misc:{iconKey:"twitter-icon",requiresRedirect:!0}},y={$schema:l,type:"object",title:"Slack",properties:{EXTERNAL_SLACK_ENABLED:{title:"Slack enabled",type:"boolean"},EXTERNAL_SLACK_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SLACK_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_SLACK_ENABLED:(0,o.boolean)().required(),EXTERNAL_SLACK_CLIENT_ID:(0,o.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SLACK_SECRET:(0,o.string)().when("EXTERNAL_SLACK_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"slack-icon",requiresRedirect:!0}},x={$schema:l,type:"object",title:"Spotify",properties:{EXTERNAL_SPOTIFY_ENABLED:{title:"Spotify enabled",type:"boolean"},EXTERNAL_SPOTIFY_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_SPOTIFY_SECRET:{title:"Client Secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_SPOTIFY_ENABLED:(0,o.boolean)().required(),EXTERNAL_SPOTIFY_CLIENT_ID:(0,o.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_SPOTIFY_SECRET:(0,o.string)().when("EXTERNAL_SPOTIFY_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"spotify-icon",requiresRedirect:!0}},v={$schema:l,type:"object",title:"WorkOS",properties:{EXTERNAL_WORKOS_ENABLED:{title:"WorkOS enabled",type:"boolean"},EXTERNAL_WORKOS_URL:{title:"WorkOS URL",type:"string"},EXTERNAL_WORKOS_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_WORKOS_SECRET:{title:"Secret Key",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_WORKOS_ENABLED:(0,o.boolean)().required(),EXTERNAL_WORKOS_URL:(0,o.string)().matches(a.y,"Must be a valid URL").when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("WorkOS URL is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_CLIENT_ID:(0,o.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_WORKOS_SECRET:(0,o.string)().when("EXTERNAL_WORKOS_ENABLED",{is:!0,then:function(e){return e.required("Client Secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"workos-icon",requiresRedirect:!0}},O={$schema:l,type:"object",title:"Zoom",properties:{EXTERNAL_ZOOM_ENABLED:{title:"Zoom enabled",type:"boolean"},EXTERNAL_ZOOM_CLIENT_ID:{title:"Client ID",type:"string"},EXTERNAL_ZOOM_SECRET:{title:"Client secret",type:"string",isSecret:!0}},validationSchema:(0,o.object)().shape({EXTERNAL_ZOOM_ENABLED:(0,o.boolean)().required(),EXTERNAL_ZOOM_CLIENT_ID:(0,o.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client ID is required")},otherwise:function(e){return e}}),EXTERNAL_ZOOM_SECRET:(0,o.string)().when("EXTERNAL_ZOOM_ENABLED",{is:!0,then:function(e){return e.required("Client secret is required")},otherwise:function(e){return e}})}),misc:{iconKey:"zoom-icon",requiresRedirect:!0}},j={$schema:l,type:"object",title:"SAML 2.0",properties:{SAML_ENABLED:{title:"Enable SAML 2.0 Single Sign-on",description:"You will need to use the [Supabase CLI](https://supabase.com/docs/guides/auth/sso/auth-sso-saml#managing-saml-20-connections) to set up SAML after enabling it",type:"boolean"}},validationSchema:(0,o.object)().shape({SAML_ENABLED:(0,o.boolean)().required()}),misc:{iconKey:"saml-icon"}},I=[u,d,j,E,h,p,m,_,f,T,A,S,g,N,b,R,L,y,x,v,O],w="http://json-schema.org/draft-07/schema#",C=[{$schema:w,id:"CONFIRMATION",type:"object",title:"Confirm signup",properties:{MAILER_SUBJECTS_CONFIRMATION:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_CONFIRMATION_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the e-mail address for the new account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The users email address\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_CONFIRMATION:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:w,id:"INVITE",type:"object",title:"Invite user",properties:{MAILER_SUBJECTS_INVITE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_INVITE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to accept the invitation to create an account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The users email address\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_INVITE:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:w,id:"MAGIC_LINK",type:"object",title:"Magic Link",properties:{MAILER_SUBJECTS_MAGIC_LINK:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_MAGIC_LINK_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL for a one-time login to the user's account\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The users email address\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_MAGIC_LINK:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:w,id:"EMAIL_CHANGE",type:"object",title:"Change Email Address",properties:{MAILER_SUBJECTS_EMAIL_CHANGE:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_EMAIL_CHANGE_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the email change\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The original users email address\n- `{{ .NewEmail }}` : The users new email address\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_EMAIL_CHANGE:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}},{$schema:w,id:"RECOVERY",type:"object",title:"Reset Password",properties:{MAILER_SUBJECTS_RECOVERY:{title:"Subject heading",type:"string"},MAILER_TEMPLATES_RECOVERY_CONTENT:{title:"Message body",descriptionOptional:"HTML body of your email",type:"code",description:" \n- `{{ .ConfirmationURL }}` : URL to confirm the password reset\n- `{{ .Token }}` : The 6-digit numeric email OTP \n- `{{ .TokenHash }}` : The hashed token used in the URL\n- `{{ .SiteURL }}` : The URL of the site\n- `{{ .Email }}` : The users email address\n"}},validationSchema:(0,o.object)().shape({MAILER_SUBJECTS_RECOVERY:(0,o.string)().required('"Subject heading is required.')}),misc:{iconKey:"email-icon2",helper:"To complete setup, add this authorisation callback URL to your app's configuration in the Apple Developer Console.\n            [Learn more](https://supabase.com/docs/guides/auth/social-login/auth-apple#configure-your-services-id)"}}],D=i(33003),P=i(17871),M=i(90849),X=i(55732),U=i(34707),q=i.n(U),k=i(64116),B=i(68043),K=i(27378),Z=i(32621),V=i(11872),F=i(81343),H=i(66804),z=i(77758),G=i(11597),Y=i(3648),W=i(88671),$=i(54782),J=i(47510),Q=i(1588),ee=i(20796),te=["bg-scale-100 dark:bg-scale-300 ","hover:bg-scale-200 dark:hover:bg-scale-500","data-open:bg-scale-200 dark:data-open:bg-scale-500 ","border-scale-300 ","dark:border-scale-500 hover:border-scale-500 ","dark:hover:border-scale-700 data-open:border-scale-700","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border shadow","transition","first:rounded-tl","first:rounded-tr","last:rounded-bl","last:rounded-br","hover:z-50"],ie=i(44292),re=i(51669),ne=i(90546),se=i(17634),oe=i(58728),ae=i(24246),ce=function(e){var t=e.name,i=e.properties,r=e.formValues,n=e.disabled,s=void 0!==n&&n,o=(0,K.useState)(!!i.isSecret),a=o[0],c=o[1];if(i.show&&!i.show.matches.includes(r[i.show.key]))return null;switch(i.type){case"string":return(0,ae.jsx)(Y.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:s,type:a?"password":"text",label:i.title,labelOptional:i.descriptionOptional?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:i.isSecret?(0,ae.jsx)(W.z,{icon:a?(0,ae.jsx)(ie.Z,{}):(0,ae.jsx)(re.Z,{}),type:"default",onClick:function(){return c(!a)}}):(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:i.units?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"number":return(0,ae.jsx)(ne.Z,{size:"small",layout:"vertical",id:t,name:t,disabled:s,label:i.title,labelOptional:i.descriptionOptional?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.descriptionOptional}):null,descriptionText:i.description?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.description}):null,actions:(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:i.units?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.units}):null})});case"boolean":return(0,ae.jsx)(se.Z,{size:"small",id:t,name:t,disabled:s,label:i.title,descriptionText:i.description?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:i.description}):null});case"select":return(0,ae.jsx)(oe.Z,{size:"small",name:t,disabled:s,label:i.title,descriptionText:i.description?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],className:"form-field-markdown",children:i.description}):null,defaultValue:i.enum[0],children:i.enum.map((function(e){return(0,ae.jsx)(oe.Z.Option,{id:e.value,label:e.label,value:e.value,addOnBefore:function(){return(0,ae.jsx)("img",{className:"h-6 w-6",src:"".concat(ee.GW,"/img/icons/").concat(e.icon)})},children:e.label},e.value)}))})}return(0,ae.jsx)(ae.Fragment,{})};function le(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function ue(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?le(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):le(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var de=function(e){var t,i=e.provider,r=(0,K.useState)(!1),n=r[0],o=r[1],a=(0,s.oR)(),c=a.authConfig,l=a.ui,u=(0,J.d2)().project,d=(0,$.UO)().ref,E=["MAILER_AUTOCONFIRM","SMS_AUTOCONFIRM"],h=(0,s.Xo)(B.KA.UPDATE,"custom_config_gotrue"),p=(0,Q.zZ)({projectRef:d}).data,m="SAML 2.0"===i.title?c.config.SAML_ENABLED||!1:c.config["EXTERNAL_".concat(null===i||void 0===i||null===(t=i.title)||void 0===t?void 0:t.toUpperCase(),"_ENABLED")],_=function(){var e={};return Object.keys(i.properties).forEach((function(t){var r,n,s=E.includes(t);"SAML 2.0"===i.title?e[t]=null!==(r=c.config[t])&&void 0!==r&&r:e[t]=s?!c.config[t]:null!==(n=c.config[t])&&void 0!==n?n:""})),e}(),f=function(){var e=(0,X.Z)(q().mark((function e(t,i){var r,n,s,a,u;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.setSubmitting,n=i.resetForm,s=ue({},t),Object.keys(t).map((function(e){E.includes(e)&&(s[e]=!t[e])})),e.next=5,c.update(s);case 5:a=e.sent,(u=a.error)?l.setNotification({error:u,category:"error",message:"Failed to update settings:  ".concat(null===u||void 0===u?void 0:u.message)}):(n({values:ue({},t),initialValues:ue({},t)}),o(!1),l.setNotification({category:"success",message:"Successfully updated settings"})),r(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsxs)(V.ZP,{open:n,onOpenChange:o,className:te.join(" "),children:[(0,ae.jsx)(V.ZP.Trigger,{asChild:!0,children:(0,ae.jsxs)("button",{type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-6 text-scale-1200",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ae.jsx)(F.Z,{className:"text-scale-800 transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,ae.jsx)("img",{src:"".concat(ee.GW,"/img/icons/").concat(i.misc.iconKey,".svg"),width:18,alt:"".concat(i.title," auth icon")}),(0,ae.jsx)("span",{className:"text-sm",children:i.title})]}),(0,ae.jsx)("div",{className:"flex items-center gap-3",children:m?(0,ae.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-700 bg-brand-200 py-1 px-1 text-xs text-brand-900",children:[(0,ae.jsx)("span",{className:"rounded-full bg-brand-900 p-0.5 text-xs text-brand-200",children:(0,ae.jsx)(H.Z,{strokeWidth:2,size:12})}),(0,ae.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,ae.jsx)("div",{className:"rounded-md border border-scale-500 bg-scale-100 py-1 px-3 text-xs text-scale-900 dark:border-scale-700 dark:bg-scale-300",children:"Disabled"})})]})}),(0,ae.jsx)(z.Z,{name:"provider-".concat(i.title,"-form"),initialValues:_,validationSchema:i.validationSchema,onSubmit:f,children:function(e){var t,r,n,s=e.isSubmitting,a=e.handleReset,c=e.initialValues,l=e.values,d=JSON.stringify(c)===JSON.stringify(l);return(0,ae.jsx)(V.ZP.Content,{children:(0,ae.jsx)("div",{className:" group border-t border-scale-500 bg-scale-100 py-6 px-6 text-scale-1200 dark:bg-scale-300 ",children:(0,ae.jsxs)("div",{className:"mx-auto my-6 max-w-lg space-y-6",children:[Object.keys(i.properties).map((function(e){return(0,ae.jsx)(ce,{name:e,properties:i.properties[e],formValues:l,disabled:!h},e)})),(null===i||void 0===i||null===(t=i.misc)||void 0===t?void 0:t.alert)&&(0,ae.jsx)(G.Z,{title:i.misc.alert.title,variant:"warning",withIcon:!0,children:(0,ae.jsx)(Z.D,{children:i.misc.alert.description})}),i.misc.requiresRedirect&&(0,ae.jsx)(ae.Fragment,{children:(0,ae.jsx)(Y.Z,{copy:!0,readOnly:!0,disabled:!0,label:"Callback URL (for OAuth)",value:"active"===(null===p||void 0===p||null===(r=p.customDomain)||void 0===r?void 0:r.status)?"https://".concat(null===(n=p.customDomain)||void 0===n?void 0:n.hostname,"/auth/v1/callback"):"https://".concat(null===u||void 0===u?void 0:u.ref,".supabase.co/auth/v1/callback"),descriptionText:(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:i.misc.helper})})}),(0,ae.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,ae.jsx)(W.z,{type:"default",htmlType:"reset",onClick:function(){a(),o(!1)},disabled:s,children:"Cancel"}),(0,ae.jsxs)(k.fC,{delayDuration:0,children:[(0,ae.jsx)(k.xz,{type:"button",children:(0,ae.jsx)(W.z,{htmlType:"submit",loading:s,disabled:s||!h||d,children:"Save"})}),!h&&(0,ae.jsx)(k.h_,{children:(0,ae.jsxs)(k.VY,{side:"bottom",children:[(0,ae.jsx)(k.Eh,{className:"radix-tooltip-arrow"}),(0,ae.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,ae.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to update provider settings"})})]})})]})]})]})})})}})]})},Ee=(0,n.Pi)((function(){var e=(0,s.oR)().authConfig,t=(0,s.P5)("isSamlEnabled")?I:I.filter((function(e){return e!==j}));return(0,ae.jsxs)("div",{children:[(0,ae.jsx)(D.ph,{title:"Auth Providers",description:"Authenticate your users through a suite of providers and login methods"}),(0,ae.jsx)("div",{className:"-space-y-px",children:e.isLoaded?t.map((function(e){return(0,ae.jsx)(de,{provider:e},"provider_".concat(e.title))})):t.map((function(e){return(0,ae.jsx)("div",{className:[].concat((0,r.Z)(te),["px-6 py-3"]).join(" "),children:(0,ae.jsx)(P.p,{})},"provider_".concat(e.title))}))})]})})),he=i(49111);function pe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function me(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var _e=(0,n.Pi)((function(){var e=(0,s.oR)(),t=e.authConfig,i=e.ui,r=t.isLoaded,n="auth-config-general-form",a=(0,K.useState)(!0),c=a[0],l=a[1],u=(0,s.Xo)(B.KA.UPDATE,"custom_config_gotrue"),d={DISABLE_SIGNUP:!t.config.DISABLE_SIGNUP,SITE_URL:t.config.SITE_URL,JWT_EXP:t.config.JWT_EXP,REFRESH_TOKEN_ROTATION_ENABLED:t.config.REFRESH_TOKEN_ROTATION_ENABLED||!1,SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:t.config.SECURITY_REFRESH_TOKEN_REUSE_INTERVAL,SECURITY_CAPTCHA_ENABLED:t.config.SECURITY_CAPTCHA_ENABLED||!1,SECURITY_CAPTCHA_SECRET:t.config.SECURITY_CAPTCHA_SECRET||"",SECURITY_CAPTCHA_PROVIDER:t.config.SECURITY_CAPTCHA_PROVIDER||"hcaptcha",MFA_MAX_ENROLLED_FACTORS:t.config.MFA_MAX_ENROLLED_FACTORS||10},E=(0,o.object)({DISABLE_SIGNUP:(0,o.boolean)().required(),SITE_URL:(0,o.string)().required("Must have a Site URL"),JWT_EXP:(0,o.number)().max(604800,"Must be less than 604800").required("Must have a JWT expiry value"),REFRESH_TOKEN_ROTATION_ENABLED:(0,o.boolean)().required(),SECURITY_REFRESH_TOKEN_REUSE_INTERVAL:(0,o.number)().min(0,"Must be a value more than 0").required("Must have a Reuse Interval value"),SECURITY_CAPTCHA_ENABLED:(0,o.boolean)().required(),SECURITY_CAPTCHA_SECRET:(0,o.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:(0,o.string)().required("Must have a Captcha secret")}),SECURITY_CAPTCHA_PROVIDER:(0,o.string)().when("SECURITY_CAPTCHA_ENABLED",{is:!0,then:(0,o.string)().oneOf(["hcaptcha","turnstile"]).required("Captcha provider must be either hcaptcha or turnstile")}),MFA_MAX_ENROLLED_FACTORS:(0,o.number)().min(0,"Must be be a value more than 0").max(30,"Must be a value less than 30")}),h=function(){var e=(0,X.Z)(q().mark((function e(r,n){var s,o,a,c,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.setSubmitting,o=n.resetForm,(a=me({},r)).DISABLE_SIGNUP=!r.DISABLE_SIGNUP,s(!0),e.next=6,t.update(a);case 6:c=e.sent,(l=c.error)?i.setNotification({category:"error",message:"Failed to update settings:  ".concat(null===l||void 0===l?void 0:l.message)}):(i.setNotification({category:"success",message:"Successfully updated settings"}),o({values:r,initialValues:r})),s(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsx)(z.Z,{id:n,initialValues:d,onSubmit:h,validationSchema:E,children:function(e){var i=e.isSubmitting,s=e.handleReset,o=e.resetForm,a=e.values,E=e.initialValues,h=JSON.stringify(a)!==JSON.stringify(E);return(0,K.useEffect)((function(){o({values:d,initialValues:d})}),[t.isLoaded]),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(D.ph,{title:"Auth settings",description:"Configure authentication sessions for your users"}),(0,ae.jsxs)(D.by,{disabled:!0,footer:(0,ae.jsx)("div",{className:"flex py-4 px-8",children:(0,ae.jsx)(D.iN,{form:n,isSubmitting:i,hasChanges:h,handleReset:s,disabled:!u,helper:u?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,ae.jsx)(D.hj,{header:(0,ae.jsx)(D.S0,{children:"User Signups"}),children:(0,ae.jsx)(D.B4,{loading:!r,children:(0,ae.jsx)(se.Z,{id:"DISABLE_SIGNUP",size:"small",label:"Allow new users to sign up",layout:"flex",descriptionText:"If this is disabled, new users will not be able to sign up to your application.",disabled:!u})})}),(0,ae.jsx)("div",{className:"border-t border-scale-400"}),(0,ae.jsx)(D.hj,{header:(0,ae.jsx)(D.S0,{children:"User Sessions"}),children:(0,ae.jsx)(D.B4,{loading:!r,children:(0,ae.jsx)(ne.Z,{id:"JWT_EXP",size:"small",label:"JWT expiry limit",descriptionText:"How long tokens are valid for. Defaults to 3600 (1 hour), maximum 604,800 seconds (one week).",actions:(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!u})})}),(0,ae.jsx)(D.hj,{header:(0,ae.jsx)(D.S0,{children:"Security and Protection"}),children:(0,ae.jsxs)(D.B4,{loading:!r,children:[(0,ae.jsx)(se.Z,{id:"SECURITY_CAPTCHA_ENABLED",size:"small",label:"Enable Captcha protection",layout:"flex",descriptionText:"Protect authentication endpoints from abuse.",disabled:!u}),a.SECURITY_CAPTCHA_ENABLED&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)(he.Z.Group,{id:"SECURITY_CAPTCHA_PROVIDER",name:"SECURITY_CAPTCHA_PROVIDER",label:"Captcha Providers",children:[(0,ae.jsx)(he.Z,{label:"hCaptcha",value:"hcaptcha",checked:"hcaptcha"===a.SECURITY_CAPTCHA_PROVIDER}),(0,ae.jsx)(he.Z,{label:"Turnstile (Cloudflare)",value:"turnstile",checked:"turnstile"===a.SECURITY_CAPTCHA_PROVIDER})]}),(0,ae.jsx)(Y.Z,{id:"SECURITY_CAPTCHA_SECRET",type:c?"password":"text",size:"small",label:"Captcha secret",disabled:!u,actions:(0,ae.jsx)(W.z,{icon:c?(0,ae.jsx)(ie.Z,{}):(0,ae.jsx)(re.Z,{}),type:"default",onClick:function(){return l(!c)}})})]}),(0,ae.jsx)(se.Z,{id:"REFRESH_TOKEN_ROTATION_ENABLED",size:"small",label:"Enable automatic reuse detection",layout:"flex",descriptionText:"Prevent replay attacks from compromised refresh tokens.",disabled:!u}),a.REFRESH_TOKEN_ROTATION_ENABLED&&(0,ae.jsx)(ne.Z,{id:"SECURITY_REFRESH_TOKEN_REUSE_INTERVAL",size:"small",min:0,label:"Reuse interval",descriptionText:"Time interval where the same refresh token can be used to request for an access token.",actions:(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!u})]})}),(0,ae.jsx)(D.hj,{header:(0,ae.jsx)(D.S0,{children:"Multi Factor Authentication (MFA)"}),children:(0,ae.jsx)(D.B4,{loading:!r,children:(0,ae.jsx)(ne.Z,{id:"MFA_MAX_ENROLLED_FACTORS",size:"small",label:"Maximum number of enrolled factors",disabled:!u})})})]})]})}})})),fe=_e,Te=i(65961),Ae=i(65657),Se=i(69060),ge=i(33114);function Ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function be(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Re=(0,n.Pi)((function(e){var t=e.template,i=(0,s.oR)(),r=i.ui,n=i.authConfig,o=(0,K.useState)(""),a=o[0],c=o[1],l=n.isLoaded,u=t.id,d=t.properties,E="auth-config-email-templates-".concat(u),h={},p=(0,s.Xo)(B.KA.UPDATE,"custom_config_gotrue");(0,K.useEffect)((function(){l&&Object.keys(d).forEach((function(e){var t;h[e]=null!==(t=n.config[e])&&void 0!==t?t:""}))}),[l]);var m="MAILER_TEMPLATES_".concat(u,"_CONTENT"),_=d[m],f=function(){var e=(0,X.Z)(q().mark((function e(t,i){var s,o,l,u,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.setSubmitting,o=i.resetForm,delete(l=be({},t))[m],_&&(l[m]=a),s(!0),e.next=7,n.update(l);case 7:u=e.sent,u.error?r.setNotification({category:"error",message:"Failed to update settings"}):(r.setNotification({category:"success",message:"Successfully updated settings"}),o({values:t,initialValues:t}),c(null===n||void 0===n||null===(d=n.config)||void 0===d?void 0:d[m])),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsx)(z.Z,{id:E,className:"!border-t-0",initialValues:h,onSubmit:f,children:function(e){var t,i=e.isSubmitting,r=e.resetForm,s=e.values,o=e.initialValues;(0,K.useEffect)((function(){var e;r({values:h,initialValues:h}),c(null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e[m])}),[n.isLoaded]);var u=null===n||void 0===n||null===(t=n.config)||void 0===t?void 0:t[m],f=JSON.stringify(s)!==JSON.stringify(o)||u!==a;return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(D.hj,{className:"!border-t-0 pb-8 pt-4",children:(0,ae.jsx)(D.B4,{loading:!l,children:Object.keys(d).map((function(e){var t=d[e];if("string"===t.type)return(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsx)("label",{className:"col-span-12 text-sm text-scale-1200 lg:col-span-5",children:t.title}),(0,ae.jsx)(Y.Z,{size:"small",layout:"vertical",id:e,name:e,descriptionText:t.description?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.description}):null,labelOptional:t.descriptionOptional?(0,ae.jsx)(Z.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t.descriptionOptional}):null,disabled:!p},e)]},e)}))})}),(0,ae.jsx)(D.hj,{className:"!mt-0 grid-cols-12 !border-t-0 !pt-0",children:(0,ae.jsxs)(D.B4,{fullWidth:!0,loading:!l,children:[_&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsx)(D.S0,{children:(0,ae.jsx)("span",{children:_.title})}),(0,ae.jsx)(ge.Z,{defaultVisibility:!0,title:"Message variables",hideCollapse:!1,description:_.description&&(0,ae.jsx)(Z.D,{children:_.description})})]}),(0,ae.jsx)("div",{className:"relative h-96",children:(0,ae.jsx)(Se.ZP,{id:"code-id",loading:!l,language:"html",isReadOnly:!p,className:"!mb-0 h-96 overflow-hidden rounded border",onInputChange:function(e){return c(null!==e&&void 0!==e?e:"")},options:{wordWrap:"off",contextmenu:!1},value:a})})]}),(0,ae.jsx)("div",{className:"col-span-12 flex w-full",children:(0,ae.jsx)(D.iN,{handleReset:function(){var e;r({values:n.config,initialValues:n.config}),c(null===n||void 0===n||null===(e=n.config)||void 0===e?void 0:e[m])},form:E,isSubmitting:i,hasChanges:f,disabled:!p,helper:p?void 0:"You need additional permissions to update authentication settings"})})]})})]})}})})),Le=(0,n.Pi)((function(){return(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsx)(D.ph,{title:"Email Templates",description:"Customize the emails that will be sent out to your users."}),(0,ae.jsx)("div",{className:"mb-6",children:(0,ae.jsx)(W.z,{type:"default",icon:(0,ae.jsx)(Te.Z,{size:14,strokeWidth:1.5}),children:(0,ae.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/auth/auth-email-templates",children:"Documentation"})})})]}),(0,ae.jsx)(D.by,{children:(0,ae.jsx)(Ae.Z,{scrollable:!0,size:"small",type:"underlined",listClassNames:"px-8 pt-4",defaultActiveId:C[0].title.trim().replace(/\s+/g,"-"),children:C.map((function(e){var t=e.title.trim().replace(/\s+/g,"-");return(0,ae.jsx)(Ae.Z.Panel,{id:t,label:e.title,children:(0,ae.jsx)(Re,{template:e},e.title)},t)}))})})]})})),ye={SMTP_ADMIN_EMAIL:null,SMTP_SENDER_NAME:null,SMTP_USER:null,SMTP_HOST:null,SMTP_PASS:null,SMTP_PORT:null,SMTP_MAX_FREQUENCY:60},xe=function(e){var t;return!!(null!==e&&void 0!==e&&e.SMTP_ADMIN_EMAIL&&null!==e&&void 0!==e&&e.SMTP_SENDER_NAME&&null!==e&&void 0!==e&&e.SMTP_USER&&null!==e&&void 0!==e&&e.SMTP_HOST&&null!==e&&void 0!==e&&e.SMTP_PASS&&null!==e&&void 0!==e&&e.SMTP_PORT&&(null!==(t=null===e||void 0===e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==t?t:0)>0)},ve=function(e){var t,i,r,n,s,o,a,c;return{ENABLE_SMTP:xe(e),SMTP_ADMIN_EMAIL:null!==(t=null===e||void 0===e?void 0:e.SMTP_ADMIN_EMAIL)&&void 0!==t?t:"",SMTP_SENDER_NAME:null!==(i=null===e||void 0===e?void 0:e.SMTP_SENDER_NAME)&&void 0!==i?i:"",SMTP_USER:null!==(r=null===e||void 0===e?void 0:e.SMTP_USER)&&void 0!==r?r:"",SMTP_HOST:null!==(n=null===e||void 0===e?void 0:e.SMTP_HOST)&&void 0!==n?n:"",SMTP_PASS:null!==(s=null===e||void 0===e?void 0:e.SMTP_PASS)&&void 0!==s?s:"",SMTP_PORT:null!==(o=null===e||void 0===e?void 0:e.SMTP_PORT)&&void 0!==o?o:465,SMTP_MAX_FREQUENCY:null!==(a=null===e||void 0===e?void 0:e.SMTP_MAX_FREQUENCY)&&void 0!==a?a:60,RATE_LIMIT_EMAIL_SENT:null!==(c=null===e||void 0===e?void 0:e.RATE_LIMIT_EMAIL_SENT)&&void 0!==c?c:30}},Oe=(0,n.Pi)((function(){var e=(0,s.oR)(),t=e.authConfig,i=e.ui,r=t.config,n=t.isLoaded,c=(0,K.useState)(!1),l=c[0],u=c[1],d=(0,K.useState)(!0),E=d[0],h=d[1],p="auth-config-smtp-form",m=ve(t.config),_=(0,s.Xo)(B.KA.UPDATE,"custom_config_gotrue");(0,K.useEffect)((function(){n&&xe(r)&&u(!0)}),[n]);var f=(0,o.object)({SMTP_ADMIN_EMAIL:(0,o.string)().when([],{is:function(){return l},then:function(e){return e.email("Must be a valid email").required("Sender email is required")},otherwise:function(e){return e}}),SMTP_SENDER_NAME:(0,o.string)().when([],{is:function(){return l},then:function(e){return e.required("Sender name is required")},otherwise:function(e){return e}}),SMTP_HOST:(0,o.string)().when([],{is:function(){return l},then:function(e){return e.matches(a.y,"Must be a valid URL or IP address").required("Host URL is required.")},otherwise:function(e){return e}}),SMTP_PORT:(0,o.number)().when([],{is:function(){return l},then:function(e){return e.required("Port number is required.").min(1,"Must be a valid port number more than 0").max(65535,"Must be a valid port number no more than 65535")},otherwise:function(e){return e}}),SMTP_MAX_FREQUENCY:(0,o.number)().when([],{is:function(){return l},then:function(e){return e.required("Rate limit is required.").min(1,"Must be more than 0").max(32767,"Must not be more than 32,767 an hour")},otherwise:function(e){return e}}),SMTP_USER:(0,o.string)().when([],{is:function(){return l},then:function(e){return e.required("SMTP Username is required")},otherwise:function(e){return e}}),SMTP_PASS:(0,o.string)().when([],{is:function(){return l},then:function(e){return e.required("SMTP password is required")},otherwise:function(e){return e}})}),T=function(){var e=(0,X.Z)(q().mark((function e(r,n){var s,o,a,c,u,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.setSubmitting,o=n.resetForm,delete(a=l?r:ye).ENABLE_SMTP,a.SMTP_PORT=a.SMTP_PORT?a.SMTP_PORT.toString():a.SMTP_PORT,s(!0),e.next=7,t.update(a);case 7:c=e.sent,(u=c.error)?i.setNotification({category:"error",message:"Failed to update settings",error:u}):(h(!0),d=ve(a),o({values:d,initialValues:d}),i.setNotification({category:"success",message:"Successfully updated settings"})),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsx)(z.Z,{id:p,initialValues:m,onSubmit:T,validationSchema:f,children:function(e){var t=e.isSubmitting,i=e.resetForm,s=e.values,o=xe(s),a=JSON.stringify(s)!==JSON.stringify(m);(0,K.useEffect)((function(){if(n){var e=ve(r);i({values:e,initialValues:e})}}),[n]);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(D.ph,{title:"SMTP Settings",description:"You can use your own SMTP server instead of the built-in email service."}),(0,ae.jsxs)(D.by,{footer:(0,ae.jsx)("div",{className:"flex py-4 px-8",children:(0,ae.jsx)(D.iN,{form:p,isSubmitting:t,hasChanges:a,handleReset:function(){u(xe(m)),i({values:m})},disabled:!_,helper:_?void 0:"You need additional permissions to update authentication settings"})}),children:[(0,ae.jsx)(D.hj,{children:(0,ae.jsx)(D.B4,{loading:!n,children:(0,ae.jsx)(se.Z,{name:"ENABLE_SMTP",size:"small",label:"Enable Custom SMTP",layout:"flex",checked:l,disabled:!_,onChange:function(e){return u(e)},descriptionText:"Emails will be sent using your custom SMTP provider"})})}),l&&!o&&(0,ae.jsx)("div",{className:"mx-8 mb-8 -mt-4",children:(0,ae.jsx)(G.Z,{withIcon:!0,variant:"warning",title:"All fields below must be filled",children:"The following fields must be filled before custom SMTP can be properly enabled"})}),(0,ae.jsx)(D.hj,{visible:l,header:(0,ae.jsx)(D.S0,{children:"Sender details"}),disabled:!l,children:(0,ae.jsxs)(D.B4,{loading:!n,children:[(0,ae.jsx)(Y.Z,{name:"SMTP_ADMIN_EMAIL",id:"SMTP_ADMIN_EMAIL",label:"Sender email",descriptionText:"This is the email address the emails are sent from",placeholder:"noreply@yourdomain.com",disabled:!_}),(0,ae.jsx)(Y.Z,{name:"SMTP_SENDER_NAME",id:"SMTP_SENDER_NAME",label:"Sender name",descriptionText:"Name displayed in the recipient's inbox",placeholder:"The name shown on the email",disabled:!_})]})}),(0,ae.jsx)(D.hj,{visible:l,disabled:!l,header:(0,ae.jsxs)(D.S0,{children:[(0,ae.jsx)("span",{children:"SMTP Provider Settings"}),(0,ae.jsx)("p",{className:"my-4 text-scale-900",children:"Your SMTP Credentials will always be encrypted in our database."})]}),children:(0,ae.jsxs)(D.B4,{loading:!n,children:[(0,ae.jsx)(Y.Z,{name:"SMTP_HOST",placeholder:"your.smtp.host.com",id:"SMTP_HOST",label:"Host",descriptionText:"Hostname or IP address of your SMTP server.",disabled:!_}),(0,ae.jsx)(ne.Z,{name:"SMTP_PORT",id:"SMTP_PORT",placeholder:"587",label:"Port number",descriptionText:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("span",{className:"block",children:["Port used by your SMTP server. Common ports include 25, 465, and 587."," "]}),(0,ae.jsx)("span",{className:"mt-2 block",children:"Avoid using port 25 as modern SMTP email clients shouldn't use this port, it is traditionally blocked by residential ISPs and Cloud Hosting Providers, to curb the amount of spam."})]}),disabled:!_}),(0,ae.jsx)(ne.Z,{id:"SMTP_MAX_FREQUENCY",name:"SMTP_MAX_FREQUENCY",label:"Minimum interval between emails being sent",descriptionText:"How long between each email can a new email be sent via your SMTP server.",actions:(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:"seconds"}),disabled:!_}),(0,ae.jsx)(ne.Z,{name:"RATE_LIMIT_EMAIL_SENT",id:"RATE_LIMIT_EMAIL_SENT",min:0,label:"Rate limit for sending emails",descriptionText:"How many emails can be sent per hour.",actions:(0,ae.jsx)("span",{className:"mr-3 text-scale-900",children:"emails per hour"}),disabled:!_}),(0,ae.jsx)(Y.Z,{name:"SMTP_USER",id:"SMTP_USER",label:"Username",placeholder:"SMTP Username",disabled:!_}),(0,ae.jsx)(Y.Z,{name:"SMTP_PASS",id:"SMTP_PASS",type:E?"password":"text",label:"Password",placeholder:"SMTP Password",actions:(0,ae.jsx)(W.z,{icon:E?(0,ae.jsx)(ie.Z,{}):(0,ae.jsx)(re.Z,{}),type:"default",onClick:function(){return h(!E)}}),disabled:!_})]})})]})]})}})})),je=i(1296),Ie=i(70946),we=i(95992),Ce=i(29914),De=i(36625),Pe=i.n(De),Me=i(2674),Xe=i(99950),Ue=i(34311),qe=i(12163);function ke(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}var Be=function(e){return(0,ae.jsx)(qe.Z,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(i),!0).forEach((function(t){(0,M.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ke(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({icon:Ue.Z},e))},Ke=i(51664),Ze=i(94269),Ve=i(72853),Fe=i(86223),He=i(90907),ze=i(48228),Ge=i(14919);function Ye(e){return We.apply(this,arguments)}function We(){return(We=(0,X.Z)(q().mark((function e(t){var i,r,n,s,o;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.protocol,r=t.endpoint,n=t.serviceApiKey,s=t.user,e.next=3,(0,Ge.v_)("".concat(i,"://").concat(r,"/auth/v1/admin/users"),{email:s.email,password:s.password,email_confirm:s.autoConfirmUser},{headers:{apikey:n,Authorization:"Bearer ".concat(n)},credentials:"omit"});case 3:if(!(o=e.sent).error){e.next=6;break}throw o.error;case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ze.D)((function(e){return Ye(e)}),e)},Je=i(2288),Qe=(0,n.Pi)((function(e){var t=e.visible,i=e.setVisible,r=(0,s.oR)().ui,n=(0,K.useContext)(Ce.PageContext),o=n.projectRef,a=(0,Je.qP)({projectRef:o},{enabled:t}),c=a.data,l=a.isLoading,u=a.isSuccess,d=(0,s.Xo)(B.KA.AUTH_EXECUTE,"create_user"),E=$e({onSuccess:function(){return(0,X.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchData(1);case 2:case"end":return e.stop()}}),e)})))()}}).mutateAsync,h=function(){var e=(0,X.Z)(q().mark((function e(t,n){var s,o,a,l,d;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.setSubmitting,u){e.next=4;break}return r.setNotification({category:"error",message:"Failed to create user: Error loading project config"}),e.abrupt("return");case 4:return o=c.autoApiService,a=o.protocol,l=o.endpoint,d=o.serviceApiKey,s(!0),e.prev=6,e.next=9,E({endpoint:l,protocol:a,serviceApiKey:d,user:t});case 9:r.setNotification({category:"success",message:"Created user: ".concat(t.email)}),i(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),r.setNotification({category:"error",message:"Failed to create user: ".concat(e.t0.message)});case 16:s(!1);case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsx)(Ze.C,{closable:!0,hideFooter:!0,size:"small",visible:t,header:"Create a new user",onCancel:function(){return i(!t)},loading:!0,children:(0,ae.jsx)(z.Z,{validateOnBlur:!1,initialValues:{email:"",password:"",autoConfirmUser:!0},validate:function(e){var t,i={};return 0===e.email.length?i.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(i.email="".concat(e.email," is an invalid email")),null!==(t=e.password)&&void 0!==t&&t.trim()||(i.password="Please enter a password"),i},onSubmit:h,children:function(e){var t=e.isSubmitting;return(0,ae.jsx)(Ve.Z,{active:l,children:(0,ae.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ae.jsx)(Ze.C.Content,{children:(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsx)(Y.Z,{id:"email",autoComplete:"off",label:"User Email",icon:(0,ae.jsx)(Xe.Z,{}),type:"email",name:"email",placeholder:"user@example.com",disabled:t||l}),(0,ae.jsx)(Y.Z,{id:"password",name:"password",type:"password",label:"User Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",icon:(0,ae.jsx)(Fe.Z,{}),disabled:t||l,autoComplete:"new-password"}),(0,ae.jsx)(He.Z,{value:"true",id:"autoConfirmUser",name:"autoConfirmUser",label:"Auto Confirm User?",size:"medium",description:"Creates the user without sending them a confirmation email",defaultChecked:!0,disabled:t||l})]})}),(0,ae.jsx)(Ze.C.Content,{children:(0,ae.jsx)(W.z,{block:!0,size:"small",htmlType:"submit",loading:t,disabled:!d||t||l,children:"Create user"})})]})})}})},"create-user-modal")})),et=(0,n.Pi)((function(e){var t=e.visible,i=e.setVisible,r=(0,s.oR)().ui,n=(0,K.useContext)(Ce.PageContext),o=(0,s.Xo)(B.KA.AUTH_EXECUTE,"invite_user"),a=function(){var e=(0,X.Z)(q().mark((function e(t,s){var o,a;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=s.setSubmitting)(!0),e.next=4,(0,Ge.v_)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/invite"),{email:t.email});case 4:(a=e.sent).error?r.setNotification({category:"error",message:"Failed to invite user: ".concat(a.error.message)}):(n.fetchData(1),r.setNotification({category:"success",message:"Sent invite email to ".concat(t.email)}),i(!1)),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,ae.jsx)("div",{children:(0,ae.jsx)(Ze.C,{closable:!0,hideFooter:!0,size:"small",visible:t,header:"Invite a new user",onCancel:function(){return i(!t)},children:(0,ae.jsx)(z.Z,{validateOnBlur:!1,initialValues:{email:""},validate:function(e){var t={};return 0===e.email.length?t.email="Please enter a valid email":/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)||(t.email="".concat(e.email," is an invalid email")),t},onSubmit:a,children:function(e){var t=e.isSubmitting;return(0,ae.jsxs)("div",{className:"space-y-6 py-4",children:[(0,ae.jsx)(Ze.C.Content,{children:(0,ae.jsx)(Y.Z,{id:"email",className:"w-full",label:"User email",icon:(0,ae.jsx)(Xe.Z,{}),type:"email",name:"email",placeholder:"User email"})}),(0,ae.jsx)(Ze.C.Content,{children:(0,ae.jsx)(W.z,{block:!0,size:"small",htmlType:"submit",loading:t,disabled:!o||t,children:"Invite user"})})]})}})},"invite-user-modal")})})),tt=function(e){var t=e.projectKpsVersion,i=!ee.Qy||Pe().gte(Pe().coerce(null!==t&&void 0!==t?t:"kps-v2.5.4"),Pe().coerce("kps-v2.5.3")),r=(0,s.Xo)(B.KA.AUTH_EXECUTE,"invite_user"),n=(0,s.Xo)(B.KA.AUTH_EXECUTE,"create_user"),o=(0,K.useState)(!1),a=o[0],c=o[1],l=(0,K.useState)(!1),u=l[0],d=l[1];return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Me.ZP,{side:"bottom",align:"end",size:"small",overlay:(0,ae.jsxs)(ae.Fragment,{children:[i&&(0,ae.jsxs)(k.fC,{delayDuration:0,children:[(0,ae.jsx)(k.xz,{className:"w-full",children:(0,ae.jsx)(Me.ZP.Item,{icon:(0,ae.jsx)(Xe.Z,{size:"small"}),disabled:!r,onClick:function(){return c(!0)},children:"Send Invitation"})}),!r&&(0,ae.jsx)(k.h_,{children:(0,ae.jsxs)(k.VY,{side:"bottom",children:[(0,ae.jsx)(k.Eh,{className:"radix-tooltip-arrow"}),(0,ae.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,ae.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to invite users"})})]})})]}),(0,ae.jsxs)(k.fC,{delayDuration:0,children:[(0,ae.jsx)(k.xz,{className:"w-full",children:(0,ae.jsx)(Me.ZP.Item,{icon:(0,ae.jsx)(Be,{size:"small"}),disabled:!n,onClick:function(){return d(!0)},children:"Create New User"})}),!n&&(0,ae.jsx)(k.h_,{children:(0,ae.jsxs)(k.VY,{side:"bottom",children:[(0,ae.jsx)(k.Eh,{className:"radix-tooltip-arrow"}),(0,ae.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,ae.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create users"})})]})})]})]}),children:(0,ae.jsx)(W.z,{type:"primary",iconRight:(0,ae.jsx)(Ke.Z,{strokeWidth:1.5}),children:"Add user"})}),i&&(0,ae.jsx)(et,{visible:a,setVisible:c}),(0,ae.jsx)(Qe,{visible:u,setVisible:d})]})},it=i(79305),rt=i(33769),nt=i(55671),st=i(84364),ot=i(20951),at=i(4573),ct=i(44315),lt=i(75226),ut=i(33954),dt=i(44266),Et=(0,n.Pi)((function(e){var t=e.user,i=e.canRemoveUser,r=e.canRemoveMFAFactors,n=(0,K.useContext)(Ce.PageContext),o=(0,s.oR)().ui,a=(0,K.useState)(!1),c=a[0],l=a[1];function u(){return(u=(0,X.Z)(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,(0,Ge.v_)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/recover"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to send password recovery: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent password recovery to ".concat(t.email)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Send password recovery failed: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function d(){return(d=(0,X.Z)(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,(0,Ge.v_)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/magiclink"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to send magic link: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent magic link to ".concat(t.email)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to send magic link: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function E(){return(E=(0,X.Z)(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,(0,Ge.v_)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/otp"),t);case 4:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to OTP: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Sent OTP to ".concat(t.phone)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to send OTP: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}function h(){return h=(0,X.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ut.Vs)(200);case 2:(0,dt._)({title:"Confirm to delete",message:"This is permanent! Are you sure you want to delete user ".concat(t.email," ?"),onAsyncConfirm:function(){var e=(0,X.Z)(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,(0,Ge.$v)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/users"),t);case 3:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to delete user: ".concat(i.error.message)}):(o.setNotification({category:"success",message:"Successfully deleted ".concat(t.email)}),n.users=n.users.filter((function(e){return e.id!=t.id})),n.totalUsers-=1),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function p(){return p=(0,X.Z)(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ut.Vs)(200);case 2:(0,dt._)({title:"Confirm to delete",message:"This is permanent! Are you sure you want to delete the user's MFA factors?",onAsyncConfirm:function(){var e=(0,X.Z)(q().mark((function e(){var i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,(0,Ge.$v)("".concat(ee.T5,"/auth/").concat(n.projectRef,"/users/").concat(t.id,"/factors"));case 3:(i=e.sent).error?o.setNotification({category:"error",message:"Failed to delete factors: ".concat(i.error.message)}):o.setNotification({category:"success",message:"Successfully deleted the user's factors"}),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return(0,ae.jsx)(Me.ZP,{size:"medium",overlay:(0,ae.jsxs)(ae.Fragment,{children:[null!==t.email?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Me.ZP.Item,{onClick:function(){return u.apply(this,arguments)},icon:(0,ae.jsx)(Xe.Z,{size:"tiny"}),children:"Send password recovery"}),(0,ae.jsx)(Me.ZP.Item,{onClick:function(){return d.apply(this,arguments)},icon:(0,ae.jsx)(Xe.Z,{size:"tiny"}),children:"Send magic link"})]}):null,null!==t.phone?(0,ae.jsx)(Me.ZP.Item,{onClick:function(){return E.apply(this,arguments)},icon:(0,ae.jsx)(Xe.Z,{size:"tiny"}),children:"Send OTP"}):null,(0,ae.jsx)(Me.ZP.Separator,{}),(0,ae.jsxs)(k.fC,{delayDuration:0,children:[(0,ae.jsx)(k.xz,{className:"w-full",children:(0,ae.jsx)(Me.ZP.Item,{onClick:function(){return p.apply(this,arguments)},icon:(0,ae.jsx)(at.Z,{size:"tiny"}),disabled:!r,children:"Remove MFA factors"})}),!r&&(0,ae.jsx)(k.h_,{children:(0,ae.jsxs)(k.VY,{side:"bottom",children:[(0,ae.jsx)(k.Eh,{className:"radix-tooltip-arrow"}),(0,ae.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,ae.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to remove a user's authentication factors."})})]})})]}),(0,ae.jsxs)(k.fC,{delayDuration:0,children:[(0,ae.jsx)(k.xz,{className:"w-full",children:(0,ae.jsx)(Me.ZP.Item,{onClick:function(){return h.apply(this,arguments)},icon:(0,ae.jsx)(ct.Z,{size:"tiny"}),disabled:!i,children:"Delete user"})}),!i&&(0,ae.jsx)(k.h_,{children:(0,ae.jsxs)(k.VY,{side:"bottom",children:[(0,ae.jsx)(k.Eh,{className:"radix-tooltip-arrow"}),(0,ae.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,ae.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to delete users"})})]})})]})]}),children:(0,ae.jsx)(W.z,{asChild:!0,type:"text",icon:(0,ae.jsx)(lt.Z,{}),loading:c,className:"hover:border-gray-500",children:(0,ae.jsx)("span",{})})})})),ht=i(27693),pt=i.n(ht),mt=function(e){return e?pt()(e,"YYYY-MM-DD HH:mm:ss.SSSZZ"):void 0},_t=(0,n.Pi)((function(e){var t,i,r=e.user,n=e.canRemoveUser,s=e.canRemoveMFAFactors,o=r.email_confirmed_at||r.phone_confirmed_at,a=mt(r.created_at),c=mt(r.last_sign_in_at);return(0,ae.jsxs)(nt.Z.tr,{className:"relative",children:[(0,ae.jsx)(nt.Z.td,{className:"whitespace-nowrap",children:(0,ae.jsx)("div",{className:"flex items-center gap-2",children:(0,ae.jsx)("span",{className:"text-sm text-scale-1200",children:r.email?r.email:"-"})})}),(0,ae.jsx)(nt.Z.td,{className:"whitespace-nowrap",children:(0,ae.jsx)("span",{className:"text-scale-1200",children:r.phone?r.phone:"-"})}),(0,ae.jsx)(nt.Z.td,{className:"table-cell",children:(0,ae.jsx)("span",{className:"capitalize text-scale-1200",children:(null===r||void 0===r||null===(t=r.raw_app_meta_data)||void 0===t?void 0:t.provider)||(null===r||void 0===r||null===(i=r.app_metadata)||void 0===i?void 0:i.provider)})}),(0,ae.jsx)(nt.Z.td,{className:"table-cell",children:(0,ae.jsx)("span",{className:"text-scale-1200",children:null===a||void 0===a?void 0:a.format("DD MMM, YYYY HH:mm")})}),(0,ae.jsx)(nt.Z.td,{className:"table-cell",children:o?r.last_sign_in_at?null===c||void 0===c?void 0:c.format("DD MMM, YYYY HH:mm"):"Never":(0,ae.jsx)(st.Z,{color:"yellow",children:"Waiting for verification.."})}),(0,ae.jsx)(nt.Z.td,{className:"table-cell",children:(0,ae.jsxs)("div",{className:"flex max-w-[72px] items-baseline",children:[(0,ae.jsx)(ot.Z,{metastring:"",className:"font-xs bash",children:r.id}),(0,ae.jsx)("div",{children:"..."})]})}),(0,ae.jsx)(nt.Z.td,{className:"text-right",children:(0,ae.jsx)(Et,{user:r,canRemoveUser:n,canRemoveMFAFactors:s})})]},r.id)})),ft=(0,n.Pi)((function(){var e=(0,K.useContext)(Ce.PageContext);return(0,ae.jsxs)("nav",{className:"flex items-center justify-between overflow-hidden","aria-label":"Pagination",children:[(0,ae.jsx)("div",{className:"hidden sm:block",children:(0,ae.jsxs)("p",{className:"text-xs text-scale-900",children:["Showing",(0,ae.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.fromRow}),"to",(0,ae.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.toRow}),"of",(0,ae.jsx)("span",{className:"px-1 font-medium text-scale-1100",children:e.totalUsers}),"results"]})}),(0,ae.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[e.hasPrevious&&(0,ae.jsx)(W.z,{type:"secondary",disabled:!e.hasPrevious,onClick:function(){e.fetchData(e.page-1)},children:"Previous"}),e.hasNext&&(0,ae.jsx)(W.z,{type:"secondary",disabled:!e.hasNext,className:"ml-3",onClick:function(){e.fetchData(e.page+1)},children:"Next"})]})]})})),Tt=(0,n.Pi)((function(e){(0,it.Z)(e);var t=(0,K.useContext)(Ce.PageContext),i=(0,s.Xo)(B.KA.TENANT_SQL_DELETE,"auth.users"),r=(0,s.Xo)(B.KA.TENANT_SQL_DELETE,"auth.mfa_factors");return(0,ae.jsx)(Ve.Z,{active:t.usersLoading,children:(0,ae.jsx)(nt.Z,{head:(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(nt.Z.th,{children:"Email"}),(0,ae.jsx)(nt.Z.th,{children:"Phone"}),(0,ae.jsx)(nt.Z.th,{className:"table-cell",children:"Provider"}),(0,ae.jsx)(nt.Z.th,{className:"table-cell",children:"Created"}),(0,ae.jsx)(nt.Z.th,{className:"table-cell",children:"Last Sign In"}),(0,ae.jsx)(nt.Z.th,{className:"table-cell",children:"User UID"}),(0,ae.jsx)(nt.Z.th,{})]}),body:(0,ae.jsxs)(ae.Fragment,{children:[!t.usersLoading&&0==t.users.length&&(0,ae.jsx)(nt.Z.tr,{children:(0,ae.jsx)(nt.Z.td,{colSpan:7,className:"h-14 whitespace-nowrap border-t p-4 text-sm leading-5 text-gray-300",children:(0,ae.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,ae.jsx)(rt.Z,{size:16,strokeWidth:2}),(0,ae.jsx)("p",{className:"text-scale-1000",children:t.filterKeywords?'No users matched the search query "'.concat(t.filterKeywords,'"'):"No users in your project yet"})]})})}),t.users.length>0&&t.users.map((function(e){return(0,ae.jsx)(_t,{user:e,canRemoveUser:i,canRemoveMFAFactors:r},e.id)})),(0,ae.jsx)(nt.Z.tr,{children:(0,ae.jsx)(nt.Z.td,{colSpan:7,children:(0,ae.jsx)(ft,{})})})]})})})})),At=(0,n.Pi)((function(){var e=(0,K.useContext)(Ce.PageContext);function t(){e.filterKeywords=e.filterInputValue,e.filterVerified=e.filterVerified,e.fetchData(1)}return(0,K.useEffect)((function(){e.fetchData(1)}),[]),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("div",{className:"justify-between px-6 pt-6 pb-2 md:flex",children:[(0,ae.jsxs)("div",{className:"relative flex space-x-4",children:[(0,ae.jsx)(Y.Z,{size:"small",value:e.filterInputValue,onChange:function(t){e.filterInputValue=t.target.value},onKeyDown:function(e){13==e.keyCode&&t()},className:"min-w-[275px]",name:"email",id:"email",placeholder:"Search by email or phone number",icon:(0,ae.jsx)(je.Z,{size:"tiny"}),actions:[e.filterInputValue&&(0,ae.jsx)(W.z,{size:"tiny",type:"text",icon:(0,ae.jsx)(Ie.Z,{size:"tiny"}),onClick:function(){return e.filterInputValue="",e.filterKeywords="",void e.fetchData(1)}})]}),(0,ae.jsxs)(oe.Z,{size:"small",value:e.filterVerified,onChange:function(i){e.filterVerified=i,t()},name:"verified",id:"verified",className:"w-[200px]",children:[(0,ae.jsx)(oe.Z.Option,{label:"All Users",value:"",children:"All Users"}),(0,ae.jsx)(oe.Z.Option,{label:"Verified Users",value:"verified",children:"Verified Users"}),(0,ae.jsx)(oe.Z.Option,{label:"Un-Verified Users",value:"unverified",children:"Un-Verified Users"})]})]}),(0,ae.jsxs)("div",{className:"mt-4 flex items-center gap-2 md:mt-0",children:[(0,ae.jsx)(W.z,{size:"tiny",icon:(0,ae.jsx)(we.Z,{}),type:"default",loading:e.usersLoading,onClick:function(){e.fetchData(1)},children:"Reload"}),(0,ae.jsx)(tt,{projectKpsVersion:null===e||void 0===e?void 0:e.projectKpsVersion})]})]}),(0,ae.jsx)("section",{className:"thin-scrollbars mt-4 overflow-visible px-6",children:(0,ae.jsx)("div",{className:"section-block--body relative overflow-x-auto rounded",children:(0,ae.jsx)("div",{className:"inline-block min-w-full align-middle",children:(0,ae.jsx)(Tt,{})})})})]})}))},55671:function(e,t,i){var r=i(90849),n=i(90089),s=(i(27378),i(24246)),o=["children","colSpan","className","style"];function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e){var t=e.body,i=e.head,r=e.className,n=e.containerClassName,o=e.borderless,a=e.headTrClasses,c=e.bodyClassName,l=e.style,u=["table-container"];n&&u.push(n),o&&u.push("table-container--borderless");var d=["table"];return r&&d.push(r),(0,s.jsx)("div",{className:u.join(" "),children:(0,s.jsxs)("table",{className:d.join(" "),style:l,children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:a,children:i})}),(0,s.jsx)("tbody",{className:c,children:t})]})})}l.th=function(e){var t=e.children,i=e.className,r=e.style,n=["p-3 px-4 text-left"];return i&&n.push(i),(0,s.jsx)("th",{className:n.join(" "),style:r,children:t})},l.td=function(e){var t=e.children,i=e.colSpan,r=e.className,a=e.style,l=(0,n.Z)(e,o);return(0,s.jsx)("td",c(c({className:r,colSpan:i,style:a},l),{},{children:t}))},l.tr=function(e){var t=e.children,i=e.className,r=e.onClick,n=e.style,o=e.hoverable,a=[i];return(r||o)&&a.push("tr--link"),(0,s.jsx)("tr",{className:a.join(" "),onClick:r,style:n,children:t})},t.Z=l},17871:function(e,t,i){i.d(t,{p:function(){return n}});var r=i(24246),n=function(){return(0,r.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,r.jsx)("div",{className:"shimmering-loader h-6 w-6 rounded-full"}),(0,r.jsx)("div",{className:"shimmering-loader h-2 w-32 rounded"})]}),(0,r.jsx)("div",{className:"shimmering-loader h-6 w-20 rounded"})]})}},29914:function(e,t,i){i.r(t),i.d(t,{PageContext:function(){return g}});var r=i(55732),n=i(90849),s=i(34707),o=i.n(s),a=i(27378),c=i(43659),l=i(86677),u=i(14919),d=i(20796),E=i(45355),h=i(81228),p=i(90409),m=i(68043),_=i(38230),f=i(47510),T=i(24246);function A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(Object(i),!0).forEach((function(t){(0,n.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g=(0,a.createContext)(null),N=function(e){var t=e.children,i=(0,c.fv)((function(){return{projectRef:void 0,projectKpsVersion:void 0,filterInputValue:"",filterKeywords:"",filterVerified:void 0,users:[],totalUsers:0,usersLoading:!0,page:1,pageLimit:10,get fetchQuery(){var e={limit:this.pageLimit,offset:(this.page-1)*this.pageLimit,keywords:this.filterKeywords};return this.filterVerified?S(S({},e),{},{verified:this.filterVerified}):e},get fromRow(){var e=this.pageLimit*(this.page-1)+1;return e>this.totalUsers?this.totalUsers:e},get toRow(){var e=this.pageLimit*this.page;return e>this.totalUsers?this.totalUsers:e},get hasPrevious(){return this.page>1},get hasNext(){return this.toRow<this.totalUsers},updateData:function(e){this.usersLoading=!1,this.totalUsers=e.total,this.users=e.users},fetchData:function(e){var t=this;return(0,r.Z)(o().mark((function r(){var n,s,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.usersLoading=!0,t.page=e,n=new URLSearchParams(i.fetchQuery).toString(),s="".concat(d.T5,"/auth/").concat(i.projectRef,"/users?").concat(n),r.next=6,(0,u.U2)(s);case 6:(a=r.sent).error?(t.totalUsers=0,t.users=[],t.usersLoading=!1,console.error("Fetch user failed: ".concat(a.error.message))):(t.totalUsers=a.total,t.users=a.users,t.usersLoading=!1);case 8:case"end":return r.stop()}}),r)})))()}}})),n=(0,l.useRouter)();return i.projectRef=n.query.ref,(0,T.jsx)(g.Provider,{value:i,children:t})},b=function(){var e=(0,a.useContext)(g),t=(0,f.d2)().project;return(0,a.useEffect)((function(){e.projectKpsVersion=null===t||void 0===t?void 0:t.kpsVersion}),[t]),(0,E.Xo)(m.KA.TENANT_SQL_SELECT,"auth.users")?(0,T.jsx)(p.Q,{}):(0,T.jsx)(_.Z,{isFullPage:!0,resourceText:"access your project's users"})};b.getLayout=function(e){return(0,T.jsx)(h.g1,{title:"Auth",children:(0,T.jsx)(N,{children:e})})},t.default=(0,c.Pi)(b)},81343:function(e,t,i){var r=i(90849),n=(i(27378),i(24387)),s=i(12163),o=i(24246);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}t.Z=function(e){return(0,o.jsx)(s.Z,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({icon:n.Z},e))}},75226:function(e,t,i){var r=i(90849),n=(i(27378),i(59221)),s=i(12163),o=i(24246);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}t.Z=function(e){return(0,o.jsx)(s.Z,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({icon:n.Z},e))}}}]);
//# sourceMappingURL=5306-beeb500c43188a06.js.map