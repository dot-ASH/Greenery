"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9128],{33885:function(e,t,r){r.d(t,{CM:function(){return i},$L:function(){return x},ZP:function(){return b}});var n=r(94269),s=r(3648),a=r(24246),i=function(e){var t=e.name,r=void 0===t?"":t,n=e.limit,i=void 0===n?100:n,o=e.onUpdatePolicyName;return(0,a.jsxs)("div",{className:"flex space-x-12",children:[(0,a.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"policy-name",children:"Policy name"}),(0,a.jsx)("p",{className:"text-sm text-scale-900",children:"A descriptive name for your policy"})]}),(0,a.jsx)("div",{className:"relative w-2/3",children:(0,a.jsx)(s.Z,{id:"policy-name",value:r,onChange:function(e){return o(e.target.value)},actions:(0,a.jsxs)("span",{className:"mr-3 text-sm text-scale-900",children:[r.length,"/",i]})})})]})},o=r(27378),c=r(29432),l=r(64116),d=r(45355),u=r(78906),p=function(e){var t=e.operation,r=void 0===t?"":t,n=e.definition,s=void 0===n?"":n,i=e.check,p=void 0===i?"":i,m=e.onUpdatePolicyUsing,f=e.onUpdatePolicyCheck,h=function(e){return["SELECT","UPDATE","DELETE","ALL"].includes(e)||!e},x=function(e){return["INSERT","UPDATE","ALL"].includes(e)},v=(0,d.D9)(r)||"";return(0,o.useEffect)((function(){h(v)&&!h(r)&&m(void 0),x(v)&&!x(r)&&f(void 0)}),[r]),(0,a.jsxs)("div",{className:"space-y-4",children:[h(r)&&(0,a.jsxs)("div",{className:"flex space-x-12",children:[(0,a.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"policy-name",children:"USING expression"}),(0,a.jsxs)(l.fC,{delayDuration:0,children:[(0,a.jsx)(l.xz,{children:(0,a.jsx)(c.Z,{className:"text-scale-1100",size:16,strokeWidth:1.5})}),(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{side:"bottom",children:[(0,a.jsx)(l.Eh,{className:"radix-tooltip-arrow"}),(0,a.jsxs)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","w-[300px] space-y-2 border border-scale-200"].join(" "),children:[(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"This expression will be added to queries that refer to the table if row-level security is enabled."}),(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"Rows for which the expression returns true will be visible. Any rows for which the expression returns false or null will not be visible to the user (in a SELECT), and will not be available for modification (in an UPDATE or DELETE)."}),(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"Such rows are silently suppressed - no error is reported."})]})]})})]})]}),(0,a.jsx)("p",{className:"text-sm text-scale-900",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,a.jsx)("div",{className:"w-2/3 ".concat(x(r)?"h-32":"h-56"),children:(0,a.jsx)(u.Z,{defaultValue:s,onInputChange:m})})]}),x(r)&&(0,a.jsxs)("div",{className:"flex space-x-12",children:[(0,a.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"policy-name",children:"WITH CHECK expression"}),(0,a.jsxs)(l.fC,{delayDuration:0,children:[(0,a.jsx)(l.xz,{children:(0,a.jsx)(c.Z,{className:"text-scale-1100",size:16,strokeWidth:1.5})}),(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{side:"bottom",children:[(0,a.jsx)(l.Eh,{className:"radix-tooltip-arrow"}),(0,a.jsxs)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","w-[300px] space-y-2 border border-scale-200"].join(" "),children:[(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"This expression will be used in INSERT and UPDATE queries against the table if row-level security is enabled."}),(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"Only rows for which the expression evaluates to true will be allowed. An error will be thrown if the expression evaluates to false or null for any of the records inserted or any of the records that result from the update."}),(0,a.jsx)("p",{className:"text-xs text-scale-1200",children:"Note that this expression is evaluated against the proposed new contents of the row, not the original contents."})]})]})})]})]}),(0,a.jsx)("p",{className:"text-sm text-scale-900",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,a.jsx)("div",{className:"w-2/3 ".concat(h(r)?"h-32":"h-56"),children:(0,a.jsx)(u.Z,{defaultValue:p,onInputChange:f})})]})]})},m=r(49111),f=function(e){var t=e.operation,r=void 0===t?"":t,n=e.onSelectOperation;return(0,a.jsxs)("div",{className:"flex justify-between space-x-12",children:[(0,a.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"allowed-operation",children:"Allowed operation"}),(0,a.jsx)("p",{className:"text-sm text-scale-900",children:"Select an operation for this policy"})]}),(0,a.jsx)("div",{className:"w-2/3",children:(0,a.jsx)("div",{className:"flex items-center space-x-8",children:(0,a.jsx)(m.Z.Group,{type:"small-cards",size:"tiny",id:"allowed-operation",children:["SELECT","INSERT","UPDATE","DELETE","ALL"].map((function(e){return(0,a.jsx)(m.Z,{name:"allowed-operation",label:e,value:e,checked:r===e,onChange:function(e){return n(e.target.value)}},e)}))})})})]})},h=r(27434),x=function(e){var t=e.roles,r=e.selectedRoles,n=e.onUpdateSelectedRoles,s=t.map((function(e){return{id:e.id,name:e.name,value:e.name,disabled:!1}}));return(0,a.jsxs)("div",{className:"flex space-x-12",children:[(0,a.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,a.jsx)("label",{className:"text-scale-1100 text-base",htmlFor:"policy-name",children:"Target roles"}),(0,a.jsx)("p",{className:"text-scale-900 text-sm",children:"Apply policy to the selected roles"})]}),(0,a.jsx)("div",{className:"relative w-2/3",children:(0,a.jsx)(h.Z,{options:s,value:r,placeholder:"Defaults to all (public) roles if none selected",searchPlaceholder:"Search for a role",onChange:n})})]})},v=r(88671),j=r(65961),g=function(e){var t=e.showTemplates,r=e.onViewTemplates,n=e.onReviewPolicy;return(0,a.jsxs)("div",{className:"flex justify-between items-center border-t px-6 py-4 dark:border-dark",children:[(0,a.jsx)("a",{href:"https://supabase.com/docs/learn/auth-deep-dive/auth-policies",target:"_blank",rel:"noreferrer",children:(0,a.jsx)(v.z,{type:"link",icon:(0,a.jsx)(j.Z,{size:14,strokeWidth:1.5}),children:"Documentation"})}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[t&&(0,a.jsx)(v.z,{type:"default",onClick:r,children:"View templates"}),(0,a.jsx)(v.z,{type:"primary",onClick:n,children:"Review"})]})]})},b=function(e){var t,r,s,o,c=e.isNewPolicy,l=void 0===c||c,d=e.roles,u=void 0===d?[]:d,m=e.policyFormFields,h=void 0===m?{}:m,v=e.onUpdatePolicyFormFields,j=void 0===v?function(){}:v,b=e.onViewTemplates,y=void 0===b?function(){}:b,w=e.onReviewPolicy,N=void 0===w?function(){}:w,k=null!==(t=null===h||void 0===h?void 0:h.command)&&void 0!==t?t:"",O=null!==(r=null===h||void 0===h?void 0:h.definition)&&void 0!==r?r:"",P=null!==(s=null===h||void 0===h?void 0:h.check)&&void 0!==s?s:"",S=(null!==(o=null===h||void 0===h?void 0:h.roles)&&void 0!==o?o:[]).filter((function(e){return"public"!==e}));return(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("div",{className:"space-y-8 py-8",children:[(0,a.jsx)(n.C.Content,{children:(0,a.jsx)(i,{name:h.name,limit:63,onUpdatePolicyName:function(e){return j({name:e})}})}),(0,a.jsx)(n.C.Separator,{}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.C.Content,{children:(0,a.jsx)(f,{operation:k,onSelectOperation:function(e){return j({command:e})}})}),(0,a.jsx)(n.C.Separator,{})]}),(0,a.jsx)(n.C.Content,{children:(0,a.jsx)(x,{roles:u,selectedRoles:S,onUpdateSelectedRoles:function(e){return j({roles:e})}})}),(0,a.jsx)(n.C.Separator,{}),(0,a.jsx)(n.C.Content,{children:(0,a.jsx)(p,{operation:k,definition:O,check:P,onUpdatePolicyUsing:function(e){return j({definition:e})},onUpdatePolicyCheck:function(e){return j({check:e})}})})]}),(0,a.jsx)(g,{showTemplates:l,onViewTemplates:y,onReviewPolicy:N})]})}},8190:function(e,t,r){r.d(t,{$A:function(){return G},rE:function(){return j},yV:function(){return Y},pT:function(){return A},tV:function(){return ce},jm:function(){return _}});var n=r(55732),s=r(34707),a=r.n(s),i=r(27378),o=r(98784),c=r(29432),l=r(86677),d=r(43659),u=r(45355),p=r(36802),m=r(96364),f=r(30259),h=r(89744),x=r(33114),v=r(24246),j=(0,d.Pi)((function(e){var t=e.tables,r=e.hasTables,s=e.isLocked,d=(0,l.useRouter)(),j=(0,p.UO)().ref,g=(0,u.oR)(),b=g.ui,y=g.meta,w=y.roles.list((function(e){return!y.roles.systemRoles.includes(e.name)})),N=(0,i.useState)({}),k=N[0],O=N[1],P=(0,i.useState)({}),S=P[0],C=P[1],Z=(0,i.useState)({}),E=Z[0],_=Z[1],I=(0,i.useState)({}),D=I[0],T=I[1],R=function(){_({}),O({})},L=function(){T({}),C({})},z=function(e){C(e)},A=function(e){O({schema:e.schema,table:e.name})},F=function(e){_(e),O({schema:e.schema,table:e.table})},U=function(e){T(e)},M=function(){var e=(0,n.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.setNotification({category:"success",message:"Policy successfully saved!"}),R();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,n.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:S.id,rls_enabled:!S.rls_enabled},e.next=3,y.tables.update(t.id,t);case 3:(r=e.sent).error&&b.setNotification({category:"error",message:"Failed to toggle RLS: ".concat(r.error.message)}),L();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,n.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.policies.create(t);case 2:if(!(r=e.sent).error){e.next=6;break}return b.setNotification({category:"error",message:"Error adding policy: ".concat(r.error.message)}),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,n.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.policies.update(t.id,t);case 2:if(!(r=e.sent).error){e.next=6;break}return b.setNotification({category:"error",message:"Error updating policy: ".concat(r.error.message)}),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,n.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.policies.del(D.id);case 2:"boolean"!==typeof(t=e.sent)&&t.error?b.setNotification({category:"error",message:"Error deleting policy: ".concat(t.error.message)}):b.setNotification({category:"success",message:"Successfully deleted policy!"}),L();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[t.length>0?t.map((function(e){return(0,v.jsx)("section",{children:(0,v.jsx)(ce,{table:e,isLocked:s,onSelectToggleRLS:z,onSelectCreatePolicy:A,onSelectEditPolicy:F,onSelectDeletePolicy:U})},e.id)})):r?(0,v.jsx)(f.Z,{}):(0,v.jsx)("div",{className:"flex-grow",children:(0,v.jsx)(h.Z,{size:"large",title:"Row-Level Security (RLS) Policies",ctaButtonLabel:"Create a table",infoButtonLabel:"What is RLS?",infoButtonUrl:"https://supabase.com/docs/guides/auth/row-level-security",onClickCta:function(){return d.push("/project/".concat(j,"/editor"))},children:(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsx)(x.Z,{title:"What are policies?",icon:(0,v.jsx)(c.Z,{strokeWidth:2}),description:(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("p",{className:"text-sm",children:"Policies restrict, on a per-user basis, which rows can be returned by normal queries, or inserted, updated, or deleted by data modification commands."}),(0,v.jsx)("p",{className:"text-sm",children:"This is also known as Row-Level Security (RLS). Each policy is attached to a table, and the policy is executed each time its accessed."})]})}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"Create a table in this schema first before creating a policy."})]})})}),(0,v.jsx)(Y,{visible:!(0,o.isEmpty)(k),roles:w,schema:k.schema,table:k.table,selectedPolicyToEdit:E,onSelectCancel:R,onCreatePolicy:W,onUpdatePolicy:G,onSaveSuccess:M}),(0,v.jsx)(m.Z,{danger:!0,visible:!(0,o.isEmpty)(D),title:"Confirm to delete policy",description:'This is permanent! Are you sure you want to delete the policy "'.concat(D.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:L,onSelectConfirm:q}),(0,v.jsx)(m.Z,{danger:S.rls_enabled,visible:!(0,o.isEmpty)(S),title:"Confirm to ".concat(S.rls_enabled?"disable":"enable"," RLS"),description:"Are you sure you want to ".concat(S.rls_enabled?"disable":"enable",' row level security for the table "').concat(S.name,'"?'),buttonLabel:"Confirm",buttonLoadingLabel:"Saving",onSelectCancel:L,onSelectConfirm:B})]})})),g=r(90849),b=r(94269),y=r(86673),w=function(e){var t=e.view,r=e.schema,n=e.table,s=e.isNewPolicy,a=e.onSelectBackFromTemplates,i=void 0===a?function(){}:a;return t===G.TEMPLATES?(0,v.jsx)("div",{className:"",children:(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("span",{onClick:i,className:"cursor-pointer text-scale-900 transition-colors hover:text-scale-1200",children:(0,v.jsx)(y.Z,{strokeWidth:2,size:14})}),(0,v.jsx)("h4",{className:"m-0 text-lg",children:"Select a template to use for your new policy"})]})}):(0,v.jsx)("div",{className:"flex items-center space-x-3",children:(0,v.jsx)("h4",{className:"m-0 truncate text-lg",children:t===G.EDITOR||t===G.SELECTION?"".concat(s?"Adding new policy to":"Editing policy from"," ").concat(r,".").concat(n):t===G.REVIEW?"Reviewing policy to be ".concat(s?"created":"updated"," on ").concat(r,".").concat(n):void 0})})},N=function(e,t){return[{id:"policy-1",templateName:"Enable read access to everyone",description:"This policy gives read access to your table for all users via the SELECT operation.",statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR SELECT USING (\n  true\n);").trim(),name:"Enable read access for all users",definition:"true",check:"",command:"SELECT",roles:[]},{id:"policy-2",templateName:"Enable insert access for authenticated users only",description:"This policy gives insert access to your table for all authenticated users only.",statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR INSERT \nTO authenticated \nWITH CHECK (true);").trim(),name:"Enable insert for authenticated users only",definition:"",check:"true",command:"INSERT",roles:["authenticated"]},{id:"policy-3",templateName:"Enable update access for users based on their email *",description:'This policy assumes that your table has a column "email", and allows users to update rows which the "email" column matches their email.',statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR UPDATE USING (\n  auth.jwt() ->> 'email' = email\n) WITH CHECK (\n  auth.jwt() ->> 'email' = email\n);").trim(),name:"Enable update for users based on email",definition:"auth.jwt() ->> 'email' = email",check:"auth.jwt() ->> 'email' = email",command:"UPDATE",roles:[]},{id:"policy-4",templateName:"Enable delete access for users based on their user ID *",description:'This policy assumes that your table has a column "user_id", and allows users to delete rows which the "user_id" column matches their ID',statement:'\nCREATE POLICY "policy_name"\nON '.concat(e,".").concat(t,"\nFOR DELETE USING (\n  auth.uid() = user_id\n);").trim(),name:"Enable delete for users based on user_id",definition:"auth.uid() = user_id",check:"",command:"DELETE",roles:[]}]},k=r(33885),O=r(88671),P=r(78906),S=function(e){var t=e.policy,r=void 0===t?{}:t,n=e.onSelectBack,s=void 0===n?function(){}:n,a=e.onSelectSave,c=void 0===a?function(){}:a,l=(0,i.useState)(!1),d=l[0],u=l[1],p=r.statement||"";return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.C.Content,{children:(0,v.jsxs)("div",{className:"space-y-6 py-8",children:[(0,v.jsx)("div",{className:"flex items-center justify-between space-y-8",children:(0,v.jsx)("div",{className:"flex flex-col",children:(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"This is the SQL statement that will be used to create your policy."})})}),(0,v.jsx)("div",{className:"space-y-4 overflow-y-auto",style:{maxHeight:"25rem"},children:(0,o.isEmpty)(r)?(0,v.jsx)("div",{className:"my-10 flex items-center justify-center space-x-2 opacity-50",children:(0,v.jsx)("p",{className:"text-base text-scale-1100",children:"There are no changes made to this policy"})}):(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("span",{children:r.description}),(0,v.jsx)("div",{className:"h-40",children:(0,v.jsx)(P.Z,{readOnly:!0,defaultValue:p})})]})})]})}),(0,v.jsxs)("div",{className:"flex w-full items-center justify-end gap-2 border-t px-6 py-4 dark:border-dark",children:[(0,v.jsx)(O.z,{type:"default",onClick:s,children:"Back to edit"}),(0,v.jsx)(O.z,{type:"primary",disabled:(0,o.isEmpty)(r),onClick:function(){u(!0),c()},loading:d,children:"Save policy"})]})]})},C=r(37772),Z=function(e){var t=e.templates,r=void 0===t?[]:t,n=e.templatesNote,s=void 0===n?"":n,a=e.selectedTemplate,i=e.setSelectedTemplate,o=void 0===i?function(){}:i;return(0,v.jsxs)("div",{className:"flex flex-col justify-between border-r dark:border-dark",style:{width:"30%"},children:[(0,v.jsx)("div",{className:"hide-scrollbar  divide-border-primary space-y-0 divide-y divide-solid overflow-y-auto",style:{maxHeight:"24rem"},children:(0,v.jsx)(C.ZP,{type:"border",children:r.map((function(e,t){var r=a===e;return(0,v.jsx)("div",{className:"border-b border-scale-400 hover:bg-scale-400 "+(r?"bg-scale-300 dark:bg-scale-500":""),children:(0,v.jsx)(C.ZP.Item,{active:r,onClick:function(){return o(e)},children:(0,v.jsx)("div",{className:"truncate py-2",children:e.templateName})},e.id)},t)}))})}),s&&(0,v.jsx)("div",{className:"px-4 py-2",children:(0,v.jsx)("p",{className:"text-xs text-scale-900",children:s})})]})},E=function(e){var t=e.selectedTemplate,r=t.id,n=t.templateName,s=t.description,a=t.statement;return(0,v.jsx)("div",{className:"space-y-8",style:{width:"70%"},children:!(0,o.isEmpty)(t)&&(0,v.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,v.jsxs)("div",{className:"my-5 h-full space-y-6 px-6",children:[(0,v.jsx)("div",{className:"space-y-2",children:(0,v.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,v.jsx)("h3",{className:"text-scale-1200 text-base",children:n}),(0,v.jsx)("p",{className:"text-scale-1100 text-sm",children:s})]})}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("label",{className:"text-scale-1100 text-sm",children:"Policy SQL template:"}),(0,v.jsx)("div",{className:"h-64",children:(0,v.jsx)(P.Z,{readOnly:!0,queryId:r,defaultValue:a})})]})]})})})},_=function(e){var t=e.templates,r=void 0===t?[]:t,n=e.templatesNote,s=void 0===n?"":n,a=e.onUseTemplate,c=void 0===a?function(){}:a,l=(0,i.useState)(r[0]),d=l[0],u=l[1];return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex justify-between border-t dark:border-dark",children:[(0,v.jsx)(Z,{templatesNote:s,templates:r,selectedTemplate:d,setSelectedTemplate:u}),(0,v.jsx)(E,{selectedTemplate:d})]}),(0,v.jsxs)("div",{className:"flex w-full items-center justify-end gap-3 border-t px-6 py-4 dark:border-dark",children:[(0,v.jsx)("span",{className:"text-sm text-scale-900",children:"This will override any existing code you've written"}),(0,v.jsx)(O.z,{type:"primary",disabled:(0,o.isEmpty)(d),onClick:function(){return c(d)},children:"Use this template"})]})]})},I=r(20935),D=r(12163);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=function(e){return(0,v.jsx)(D.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,g.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:I.Z},e))},L=r(67863),z=r(84151),A=function(e){var t=e.description,r=void 0===t?"":t,n=e.onViewTemplates,s=void 0===n?function(){}:n,a=e.onViewEditor,i=void 0===a?function(){}:a;return(0,v.jsx)(b.C.Content,{children:(0,v.jsxs)("div",{className:"space-y-6 py-8",children:[(0,v.jsx)("div",{children:(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:r})}),(0,v.jsxs)("div",{className:"grid grid-cols-1 gap-2 lg:grid-cols-1",children:[(0,v.jsx)(z.Z,{title:"Get started quickly",description:"Create a policy from a template",icon:(0,v.jsx)("div",{className:"flex",children:(0,v.jsx)("div",{className:" flex h-8 w-8 items-center justify-center rounded bg-scale-1200 text-scale-100   ",children:(0,v.jsx)(R,{size:14,strokeWidth:2})})}),onClick:s}),(0,v.jsx)(z.Z,{title:"For full customization",description:"Create a policy from scratch",icon:(0,v.jsx)("div",{className:"flex",children:(0,v.jsx)("div",{className:" flex h-8 w-8 items-center justify-center rounded bg-scale-1200 text-scale-100   ",children:(0,v.jsx)(L.Z,{size:14,strokeWidth:2})})}),onClick:i})]}),(0,v.jsxs)("p",{className:"text-sm text-scale-1100",children:["Not sure what policies are? Check out our resources"," ",(0,v.jsx)("a",{target:"_blank",rel:"noreferrer",className:"text-brand-900 transition-colors hover:text-brand-1200",href:"https://supabase.com/docs/guides/auth#policies",children:"here"}),"."]})]})})},F=r(44285);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,g.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=function(e){var t=e.name,r=e.definition,n=e.check,s=e.command,a=e.schema,i=e.table,o=0===e.roles.length?["public"]:e.roles;return{description:"Add policy for the ".concat(s,' operation under the policy "').concat(t,'"'),statement:['CREATE POLICY "'.concat(t,'" ON "').concat(a,'"."').concat(i,'"'),"AS PERMISSIVE FOR ".concat(s),"TO ".concat(o.join(", ")),"".concat(r?"USING (".concat(r,")"):""),"".concat(n?"WITH CHECK (".concat(n,")"):"")].join("\n")}},W=function(e,t){var r,n=e.name,s=e.schema,a=e.table,i=(0,o.has)(t,["definition"]),c=(0,o.has)(t,["check"]),l=(0,o.has)(t,["name"]),d=(0,o.has)(t,["roles"]),u=Object.keys(t),p="Update policy's ".concat(1===u.length?u[0]:"".concat(u.slice(0,u.length-1).join(", ")," and ").concat(u[u.length-1])," "),m=0===(null!==(r=null===t||void 0===t?void 0:t.roles)&&void 0!==r?r:[]).length?["public"]:t.roles,f='ALTER POLICY "'.concat(n,'" ON "').concat(s,'"."').concat(a,'"');return{description:p,statement:["BEGIN;"].concat((0,F.Z)(i?["  ".concat(f," USING (").concat(t.definition,");")]:[]),(0,F.Z)(c?["  ".concat(f," WITH CHECK (").concat(t.check,");")]:[]),(0,F.Z)(d?["  ".concat(f," TO ").concat(m.join(", "),";")]:[]),(0,F.Z)(l?["  ".concat(f,' RENAME TO "').concat(t.name,'";')]:[]),["COMMIT;"]).join("\n")}},G={SELECTION:"SELECTION",TEMPLATES:"TEMPLATES",EDITOR:"EDITOR",REVIEW:"REVIEW"},q=r(63840);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,g.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=function(e){var t=e.visible,r=void 0!==t&&t,s=e.roles,c=void 0===s?[]:s,l=e.schema,d=void 0===l?"":l,p=e.table,m=void 0===p?"":p,f=e.selectedPolicyToEdit,h=void 0===f?{}:f,x=e.onSelectCancel,j=void 0===x?function(){}:x,g=e.onCreatePolicy,y=void 0===g?function(){}:g,O=e.onUpdatePolicy,P=void 0===O?function(){}:O,C=e.onSaveSuccess,Z=void 0===C?function(){}:C,E=(0,u.oR)().ui,I={schema:d,table:m,name:"",definition:"",check:"",command:null,roles:[]},D=(0,o.isEmpty)(h),T=D?I:h,R=(0,i.useState)(""),L=R[0],z=R[1],F=(0,i.useState)(G.EDITOR),U=F[0],V=F[1],Y=(0,i.useState)(T),Q=Y[0],K=Y[1],$=(0,i.useState)(""),J=$[0],X=$[1],ee=(0,i.useState)(!1),te=ee[0],re=ee[1],ne=(0,i.useState)(!1),se=ne[0],ae=ne[1];(0,i.useEffect)((function(){r&&(D?ie():oe(),K(T))}),[r]);var ie=function(){return V(G.SELECTION)},oe=function(){return V(G.EDITOR)},ce=function(){z(U),V(G.TEMPLATES)},le=function(){var e=(0,n.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=6;break}return e.next=3,y(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,P(t);case 8:e.t0=e.sent;case 9:e.t0?oe():Z();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)(b.C,{size:U===G.SELECTION?"medium":"xxlarge",closable:!0,hideFooter:!0,visible:r,contentStyle:{padding:0},header:[(0,v.jsx)(w,{view:U,isNewPolicy:D,schema:d,table:m,onSelectBackFromTemplates:function(){return V(L)}},"0")],onCancel:function(){te?ae(!0):j()},children:(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)(q.Z,{visible:se,header:"Confirm to close",buttonLabel:"Confirm",onSelectCancel:function(){return ae(!1)},onSelectConfirm:function(){j(),ae(!1),re(!1)},children:(0,v.jsx)(b.C.Content,{children:(0,v.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"There are unsaved changes. Are you sure you want to close the editor? Your changes will be lost."})})}),U===G.SELECTION?(0,v.jsx)(A,{description:"Write rules with PostgreSQL's policies to fit your unique business needs.",onViewTemplates:ce,onViewEditor:oe}):U===G.EDITOR?(0,v.jsx)(k.ZP,{isNewPolicy:D,roles:c,policyFormFields:Q,onUpdatePolicyFormFields:function(e){re(!0),e.name&&e.name.length>63||K(H(H({},Q),e))},onViewTemplates:ce,onReviewPolicy:function(){var e=Q.name,t=Q.definition,r=Q.check,n=Q.command;if(0===e.length)return E.setNotification({category:"error",message:"Do give your policy a name"});if(!n)return E.setNotification({category:"error",message:"You will need to allow at one operation in your policy",duration:4e3});if(["SELECT","DELETE"].includes(n)&&!t)return E.setNotification({category:"error",message:"Did you forget to provide a USING expression for your policy?",duration:4e3});if("INSERT"===n&&!r)return E.setNotification({category:"error",message:"Did you forget to provide a WITH CHECK expression for your policy?",duration:4e3});if("UPDATE"===n&&!t&&!r)return E.setNotification({category:"error",message:"You will need to provide either a USING, or WITH CHECK expression, or both for your policy",duration:4e3});var s=function(e,t){var r=e.definition,n=e.check,s=M(M({},e),{},{definition:r?r.replace(/\s+/g," ").trim():void 0===r?null:r,check:n?n.replace(/\s+/g," ").trim():void 0===n?null:n});if((0,o.isEmpty)(t))return B(s);if((0,o.isEqual)(e,t))return{};var a={};return(0,o.isEqual)(s.name,t.name)||(a.name=s.name),(0,o.isEqual)(s.definition,t.definition)||(a.definition=s.definition),(0,o.isEqual)(s.check,t.check)||(a.check=s.check),(0,o.isEqual)(s.roles,t.roles)||(a.roles=s.roles),(0,o.isEmpty)(a)?{}:W(s,a)}(Q,h);X(s),V(G.REVIEW)}}):U===G.TEMPLATES?(0,v.jsx)(_,{templates:N(d,m),templatesNote:"* References a specific column in the table",onUseTemplate:function(e){K(H(H({},Q),{},{name:e.name,definition:e.definition,check:e.check,command:e.command,roles:e.roles})),oe()}}):U===G.REVIEW?(0,v.jsx)(S,{policy:J,onSelectBack:oe,onSelectSave:function(){var e=D?function(e){var t=e.command,r=e.definition,n=e.check,s=e.roles;return M(M({},e),{},{action:"PERMISSIVE",command:t||void 0,definition:r||void 0,check:n||void 0,roles:s.length>0?s:void 0})}(Q):function(e,t){var r=e.definition,n=e.check,s=M(M({},e),{},{definition:r?r.replace(/\s+/g," ").trim():r,check:n?n.replace(/\s+/g," ").trim():n}),a={id:t.id};return(0,o.isEqual)(s.name,t.name)||(a.name=s.name),(0,o.isEqual)(s.definition,t.definition)||(a.definition=s.definition||void 0),(0,o.isEqual)(s.check,t.check)||(a.check=s.check||void 0),(0,o.isEqual)(s.roles,t.roles)||(0===s.roles.length?a.roles=["public"]:a.roles=s.roles||void 0),a}(Q,h);le(e),re(!1)}}):(0,v.jsx)("div",{})]})})},Q=r(79894),K=r.n(Q),$=r(64116),J=r(84364),X=r(86223),ee=r(68043),te=function(e){var t=e.table,r=e.isLocked,n=e.onSelectToggleRLS,s=void 0===n?function(){}:n,a=e.onSelectCreatePolicy,i=void 0===a?function(){}:a,o=(0,l.useRouter)().query.ref,c=(0,u.Xo)(ee.KA.TENANT_SQL_ADMIN_WRITE,"tables"),d=(0,u.Xo)(ee.KA.TENANT_SQL_ADMIN_WRITE,"policies");return(0,v.jsxs)("div",{id:t.id.toString(),className:"flex w-full items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex space-x-4 text-left",children:[(0,v.jsx)(K(),{href:"/project/".concat(o,"/editor/").concat(t.id),children:(0,v.jsx)("a",{children:(0,v.jsx)("h4",{className:"m-0",children:t.name})})}),r?(0,v.jsx)(J.Z,{color:"scale",children:(0,v.jsxs)("span",{className:"flex gap-2 items-center text-xs uppercase text-scale-900",children:[(0,v.jsx)(X.Z,{width:12})," Locked"]})}):(0,v.jsx)(J.Z,{color:t.rls_enabled?"green":"yellow",children:t.rls_enabled?"RLS enabled":"RLS disabled"})]}),!r&&(0,v.jsx)("div",{className:"flex-1",children:(0,v.jsxs)("div",{className:"flex flex-row-reverse",children:[(0,v.jsxs)($.fC,{delayDuration:0,children:[(0,v.jsx)($.xz,{children:(0,v.jsx)(O.z,{type:"outline",disabled:!d,className:"ml-2",onClick:function(){return i(t)},children:"New Policy"})}),!d&&(0,v.jsx)($.h_,{children:(0,v.jsxs)($.VY,{side:"bottom",children:[(0,v.jsx)($.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create RLS policies"})})]})})]}),(0,v.jsxs)($.fC,{delayDuration:0,children:[(0,v.jsx)($.xz,{children:(0,v.jsx)(O.z,{type:"default",disabled:!c,onClick:function(){return s(t)},children:t.rls_enabled?"Disable RLS":"Enable RLS"})}),!c&&(0,v.jsx)($.h_,{children:(0,v.jsxs)($.VY,{side:"bottom",children:[(0,v.jsx)($.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to toggle RLS"})})]})})]})]})})]})},re=r(2674),ne=r(44315),se=r(43555),ae=r(96423),ie=function(e){var t=e.policy,r=e.onSelectEditPolicy,n=void 0===r?function(){}:r,s=e.onSelectDeletePolicy,a=void 0===s?function(){}:s,i=(0,u.Xo)(ee.KA.TENANT_SQL_ADMIN_WRITE,"policies");return(0,v.jsxs)(ae.Z.Content,{className:["flex border-panel-border-light dark:border-panel-border-dark","w-full space-x-4 border-b py-4 lg:items-center"].join(" "),children:[(0,v.jsxs)("div",{className:"flex grow flex-col space-y-1",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("p",{className:"font-mono text-xs text-scale-1000",children:t.command}),(0,v.jsx)("p",{className:"text-sm text-scale-1200",children:t.name})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)("p",{className:"text-scale-1000 text-sm",children:"Applied to:"}),t.roles.map((function(e,t){return(0,v.jsx)("code",{className:"text-scale-1000 text-xs",children:e},"policy-".concat(e,"-").concat(t))}))]})]}),(0,v.jsx)("div",{children:i?(0,v.jsx)(re.ZP,{side:"bottom",align:"end",size:"small",overlay:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(re.ZP.Item,{icon:(0,v.jsx)(L.Z,{size:14}),onClick:function(){return n(t)},children:"Edit"}),(0,v.jsx)(re.ZP.Separator,{}),(0,v.jsx)(re.ZP.Item,{icon:(0,v.jsx)(ne.Z,{size:14}),onClick:function(){return a(t)},children:"Delete"})]}),children:(0,v.jsx)(O.z,{type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,v.jsx)(se.Z,{})})}):(0,v.jsxs)($.fC,{delayDuration:0,children:[(0,v.jsx)($.xz,{children:(0,v.jsx)(O.z,{disabled:!0,type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,v.jsx)(se.Z,{})})}),!i&&(0,v.jsx)($.h_,{children:(0,v.jsxs)($.VY,{side:"left",children:[(0,v.jsx)($.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to edit RLS policies"})})]})})]})})]})},oe=r(11597),ce=(0,d.Pi)((function(e){var t=e.table,r=e.isLocked,n=e.onSelectToggleRLS,s=void 0===n?function(){}:n,a=e.onSelectCreatePolicy,i=void 0===a?function(){}:a,o=e.onSelectEditPolicy,c=void 0===o?function(){}:o,l=e.onSelectDeletePolicy,d=void 0===l?function(){}:l,p=(0,u.oR)().meta.policies.list((function(e){return e.schema===t.schema&&e.table===t.name}));return(0,v.jsxs)(ae.Z,{title:(0,v.jsx)(te,{table:t,isLocked:r,onSelectToggleRLS:s,onSelectCreatePolicy:i}),children:[0===p.length&&(0,v.jsxs)("div",{className:"p-4 px-6 space-y-1",children:[(0,v.jsx)("p",{className:"text-scale-1100 text-sm",children:"No policies created yet"}),!r&&(t.rls_enabled?(0,v.jsx)("p",{className:"text-scale-1000 text-sm",children:"RLS is enabled - create a policy to allow access to this table."}):(0,v.jsx)(oe.Z,{withIcon:!0,variant:"warning",className:"!px-4 !py-3 !mt-3",title:"Warning: RLS is disabled. Your table is publicly readable and writable.",children:"Anyone with the anon. key can modify or delete your data. You should turn on RLS and create access policies to keep your data secure."}))]}),p.map((function(e){return(0,v.jsx)(ie,{policy:e,onSelectEditPolicy:c,onSelectDeletePolicy:d},e.id)}))]})}))},34465:function(e,t,r){var n=r(84364),s=r(88671),a=r(49239),i=r(76610),o=r(20796),c=r(24246);t.Z=function(e){var t=e.language,r=e.officialSupport,l=e.docsUrl,d=e.gitUrl,u=e.altIconName;return(0,c.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,c.jsx)("img",{src:"".concat(o.GW,"/img/libraries/").concat("".concat(u||t.toLowerCase(),"-icon.svg")),alt:"".concat(t," logo"),width:"21"}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h5",{className:"flex items-center gap-2 text-base text-scale-1200",children:[t," ",!r&&(0,c.jsx)(n.Z,{color:"green",children:"Community"})]})}),(0,c.jsxs)("div",{className:"flex gap-2",children:[l&&(0,c.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:(0,c.jsx)(s.z,{icon:(0,c.jsx)(a.Z,{}),type:"default",children:"Docs"})}),(0,c.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:(0,c.jsx)(s.z,{icon:(0,c.jsx)(i.Z,{}),type:"default",children:"See GitHub"})})]})]})]})}},65512:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(27378),s=r(24246),a=n.createContext({isDarkMode:!0,toggleTheme:function(){}}),i=r(47939),o=r(79894),c=r.n(o),l=r(20796),d=function(e){var t=e.framework,r=e.title,o=e.description,d=e.url,u=n.useContext(a).isDarkMode;return(0,s.jsx)(c(),{href:d,children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,s.jsxs)("div",{className:["group relative","border bg-panel-header-light  hover:bg-panel-border-light dark:bg-panel-header-dark dark:hover:bg-panel-border-dark","border-panel-border-light hover:border-panel-border-hover-light  dark:border-panel-border-dark","flex h-32 flex-row rounded-md p-4 hover:border-gray-300 dark:hover:border-panel-border-hover-dark","transition duration-150 ease-in-out"].join(" "),children:[(0,s.jsx)("div",{className:"mr-4 flex flex-col",children:(0,s.jsx)("img",{className:"transition-all group-hover:scale-110",src:"".concat(l.GW,"/img/libraries/").concat(t.toLowerCase()).concat(["expo","nextjs"].includes(t.toLowerCase())&&u?"-dark":"","-icon.svg"),alt:"".concat(t," logo"),width:26,height:26})}),(0,s.jsxs)("div",{className:"w-4/5 space-y-2",children:[(0,s.jsx)("h5",{className:"text-scale-1200",children:r}),(0,s.jsx)("p",{className:"text-sm text-scale-1000",children:o})]}),(0,s.jsx)("div",{className:" absolute right-4 top-3 text-scale-900 transition-all  duration-200  group-hover:right-3 group-hover:text-scale-1200 ",children:(0,s.jsx)(i.Z,{})})]})})})}},95925:function(e,t,r){r.d(t,{B:function(){return s},l:function(){return n}});var n=[{language:"JavaScript",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/javascript/installing",gitUrl:"https://github.com/supabase/supabase-js"},{language:"Flutter",officialSupport:!0,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/dart/installing",gitUrl:"https://github.com/supabase/supabase-flutter"},{language:"Python",officialSupport:!1,releaseState:"Alpha",docsUrl:"https://supabase.com/docs/reference/python/initializing",gitUrl:"https://github.com/supabase/supabase-py"},{language:"C#",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/csharp/installing",gitUrl:"https://github.com/supabase-community/supabase-csharp",altIconName:"c-sharp"},{language:"Swift",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/swift/initializing",gitUrl:"https://github.com/supabase-community/supabase-swift"},{language:"Kotlin",officialSupport:!1,releaseState:void 0,docsUrl:"https://supabase.com/docs/reference/kotlin/installing",gitUrl:"https://github.com/supabase-community/supabase-kt"}],s=[{framework:"Svelte",title:"Svelte kanban board",description:"A Trello clone using Supabase as the storage system.",url:"https://github.com/joshnuss/supabase-kanban"},{framework:"NextJS",title:"Next.js Realtime chat app",description:"Next.js Slack clone app using Supabase realtime subscriptions",url:"https://github.com/supabase/supabase/tree/master/examples/slack-clone/nextjs-slack-clone"},{framework:"NextJS",title:"Next.js Subscription and Auth",description:"The all-in-one starter kit for high-performance SaaS applications.",url:"https://github.com/vercel/nextjs-subscription-payments"},{framework:"Expo",title:"Expo Starter",description:"Template bottom tabs with auth flow (Typescript)",url:"https://github.com/codingki/react-native-expo-template/tree/master/template-typescript-bottom-tabs-supabase-auth-flow"},{framework:"NestJS",title:"NestJS example",description:"NestJS example using Supabase Auth",url:"https://github.com/hiro1107/nestjs-supabase-auth"},{framework:"React",title:"React realtime chat app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/shwosner/realtime-chat-supabase-react"},{framework:"JavaScript",title:"Vanilla-js Auth app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/auth/javascript-auth"},{framework:"React",title:"React Native todo list app",description:"React Native Todo List example with Expo",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/expo-todo-list"},{framework:"NextJS",title:"Next.js todo list app",description:"NextJS todo list example",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/nextjs-todo-list"},{framework:"React",title:"React todo List app",description:"React todo List example",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/react-todo-list"},{framework:"Svelte",title:"Svelte todo list app",description:"Sveltejs todo with TailwindCSS and Snowpack",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/sveltejs-todo-list"},{framework:"VueJS",title:"Vue.js todo list app",description:"Vue.js todo app using TypeScript",url:"https://github.com/supabase/examples/tree/main/supabase-js-v1/todo-list/vue3-ts-todo-list"}]},31027:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(68043),s=r(86677),a=r(38230),i=r(24376),o=r(45355),c=r(81228),l=r(20796),d=function(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default";return[{title:"Logs Explorer",items:[{key:"explorer",name:"Query",root:!0},l.Qy?{key:"saved",name:"Saved Queries"}:null,{key:"recent",name:"Recent Queries"},{key:"templates",name:"Templates"}].filter((function(e){return e})).map((function(e){var t=e.key,n=e.name,s=e.root;return{name:n,key:t,url:"/project/".concat(r,"/logs/explorer").concat(s?"":"/"+t),items:[]}}))},{items:[{name:l.Qy?"API Edge Network":"Kong API",key:"edge-logs",url:"/project/".concat(r,"/logs/edge-logs"),items:[]},{name:"Postgres",key:"postgres-logs",url:"/project/".concat(r,"/logs/postgres-logs"),items:[]},{name:"PostgREST",key:"postgrest-logs",url:"/project/".concat(r,"/logs/postgrest-logs"),items:[]},l.Qy?{name:"PgBouncer",key:"pgbouncer-logs",url:"/project/".concat(r,"/logs/pgbouncer-logs"),items:[]}:null,,{name:"Auth",key:"auth-logs",url:"/project/".concat(r,"/logs/auth-logs"),items:[]},{name:"Storage",key:"storage-logs",url:"/project/".concat(r,"/logs/storage-logs"),items:[]},{name:"Realtime",key:"realtime-logs",url:"/project/".concat(r,"/logs/realtime-logs"),items:[]}].filter((function(e){return e}))}]},u=r(24246),p=(0,o.QO)((function(e){var t=e.title,r=e.children,l=(0,s.useRouter)().pathname.split("/"),p=l[l.length-1],m=(0,o.Vm)();return(0,o.Xo)(n.KA.ANALYTICS_READ,"logflare")?(0,u.jsx)(c.ZP,{title:t,product:"Logs",productMenu:(0,u.jsx)(i.Z,{page:p,menu:d(m)}),children:(0,u.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:r})}):(0,u.jsx)(c.ZP,{children:(0,u.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:(0,u.jsx)(a.Z,{isFullPage:!0,resourceText:"access your project's logs explorer"})})})}))},87574:function(e,t,r){var n=r(55732),s=r(34707),a=r.n(s),i=r(64116),o=r(68043),c=r(85945),l=r(79894),d=r.n(l),u=r(27378),p=r(54782),m=r(96364),f=r(65966),h=r(93782),x=r(45355),v=r(14919),j=r(20796),g=r(93359),b=r(88671),y=r(94269),w=r(47510),N=r(24246);t.Z=function(e){var t,r=e.product,s=(0,c.NL)(),l=(0,x.oR)().ui,k=(0,p.UO)().ref,O=(0,x.lL)(),P=(0,w.d2)().project,S=null===O||void 0===O?void 0:O.slug,C=(0,x.P5)("initWithKps"),Z=(0,f.u)({slug:S}).data,E=(Z||[]).length>0,_=(0,u.useState)(!1),I=_[0],D=_[1],T=(0,u.useState)(!1),R=T[0],L=T[1],z=(0,x.Xo)(o.KA.INFRA_EXECUTE,"queue_jobs.projects.initialize_or_resume"),A=function(){var e=(0,n.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return",l.setNotification({error:"Project is required",category:"error",message:"Unable to restore: project is required"}));case 2:return e.next=4,(0,v.v_)("".concat(j.T5,"/projects/").concat(P.ref,"/restore"),{kps_enabled:C});case 4:(0,h.k7)(s,P.ref,j.S.RESTORING),l.setNotification({category:"success",message:"Restoring project"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"space-y-4",children:(0,N.jsx)("div",{className:"w-full mx-auto mb-16 max-w-7xl",children:(0,N.jsx)("div",{className:"mx-6 flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:(0,N.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,N.jsx)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center space-x-4 lg:space-x-8",children:(0,N.jsx)(g.Z,{className:"text-scale-1100",size:50,strokeWidth:1.5})}),(0,N.jsxs)("div",{className:"space-y-1",children:[(0,N.jsxs)("p",{className:"text-center",children:['The project "',null!==(t=null===P||void 0===P?void 0:P.name)&&void 0!==t?t:"",'" is currently paused.']}),(0,N.jsxs)("p",{className:"text-sm text-scale-1100 text-center",children:["All of your project's data is still intact, but your project is inaccessible while paused."," ",void 0!==r?(0,N.jsxs)(N.Fragment,{children:["Restore this project to access the"," ",(0,N.jsx)("span",{className:"text-brand-900",children:r})," page"]}):"Restore this project and get back to building the next big thing!"]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,N.jsxs)(i.fC,{delayDuration:0,children:[(0,N.jsx)(i.xz,{children:(0,N.jsx)(b.z,{size:"tiny",type:"primary",disabled:!z,onClick:function(){z?E?L(!0):D(!0):l.setNotification({category:"error",message:"You do not have the required permissions to restore this project"})},children:"Restore project"})}),!z&&(0,N.jsx)(i.h_,{children:(0,N.jsxs)(i.VY,{side:"bottom",children:[(0,N.jsx)(i.Eh,{className:"radix-tooltip-arrow"}),(0,N.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,N.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to resume this project"})})]})})]}),(0,N.jsx)(d(),{href:"/project/".concat(k,"/settings/general"),children:(0,N.jsx)("a",{children:(0,N.jsx)(b.z,{type:"default",children:"View project settings"})})})]})]})})})}),(0,N.jsx)(m.Z,{visible:I,title:"Restore this project",description:"Confirm to restore this project? Your project's data will be restored to when it was initially paused.",buttonLabel:"Restore project",buttonLoadingLabel:"Restoring project",onSelectCancel:function(){return D(!1)},onSelectConfirm:A}),(0,N.jsx)(y.C,{hideFooter:!0,visible:R,size:"medium",header:"Your organization has members who have exceeded their free project limits",onCancel:function(){return L(!1)},children:(0,N.jsxs)("div",{className:"py-4 space-y-4",children:[(0,N.jsx)(y.C.Content,{children:(0,N.jsxs)("div",{className:"space-y-2",children:[(0,N.jsx)("p",{className:"text-sm text-scale-1100",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,N.jsx)("ul",{className:"pl-5 text-sm list-disc text-scale-1100",children:(Z||[]).map((function(e,t){return(0,N.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," ","free projects)"]},"member-".concat(t))}))}),(0,N.jsx)("p",{className:"text-sm text-scale-1100",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to unpause this project."})]})}),(0,N.jsx)(y.C.Separator,{}),(0,N.jsx)(y.C.Content,{children:(0,N.jsx)("div",{className:"flex items-center gap-2",children:(0,N.jsx)(b.z,{htmlType:"button",type:"default",onClick:function(){return L(!1)},block:!0,children:"Understood"})})})]})})]})}},31859:function(e,t,r){r.d(t,{I7:function(){return P},Lc:function(){return Z},Wv:function(){return _},_S:function(){return O},g$:function(){return C},gW:function(){return D},jX:function(){return S},q7:function(){return k},tM:function(){return E},tU:function(){return N},ur:function(){return I}});var n=r(90849),s=r(90089),a=r(27378),i=r(16761),o=r(24246),c=["className"],l=["className"],d=["className"],u=["className"],p=["className"],m=["className"],f=["className"],h=["className"],x=["className"],v=["className"],j=["className"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y="mx-auto w-full max-w-[1600px]",w="px-6 lg:px-14 xl:px-28 2xl:px-32",N=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,c);return(0,o.jsx)("header",b(b({},n),{},{ref:t,className:(0,i.cn)("w-full","flex-col gap-3",r)}))})),k=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,l);return(0,o.jsx)("h1",b(b({ref:t},n),{},{className:(0,i.cn)("text-3xl pt-6 pb-4",r)}))})),O=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,d);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)(y,w,r)}))})),P=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,u);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("w-full h-px bg-scale-400",r)}))})),S=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,p);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("flex flex-col gap-3 py-6","lg:grid md:grid-cols-12 lg:py-12",r)}))})),C=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,m);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("col-span-4 xl:col-span-5",r)}))})),Z=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,f);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",r)}))})),E=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,h);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("flex flex-col gap-3 items-center",r)}))})),_=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,x);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("flex w-full items-center",r)}))})),I=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,v);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)("flex flex-row gap-3",r)}))})),D=a.forwardRef((function(e,t){var r=e.className,n=(0,s.Z)(e,j);return(0,o.jsx)("div",b(b({ref:t},n),{},{className:(0,i.cn)(y,w,"my-8 flex flex-col gap-8",r)}))}));N.displayName="ScaffoldHeader",k.displayName="ScaffoldTitle",O.displayName="ScaffoldContainer",P.displayName="ScaffoldDivider",S.displayName="ScaffoldSection",C.displayName="ScaffoldSectionDetail",Z.displayName="ScaffoldSectionContent",E.displayName="ScaffoldFilterAndContent",_.displayName="ScaffoldActionsContainer",I.displayName="ScaffoldActionsGroup",D.displayName="ScaffoldContainerLegacy"},91700:function(e,t,r){var n=r(88038),s=r.n(n),a=r(92836),i=r(20796),o=r(24246);t.Z=function(e){var t=e.children;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s(),{children:(0,o.jsx)("title",{children:"Supabase + Vercel"})}),(0,o.jsxs)("main",{className:"flex flex-col w-full h-full overflow-y-auto",children:[(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"mx-auto px-4 sm:px-6",children:(0,o.jsx)("div",{className:"max-w-xl flex justify-between items-center mx-auto py-4",children:(0,o.jsx)("div",{className:"flex justify-start lg:w-0 lg:flex-1",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"sr-only",children:"Supabase"}),(0,o.jsx)("img",{className:"h-6 w-auto sm:h-6",src:"".concat(i.GW,"/img/supabase-logo.svg"),alt:""})]})})})})}),(0,o.jsx)(a.Z,{light:!0}),(0,o.jsx)("div",{className:"flex-grow",children:(0,o.jsx)("div",{className:"max-w-7xl h-full mx-auto px-4 sm:px-6",children:(0,o.jsx)("div",{className:"max-w-xl h-full mx-auto py-10",children:t})})})]})]})}},81228:function(e,t,r){r.d(t,{p0:function(){return Jn},g1:function(){return x},_h:function(){return ln},zt:function(){return un},gm:function(){return E},Uj:function(){return ss.Z},Ix:function(){return ls},q3:function(){return Kt},$E:function(){return Vt},li:function(){return is},Vk:function(){return on},dU:function(){return pn},_J:function(){return Z},ro:function(){return Fn},lz:function(){return Or},Ru:function(){return ts},pj:function(){return rs},ZP:function(){return ds}});var n=r(43659),s=r(86677),a=r(27378),i=r(54782),o=r(79894),c=r.n(o),l=r(88671),d=r(24246);function u(e){var t=e.error;return(0,a.useEffect)((function(){console.error("Error",t)}),[]),(0,d.jsxs)("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center space-y-6",children:[(0,d.jsxs)("div",{className:"flex w-[320px] flex-col items-center justify-center space-y-3",children:[(0,d.jsx)("h4",{className:"text-lg",children:"Something went wrong \ud83e\udd15"}),(0,d.jsx)("p",{className:"text-center text-sm text-scale-1100",children:"Sorry about that, please try again later or feel free to reach out to us if the problem persists."})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)(c(),{href:"/projects",children:(0,d.jsx)("a",{children:(0,d.jsx)(l.z,{children:"Head back"})})}),(0,d.jsx)(c(),{href:"/support/new",children:(0,d.jsx)("a",{children:(0,d.jsx)(l.z,{type:"secondary",children:"Submit a support request"})})})]}),(0,d.jsxs)("p",{className:"text-sm text-scale-1100",children:["Error: [",null===t||void 0===t?void 0:t.code,"] ",null===t||void 0===t?void 0:t.message]})]})}var p=r(24376),m=r(45355),f=r(44285),h=r(20796),x=(0,m.QO)((0,n.Pi)((function(e){var t,r=e.title,n=e.children,o=(0,m.oR)(),c=o.ui,l=o.meta,x=l.tables,v=x.isInitialized,j=x.isLoading,g=x.error,b=(0,i.UO)().ref,y=void 0===b?"default":b,w=(0,s.useRouter)().pathname.split("/")[4],N=(0,a.useState)(v),k=N[0],O=N[1];return(0,a.useEffect)((function(){c.selectedProjectRef&&(l.policies.load(),l.tables.load(),l.roles.load(),l.schemas.load())}),[c.selectedProjectRef]),(0,a.useEffect)((function(){j||k||O(!0)}),[j]),g?(0,d.jsx)(ds,{children:(0,d.jsx)(u,{error:g})}):(0,d.jsx)(ds,{isLoading:!k,title:r||"Authentication",product:"Authentication",productMenu:(0,d.jsx)(p.Z,{page:w,menu:(t=y,[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(t,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(t,"/auth/policies"),items:[]}].concat((0,f.Z)(h.Qy?[{name:"Providers",key:"providers",url:"/project/".concat(t,"/auth/providers"),items:[]},{name:"Email Templates",key:"templates",url:"/project/".concat(t,"/auth/templates"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(t,"/auth/url-configuration"),items:[]}]:[]))}])}),children:(0,d.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:n})})}))),v=r(55732),j=r(34707),g=r.n(j),b=r(85945),y=r(37753),w=r(13830),N=r(88038),k=r.n(N),O=r(38579),P=r.n(O),S=r(75965),C=r(37385),Z=(0,n.Pi)((function(e){var t=e.heading,r=e.subheading,n=e.showDisclaimer,s=void 0===n||n,o=e.logoLinkToMarketingSite,u=void 0!==o&&o,p=e.children,f=(0,y.v)(),x=(0,b.NL)(),j=(0,i.Fg)().isDarkMode,N=(0,m.P5)("ongoingIncident");(0,a.useEffect)((function(){var e=new URLSearchParams(location.search),t=e.has("returnTo"),r=e.has("next");!t&&!r&&(0,v.Z)(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.I8.initialize();case 2:if(t=e.sent,!t.error){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,w.I8.getSession();case 8:if(r=e.sent,!r.data.session){e.next=15;break}return e.next=13,x.resetQueries();case 13:return e.next=15,f();case 15:case"end":return e.stop()}}),e)})))()}),[]);var O=(0,a.useState)(null),Z=O[0],E=O[1];return(0,a.useEffect)((function(){var e=S.UW[Math.floor(Math.random()*S.UW.length)];E(e)}),[]),(0,d.jsxs)(d.Fragment,{children:[h.Qy&&(0,d.jsx)(k(),{children:(0,d.jsx)("script",{dangerouslySetInnerHTML:{__html:"window._getReturnToPath = ".concat(w.nD.toString(),";if (localStorage.getItem('").concat(w.Uf,"') && !(new URLSearchParams(location.search).has('next'))) {location.replace('").concat(null!==h.GW&&void 0!==h.GW?h.GW:"","' + window._getReturnToPath())}")}})}),(0,d.jsxs)("div",{className:"flex flex-col flex-1 bg-scale-100",children:[(0,d.jsx)("div",{className:"absolute top-0 w-full px-8 mx-auto sm:px-6 lg:px-8 ".concat(N?"pt-16":"pt-6"),children:(0,d.jsxs)("nav",{className:"relative flex items-center justify-between sm:h-10",children:[(0,d.jsx)("div",{className:"flex items-center flex-grow flex-shrink-0 lg:flex-grow-0",children:(0,d.jsx)("div",{className:"flex items-center justify-between w-full md:w-auto",children:(0,d.jsx)(c(),{href:u?"https://supabase.com":"/projects",children:(0,d.jsx)("a",{children:(0,d.jsx)(P(),{src:"".concat(h.GW,j?"/img/supabase-dark.svg":"/img/supabase-light.svg"),alt:"Supabase Logo",height:24,width:120})})})})}),(0,d.jsx)("div",{className:"items-center hidden space-x-3 md:ml-10 md:flex md:pr-4",children:(0,d.jsx)(c(),{href:"https://supabase.com/docs",children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,d.jsx)(l.z,{type:"default",icon:(0,d.jsx)(C.Z,{}),children:"Documentation"})})})})]})}),(0,d.jsxs)("div",{className:"flex flex-1",children:[(0,d.jsxs)("main",{className:"flex flex-col items-center flex-1 flex-shrink-0 px-5 pt-16 pb-8 border-r shadow-lg bg-scale-200 border-scale-500",children:[(0,d.jsxs)("div",{className:"flex-1 flex flex-col justify-center w-[330px] sm:w-[384px]",children:[(0,d.jsxs)("div",{className:"mb-10",children:[(0,d.jsx)("h1",{className:"mt-8 mb-2 text-2xl lg:text-3xl",children:t}),(0,d.jsx)("h2",{className:"text-sm text-scale-1100",children:r})]}),p]}),s&&(0,d.jsx)("div",{className:"sm:text-center",children:(0,d.jsxs)("p",{className:"text-xs text-scale-900 sm:mx-auto sm:max-w-sm",children:["By continuing, you agree to Supabase's"," ",(0,d.jsx)(c(),{href:"https://supabase.com/terms",children:(0,d.jsx)("a",{className:"underline hover:text-scale-1100",children:"Terms of Service"})})," ","and"," ",(0,d.jsx)(c(),{href:"https://supabase.com/privacy",children:(0,d.jsx)("a",{className:"underline hover:text-scale-1100",children:"Privacy Policy"})}),", and to receive periodic emails with updates."]})})]}),(0,d.jsx)("aside",{className:"flex-col items-center justify-center flex-1 flex-shrink hidden basis-1/4 xl:flex",children:null!==Z&&(0,d.jsxs)("div",{className:"relative flex flex-col gap-6",children:[(0,d.jsx)("div",{className:"absolute select-none -top-12 -left-11",children:(0,d.jsx)("span",{className:"text-[160px] leading-none text-scale-600",children:"\u201c"})}),(0,d.jsx)("blockquote",{className:"z-10 max-w-lg text-3xl",children:Z.text}),(0,d.jsxs)("a",{href:Z.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4",children:[(0,d.jsx)("img",{src:"https://supabase.com".concat(Z.img_url),alt:Z.handle,className:"w-12 h-12 rounded-full"}),(0,d.jsx)("div",{className:"flex flex-col",children:(0,d.jsxs)("cite",{className:"not-italic font-medium text-scale-1100 whitespace-nowrap",children:["@",Z.handle]})})]})]})})]})]})]})})),E=(0,n.Pi)((function(e){var t=e.heading,r=e.subheading,n=e.logoLinkToMarketingSite,s=void 0!==n&&n,a=e.showHeadings,o=void 0===a||a,l=e.children,u=(0,i.Fg)().isDarkMode;return(0,d.jsxs)("div",{className:"flex-1 bg-scale-200 flex flex-col gap-8 lg:gap-16 xl:gap-32",children:[(0,d.jsx)("div",{className:"sticky top-0 mx-auto w-full max-w-7xl px-8 pt-6 sm:px-6 lg:px-8",children:(0,d.jsx)("nav",{className:"relative flex items-center justify-between sm:h-10",children:(0,d.jsx)("div",{className:"flex flex-shrink-0 flex-grow items-center lg:flex-grow-0",children:(0,d.jsx)("div",{className:"flex w-full items-center justify-between md:w-auto",children:(0,d.jsx)(c(),{href:s?"https://supabase.com":"/projects",children:(0,d.jsx)("a",{children:(0,d.jsx)(P(),{src:"".concat(h.GW,u?"/img/supabase-dark.svg":"/img/supabase-light.svg"),alt:"",height:24,width:120})})})})})})}),(0,d.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,d.jsxs)("main",{className:"max-w-[448px] w-full flex flex-col px-5",children:[o&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h1",{className:"text-2xl lg:text-3xl mt-8 mb-2",children:t}),(0,d.jsx)("h2",{className:"text-scale-1100 text-sm",children:r})]}),l]})})]})})),_=r(36802),I=r(97588),D=r(90849),T=r(34465),R=r(65512),L=r(95925),z=r(84364),A=r(14971),F=r(21063),U=r(941),M=r(93782),B=r(14919);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e){var t=e.project,r=(0,b.NL)(),n=(0,a.useRef)();function s(){return i.apply(this,arguments)}function i(){return(i=(0,v.Z)(g().mark((function e(){var s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,B.GC)("".concat(h.T5,"/projects/").concat(t.ref,"/status"),{timeout:2e3});case 4:if(!(s=e.sent)||s.error){e.next=11;break}if(s.status!==h.S.ACTIVE_HEALTHY){e.next=11;break}return clearInterval(n.current),e.next=11,(0,M.fr)(r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.useEffect)((function(){return n.current=window.setInterval(s,4e3),function(){clearInterval(n.current)}}),[]),(0,d.jsxs)("div",{className:"mx-auto my-16 w-full max-w-6xl items-center justify-center",children:[(0,d.jsxs)("div",{className:"mx-6 flex flex-col space-y-16",children:[(0,d.jsxs)("div",{className:" flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("h1",{className:"text-3xl text-scale-1200",children:null===t||void 0===t?void 0:t.name}),(0,d.jsx)(z.Z,{color:"brand",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(A.Z,{className:"animate-spin",size:12}),(0,d.jsx)("span",{children:t.status===h.S.RESTORING?"Restoring project":"Setting up project"})]})})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"text-sm text-scale-1100",children:[" ","We are provisioning your database and API endpoints"]}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:" This may take a few minutes"})]})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:" grid grid-cols-12 gap-12",children:[(0,d.jsxs)("div",{className:"col-span-12 space-y-12 lg:col-span-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-base text-scale-1200",children:"While you wait"}),(0,d.jsx)(V,{description:(0,d.jsxs)("p",{className:"text-sm text-scale-1100",children:["Browse the Supabase"," ",(0,d.jsx)(c(),{href:"https://supabase.com/docs",children:(0,d.jsx)("a",{className:"mb-0 text-brand-900 transition-colors hover:text-brand-1200",target:"_blank",rel:"noreferrer",children:"documentation"})}),"."]})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-base text-scale-1200",children:"Not working?"}),(0,d.jsx)(V,{description:(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:"Try refreshing after a couple of minutes."})}),(0,d.jsx)("ul",{children:(0,d.jsx)(V,{description:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"mb-4 text-sm text-scale-1100",children:"If your dashboard hasn't connected within 2 minutes, you can open a support ticket."}),(0,d.jsx)(c(),{href:"/support/new",children:(0,d.jsx)("a",{children:(0,d.jsx)(l.z,{type:"default",children:"Contact support team"})})})]})})})]})]}),(0,d.jsxs)("div",{className:"col-span-12  lg:col-span-8",children:[(0,d.jsx)(U.D,{}),(0,d.jsx)(U.m,{})]})]})})]}),t.status===h.S.COMING_UP&&(0,d.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:[(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsx)("div",{className:"mx-6",children:(0,d.jsx)("h5",{children:"Client libraries"})}),(0,d.jsx)("div",{className:"mx-6 mb-12 grid gap-12 md:grid-cols-3",children:L.l.map((function(e){return(0,d.jsx)(T.Z,G({},e),e.language)}))})]}),(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsx)("div",{className:"mx-6",children:(0,d.jsx)("h5",{children:"Example projects"})}),(0,d.jsx)("div",{className:"mx-6 grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:L.B.map((function(e){return(0,d.jsx)(R.Z,G({},e),e.url)}))})]})]})]})},V=function(e){var t=e.description;return(0,d.jsxs)("li",{className:"my-3 flex flex-wrap space-x-3",children:[(0,d.jsx)("div",{className:"mt-0.5",children:(0,d.jsx)(F.Z,{className:"text-scale-900",size:"tiny"})}),(0,d.jsx)("div",{className:"flex-1",children:t})]})},H=r(62786),Y=r(66674),Q=r(12163);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var $=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Y.Z},e))},J=r(94269),X=r(71714),ee=r(36625),te=r.n(ee),re=2e3;function ne(){return(ne=(0,v.Z)(g().mark((function e(t,r){var n,s,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",!1);case 2:if(s=(n=null!==r&&void 0!==r?r:{}).kpsVersion,a=n.timeout,!te().gte(te().coerce(null!==s&&void 0!==s?s:"kps-v0.0.1"),te().coerce("kps-v3.8.6"))){e.next=8;break}return e.abrupt("return",oe(t,a));case 8:return e.abrupt("return",ae(t,a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(e,t){return ne.apply(this,arguments)};function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,v.Z)(g().mark((function e(t,r){var n,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.pu)("".concat(h.T5,"/projects/").concat(t,"/api/rest"),[],{timeout:null!==r&&void 0!==r?r:re});case 2:return n=e.sent,s=n.error,e.abrupt("return",void 0===s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,v.Z)(g().mark((function e(t,r){var n,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.GC)("".concat(h.T5,"/projects/").concat(t,"/live"),{timeout:null!==r&&void 0!==r?r:re});case 2:return n=e.sent,s=n.error,e.abrupt("return",void 0===s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){var t=e.project,r=(0,b.NL)(),n=(0,a.useRef)(),s=(0,a.useState)(!1),i=s[0],o=s[1],u=(0,a.useState)(!1),p=u[0],m=u[1];(0,a.useEffect)((function(){var e=setTimeout((function(){return o(!0)}),3e4);return function(){return clearTimeout(e)}}),[]),(0,a.useEffect)((function(){if(t.restUrl)return n.current=window.setInterval(f,4e3),function(){clearInterval(n.current)}}),[t]);var f=function(){var e=(0,v.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t.ref,{kpsVersion:t.kpsVersion});case 2:e.sent&&(clearInterval(n.current),(0,M.Ob)(r,t.ref,"ONLINE"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,d.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,d.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,d.jsx)("h1",{className:"text-3xl",children:t.name}),(0,d.jsx)("div",{children:(0,d.jsx)(z.Z,{color:"brand",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(A.Z,{className:"animate-spin",size:12}),(0,d.jsx)("span",{children:"Connecting to project"})]})})})]}),(0,d.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:(0,d.jsxs)("div",{className:"w-[420px] space-y-4",children:[(0,d.jsxs)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center space-x-4 lg:space-x-8",children:[(0,d.jsx)(H.Z,{className:"text-scale-1100",size:50,strokeWidth:1.5}),(0,d.jsx)(X.Z,{active:!0}),(0,d.jsx)($,{className:"text-scale-1100",size:50,strokeWidth:1.5})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("p",{className:"text-center",children:["Connecting to ",t.name]}),(0,d.jsx)("p",{className:"cursor-pointer text-center text-sm text-scale-1100 opacity-60 transition hover:opacity-100",onClick:function(){return m(!0)},children:"This may take a few minutes"})]}),(0,d.jsx)("div",{className:"flex flex-col items-center",children:i&&(0,d.jsx)(l.z,{type:"default",onClick:function(){return m(!0)},children:"Still connecting?"})})]})})]})}),(0,d.jsx)(J.C,{visible:p,onCancel:function(){return m(!1)},header:(0,d.jsx)("div",{className:"flex items-baseline gap-2",children:(0,d.jsx)("h5",{className:"text-sm text-scale-1200",children:"Checking the health of your database"})}),size:"medium",hideFooter:!0,closable:!0,children:(0,d.jsx)("div",{className:"py-4",children:(0,d.jsx)(J.C.Content,{children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("p",{className:"text-sm text-scale-1200",children:["Your project might be facing resource constraints and hence is having trouble connecting. You can verify this by checking your"," ",(0,d.jsx)("span",{className:"text-brand-1000",children:(0,d.jsx)(c(),{href:"/project/".concat(t.ref,"/settings/database"),children:(0,d.jsx)("a",{children:"database's health"})})})," ","or your remaining daily disk IO budget via a"," ",(0,d.jsx)("span",{className:"text-brand-1000",children:(0,d.jsx)(c(),{href:"/project/".concat(t.ref,"/reports"),children:(0,d.jsx)("a",{children:"customizable project report"})})}),"."]}),(0,d.jsxs)("p",{className:"text-sm text-scale-1200",children:["If your project is facing resource constraints, you can"," ",(0,d.jsx)("span",{className:"text-brand-1000",children:(0,d.jsx)(c(),{href:"/project/".concat(t.ref,"/reports"),children:(0,d.jsx)("a",{children:"upgrade"})})})," ","your project's subscription to a Pro for access to larger compute sizes."]}),(0,d.jsxs)("p",{className:"text-sm text-scale-1200",children:["However, if your project still fails to connect thereafter, you can open a support ticket"," ",(0,d.jsx)("span",{className:"text-brand-1000",children:(0,d.jsx)(c(),{href:"/support/new?ref=".concat(t.ref),children:"here"})}),"."]})]})})})})]})},de=r(98784),ue=r(51991);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=r(33027),he=(0,n.Pi)((function(e){var t=e.defaultValue;return(0,d.jsx)(d.Fragment,{children:null!==t&&void 0!==t&&t.length?t.map((function(e){return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)("span",{className:"text-scale-800 dark:text-scale-700",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,d.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,d.jsx)("a",{onClick:e.onClick||function(){},className:"text-gray-1100 block px-2 py-1 text-xs leading-5 focus:bg-gray-100 focus:text-gray-900 focus:outline-none ".concat(e.onClick?"cursor-pointer hover:text-white":""),children:e.label})]},e.key)})):null})})),xe=r(61413),ve=r(55991);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ge=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:ve.Z},e))},be=r(11246),ye=r(83763),we=r(3648),Ne=r(70946),ke=r(2674),Oe=r(46578),Pe=r(74271);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ce=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Pe.Z},e))},Ze=r(52979),Ee=r(48507),_e=r(33954),Ie=function(e){for(var t="image/png",r=atob(e.substr("data:".concat(t,";base64,").length)),n=[],s=0;s<r.length;s+=1024){for(var a=r.slice(s,s+1024),i=new Array(a.length),o=0;o<a.length;o++)i[o]=a.charCodeAt(o);var c=new Uint8Array(i);n.push(c)}return new Blob(n,{type:t})},De=function(){var e=(0,v.Z)(g().mark((function e(t,r){var n,s,a,i,o,c,l,d,u;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Ee.eI)("https://mfrkmguhoejspftfvgdz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNzg4NjQ0MCwiZXhwIjoxOTQzNDYyNDQwfQ.wRGmWXOORz-cxVBof4WLOSxRog9Tdff1P8gI72U8ta8",{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:function(e){},setItem:function(e,t){},removeItem:function(e){}}}}),s=Ie(r),a="".concat(t||"no-project","/").concat((0,_e.k$)(),".png"),i={cacheControl:"3600"},e.next=6,n.storage.from("feedback-attachments").upload(a,s,i);case 6:if(o=e.sent,c=o.data,!(l=o.error)){e.next=12;break}return console.error("Failed to upload:",l),e.abrupt("return",void 0);case 12:if(!c){e.next=18;break}return e.next=15,n.storage.from("feedback-attachments").createSignedUrls([c.path],31536e4);case 15:return d=e.sent,u=d.data,e.abrupt("return",null===u||void 0===u?void 0:u[0].signedUrl);case 18:return e.abrupt("return",void 0);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Te=function(e){var t=e.onClose,r=e.feedback,n=e.setFeedback,i=e.screenshot,o=e.setScreenshot,u=(0,s.useRouter)(),p=u.query.ref,f=(0,m.oR)().ui,x=(0,a.useRef)(null),j=(0,a.useRef)(),b=(0,a.useState)(!1),y=b[0],w=b[1],N=(0,a.useState)(!1),k=N[0],O=N[1];(0,a.useEffect)((function(){var e;null===x||void 0===x||null===(e=x.current)||void 0===e||e.focus()}),[x]);var P=function(){var e=(0,v.Z)(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t;return!((null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:[]).length>0)||"feedback-widget"!==e.children[0].id},O(!0),e.next=4,(0,_e.Vs)(100);case 4:(0,ye.YM)(document.body,{filter:t}).then((function(e){return o(e)})).catch((function(e){f.setNotification({error:e,category:"error",message:"Failed to capture screenshot",duration:4e3})})).finally((function(){O(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,v.Z)(g().mark((function e(t){var r,n,s,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.persist(),r=t.target.files||t.dataTransfer.items,n=(0,be.Z)(r,1),s=n[0],(a=new FileReader).onload=function(e){var t;o(null===(t=e.target)||void 0===t?void 0:t.result)},a.readAsDataURL(s),t.target.value="";case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,v.Z)(g().mark((function e(){var s,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length||void 0===i){e.next=4;break}return e.abrupt("return",f.setNotification({category:"error",message:"Please include a message in your feedback.",duration:4e3}));case 4:if(!(r.length>0)){e.next=20;break}if(w(!0),!i){e.next=12;break}return e.next=9,De(p,i);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=void 0;case 13:return s=e.t0,a=void 0!==s?"".concat(r,"\n\nAttachments:\n").concat(s):r,e.next=17,(0,B.v_)("".concat(h.T5,"/feedback/send"),{message:a,pathname:u.asPath,category:"Feedback",projectRef:p,tags:["dashboard-feedback"]});case 17:w(!1),n(""),f.setNotification({category:"success",message:"Feedback sent. Thank you!"});case 20:return e.abrupt("return",t());case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{id:"feedback-widget",className:"text-area-text-sm",children:[(0,d.jsx)(we.Z.TextArea,{className:"w-80 p-3",size:"small",placeholder:"Ideas on how to improve this page.\nUse the Support Form for technical issues.",rows:5,value:r,onChange:function(e){n(e.target.value)}}),(0,d.jsx)(xe.Z.Separator,{}),(0,d.jsxs)("div",{className:"w-80 space-y-3 px-3 py-2 pb-4",children:[(0,d.jsxs)("div",{className:"flex justify-between space-x-2",children:[(0,d.jsx)(l.z,{type:"default",onClick:t,className:"hover:border-gray-500",children:"Cancel"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[void 0!==i?(0,d.jsx)("div",{style:{backgroundImage:'url("'.concat(i,'")')},onClick:function(){var e=Ie(i),t=URL.createObjectURL(e);window.open(t,"_blank")},className:"cursor-pointer rounded h-[26px] w-[30px] border border-scale-600 relative bg-cover bg-center bg-no-repeat",children:(0,d.jsx)("div",{className:["cursor-pointer rounded-full bg-red-900 h-3 w-3","flex items-center justify-center absolute -top-1 -right-1"].join(" "),onClick:function(e){e.stopPropagation(),o(void 0)},children:(0,d.jsx)(Ne.Z,{size:8,strokeWidth:3})})}):(0,d.jsx)(ke.ZP,{className:"feedback-dropdown",size:"small",overlay:[(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(Oe.Z,{size:14}),onClick:function(){j.current&&j.current.click()},children:"Upload screenshot"},"upload-screenshot"),(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(Ce,{size:14}),onClick:function(){return P()},children:"Capture screenshot"},"capture-screenshot")],children:(0,d.jsx)(l.z,{asChild:!0,type:"default",disabled:k,loading:k,className:"px-2 py-1.5",icon:(0,d.jsx)(Ze.Z,{size:14}),children:(0,d.jsx)("span",{})})}),(0,d.jsx)("input",{type:"file",ref:j,className:"hidden",accept:"image/png",onChange:S}),(0,d.jsx)(l.z,{disabled:y,loading:y,onClick:C,children:"Send feedback"})]})]}),(0,d.jsxs)("p",{className:"text-xs text-scale-1000",children:["Have a technical issue? Contact"," ",(0,d.jsx)(c(),{href:"/support/new",children:(0,d.jsx)("a",{children:(0,d.jsx)("span",{className:"cursor-pointer text-brand-900 transition-colors hover:text-brand-1200",children:"Supabase support"})})})," ","or"," ",(0,d.jsx)("a",{href:"https://supabase.com/docs",target:"_blank",rel:"noreferrer",children:(0,d.jsx)("span",{className:"cursor-pointer text-brand-900 transition-colors hover:text-brand-1200",children:"browse our docs"})}),"."]})]})]})},Re=function(){var e=(0,a.useState)(!1),t=e[0],r=e[1],n=(0,a.useState)(""),s=n[0],i=n[1],o=(0,a.useState)(),c=o[0],u=o[1];return(0,d.jsx)(xe.Z,{open:t,onOpenChange:function(e){r(e),e||u(void 0)},size:"content",side:"bottom",align:"end",overlay:(0,d.jsx)(Te,{onClose:function(){i(""),u(void 0),r(!1)},feedback:s,setFeedback:i,screenshot:c,setScreenshot:u}),children:(0,d.jsx)(l.z,{asChild:!0,onClick:function(){r((function(e){return!e}))},type:"default",icon:(0,d.jsx)(ge,{size:16,strokeWidth:1.5,className:"text-scale-900"}),children:(0,d.jsx)("span",{className:"hidden md:flex",children:"Feedback"})})})},Le=r(99950),ze=r(49239),Ae=r(40622),Fe=r(29432),Ue=r(38480),Me=function(){var e=(0,s.useRouter)(),t=e.query.ref,r="/support/new".concat(t?"?ref=".concat(t):"");return(0,d.jsx)(xe.Z,{size:"content",align:"end",side:"bottom",sideOffset:8,overlay:(0,d.jsxs)("div",{className:"my-4 w-[400px] space-y-4",children:[(0,d.jsxs)("div",{className:"my-5 space-y-4 px-5",children:[(0,d.jsx)("h5",{className:"text-scale-1200",children:"Need help with your project?"}),(0,d.jsx)("p",{className:"text-sm text-scale-900",children:"For issues with your project hosted on supabase.com, or other inquiries about our hosted services."}),(0,d.jsxs)("div",{className:"space-x-1",children:[(0,d.jsx)(c(),{passHref:!0,href:r,children:(0,d.jsx)("a",{children:(0,d.jsx)(l.z,{type:"default",icon:(0,d.jsx)(Le.Z,{}),children:"Contact Support"})})}),(0,d.jsx)(c(),{passHref:!0,href:"https://supabase.com/docs/",children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,d.jsx)(l.z,{type:"text",size:"tiny",icon:(0,d.jsx)(ze.Z,{}),children:"Docs"})})}),(0,d.jsx)(c(),{passHref:!0,href:"https://status.supabase.com/",children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,d.jsx)(l.z,{type:"text",size:"tiny",icon:(0,d.jsx)(Ae.Z,{}),children:"Supabase Status"})})})]}),(0,d.jsx)("p",{className:"text-sm text-scale-900",children:"Expected response time is based on your billing plan. Pro and Pay as You Go plans are prioritized."})]}),(0,d.jsx)(xe.Z.Separator,{}),(0,d.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,d.jsxs)("div",{className:"mb-4 px-5",children:[(0,d.jsx)("h5",{className:"mb-2",children:"Reach out to the community"}),(0,d.jsx)("p",{className:"text-sm text-scale-900",children:"For other support, including questions on our client libraries, advice, or best practices."})]}),(0,d.jsx)("div",{className:"px-5",children:(0,d.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",style:{background:"#404EED"},children:(0,d.jsxs)("a",{href:"https://discord.supabase.com",target:"_blank",rel:"noreferrer",className:"dark block cursor-pointer",children:[(0,d.jsx)(P(),{className:"absolute left-0 top-0 opacity-50",src:"".concat(e.basePath,"/img/support/discord-bg-small.jpg"),layout:"fill",objectFit:"cover",alt:"discord illustration header"}),(0,d.jsx)(l.z,{type:"secondary",icon:(0,d.jsx)(Ue.Z,{src:"".concat(e.basePath,"/img/discord-icon.svg"),className:"h-4 w-4"}),children:(0,d.jsx)("span",{style:{color:"#404EED"},children:"Join Discord server"})})]})})}),(0,d.jsx)("div",{className:"px-5",children:(0,d.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",children:(0,d.jsxs)("a",{href:"https://github.com/supabase/supabase/discussions",target:"_blank",rel:"noreferrer",className:"block cursor-pointer",children:[(0,d.jsx)(P(),{className:"absolute left-0 top-0 opacity-50",src:"".concat(e.basePath,"/img/support/github-bg.jpg?v-1"),layout:"fill",objectFit:"cover",alt:"discord illustration header"}),(0,d.jsx)(l.z,{type:"secondary",icon:(0,d.jsx)(ge,{}),children:"GitHub Discussions"})]})})})]})]}),children:(0,d.jsx)(l.z,{asChild:!0,type:"default",icon:(0,d.jsx)(Fe.Z,{size:16,strokeWidth:1.5,className:"text-scale-900"}),children:(0,d.jsx)("span",{children:"Help"})})})},Be=r(64116),We=r(25478),Ge=r(27693),qe=r.n(Ge),Ve=r(96364),He=r(36492),Ye=function(){return["notifications"]};function Qe(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,v.Z)(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.U2)("".concat(h.T5,"/notifications"),{signal:t});case 2:if(!(r=e.sent).error){e.next=5;break}throw r.error;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=r(94148),Je=r(16921);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var et=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Je.Z},e))},tt=r(11597),rt=r(65961),nt=function(e){var t=e.project,r=e.changelogLink,n=e.ownerReassignStatus,i=e.availableActions,o=e.onSelectRestartProject,u=e.onSelectApplyMigration,p=e.onSelectRollbackMigration,m=e.onSelectFinalizeMigration,f=(0,s.useRouter)(),h=function(){return f.push("/project/".concat(t.ref,"/settings/billing/subscription?panel=subscriptionPlan"))},x=function(e){switch(e.action_type){case We.Us.UpgradeProjectToPro:return(0,d.jsx)(l.z,{type:"default",onClick:h,children:"Upgrade project"});case We.Us.SchedulePostgresRestart:return(0,d.jsx)(l.z,{type:"default",onClick:o,children:"Restart project"});case We.Us.MigratePostgresSchema:return e.reason===We.Fi.Finalize?"migrated"!==(null===n||void 0===n?void 0:n.desired)&&(0,d.jsx)(l.z,{type:"default",onClick:m,children:"Finalize"}):e.reason===We.Fi.Rollback?"temp_role"===(null===n||void 0===n?void 0:n.desired)&&(0,d.jsx)(l.z,{type:"default",onClick:p,children:"Rollback"}):"unmigrated"===(null===n||void 0===n?void 0:n.desired)&&(0,d.jsx)(l.z,{type:"default",onClick:u,children:"Apply now"})}};return(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[i.map((function(e){return(0,d.jsx)(a.Fragment,{children:x(e)},"".concat(e.action_type,"_").concat(e.reason))})),r&&(0,d.jsx)(c(),{href:r,passHref:!0,children:(0,d.jsx)(l.z,{asChild:!0,type:"default",icon:(0,d.jsx)(rt.Z,{size:12,strokeWidth:2}),children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:"More info"})})})]})},st=function(e,t,r){var n=e.name;if(t.data.name===We.O0.ProjectExceedingTierLimit){var s=t.data.violations.map((function(e){return e.dimension})).reduce((function(e,t){return"".concat(e,", ").concat(t)}));return(0,d.jsxs)("p",{className:"text-sm",children:['Your project "',n,'" has exceeded its limits in the following areas:'," ",s,"."]})}if(t.data.name===We.O0.PostgresqlUpgradeAvailable){var a=t.data,i=a.upgrade_type,o=a.additional;if("postgresql-server"===i){var u=o.version_to;return(0,d.jsxs)("p",{className:"text-sm",children:["New version of Postgres (",u,') is now available for project "',n,'".']})}if("extensions"===i){var p=o,m=p.name,f=p.version_to;return(0,d.jsxs)("p",{className:"text-sm",children:['New version of "',m,'" (',f,') is now available for project "',n,'".']})}if("schema-migration"===i){var h=o,x=h.name,v=h.version_to;return(0,d.jsxs)("div",{className:"text-sm space-y-1",children:[(0,d.jsxs)("p",{children:['A new schema migration is available for your project "',n,'".']}),(0,d.jsx)("ol",{className:"list-disc pl-6",children:(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{children:x}),(0,d.jsx)(F.Z,{size:12,strokeWidth:2}),(0,d.jsx)("p",{children:v})]})})})]})}return""}if(t.data.name!==We.O0.PostgresqlUpgradeCompleted){if(t.data.name===We.O0.ProjectUpdateCompleted){var j=t.data.upgrades;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"text-sm",children:['The following services have been successfully updated for project "',n,'":']}),(0,d.jsx)("ol",{className:"list-disc pl-6",children:j.map((function(e){return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{className:"text-sm",children:e.name}),(0,d.jsx)(F.Z,{size:12,strokeWidth:2}),(0,d.jsx)("p",{className:"text-sm",children:e.version_to}),e.changelog_link&&(0,d.jsx)("div",{className:"!ml-4",children:(0,d.jsx)(c(),{href:e.changelog_link,children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,d.jsx)(rt.Z,{className:"cursor-pointer text-scale-1000 hover:text-scale-1200 transition",size:12,strokeWidth:2})})})})]})},e.name)}))})]})}if(t.data.name===We.O0.ProjectInformational){var g,b=null!==(g=t.data.linked_buttons)&&void 0!==g?g:[];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"text-sm",children:t.data.message})," ",b.map((function(e,t){return(0,d.jsx)("a",{href:e.url,target:"_blank",children:(0,d.jsx)(l.z,{asChild:!0,type:"default",className:"mr-2 mt-2 mb-2",icon:(0,d.jsx)(rt.Z,{size:12,strokeWidth:2}),children:(0,d.jsx)("span",{children:e.text})})},t)}))]})}return(0,d.jsxs)("p",{className:"text-sm",children:["Unknown notification type: ",t.notification_name," - Please reach out to support for more information."]})}var y=t.data,w=y.upgrade_type,N=y.additional;if("postgresql-server"===w){var k=N.version_to;return(0,d.jsxs)("p",{className:"text-sm",children:["Postgres (",k,") has been successfully updated to ",k,' for project "',n,'".']})}if("extensions"===w){var O=N,P=O.name,S=O.version_to;return(0,d.jsxs)("p",{className:"text-sm",children:['The extension "',P,'" has been successfully updated to ',S,' for project "',n,'".']})}if("schema-migration"===w){var C=N.version_to;return"unmigrated"===(null===r||void 0===r?void 0:r.desired)?(0,d.jsxs)("p",{className:"text-sm",children:['The schema migration "',C,'" will be applied for project "',n,"\" within a few days. You may opt to apply the changes now, or it'll be done so automatically."]}):"temp_role"===(null===r||void 0===r?void 0:r.desired)?(0,d.jsxs)("p",{className:"text-sm",children:['The schema migration "',C,'" will be finalized for project "',n,"\" within a few days. You may opt to finalize the changes now, or it'll be done so automatically."]}):(0,d.jsxs)("p",{className:"text-sm",children:['The schema migration "',C,'" has been successfully applied for project "',n,'".']})}},at=function(e,t){var r=(0,be.Z)(e,1)[0];if(!r)return(0,d.jsx)("p",{className:"text-sm"});switch(r.action_type){case We.Us.SchedulePostgresRestart:return(0,d.jsx)("p",{className:"text-sm",children:"Restart your project to get the latest updates."});case We.Us.UpgradeProjectToPro:return(0,d.jsx)("p",{className:"text-sm",children:"Upgrade your project to ensure continued availability."});case We.Us.PgBouncerRestart:return(0,d.jsx)("p",{className:"text-sm",children:"Restart your connection pooler to get the latest updates."});case We.Us.MigratePostgresSchema:var n;return r.deadline?"migrated"===(null===t||void 0===t?void 0:t.desired)?(0,d.jsxs)("p",{className:"text-sm space-x-1",children:["This patch was applied on"," ",qe()(new Date(null!==(n=t.migrated_at)&&void 0!==n?n:r.deadline)).format("DD MMM YYYY, HH:mma")]}):"temp_role"===(null===t||void 0===t?void 0:t.desired)?r.reason===We.Fi.Finalize?(0,d.jsxs)("p",{className:"text-sm space-x-1",children:["This patch will be automatically applied after"," ",qe()(new Date(r.deadline)).format("DD MMM YYYY, HH:mma")]}):(0,d.jsxs)("p",{className:"text-sm space-x-1",children:["This patch was applied on"," ",qe()(new Date(t.modified_at)).format("DD MMM YYYY, HH:mma")]}):(0,d.jsxs)("p",{className:"text-sm space-x-1",children:["This patch will be automatically applied after"," ",qe()(new Date(r.deadline)).format("DD MMM YYYY, HH:mma")]}):"";default:return""}},it=function(e){var t,r,n=e.notification,s=e.onSelectRestartProject,i=e.onSelectApplyMigration,o=e.onSelectRollbackMigration,c=e.onSelectFinalizeMigration,u=(0,m.oR)().ui,p=(0,b.NL)(),f=(0,a.useState)(!1),x=f[0],j=f[1],y=(0,M.Sy)().data,w=null===y||void 0===y?void 0:y.find((function(e){return e.id===n.project_id})),N=qe()(n.inserted_at).format("DD MMM YYYY, HH:mma"),k=n.data.changelog_link,O=null!==(t=null===(r=n.meta)||void 0===r?void 0:r.actions_available)&&void 0!==t?t:[],P=(0,He.a)(["projects",null===w||void 0===w?void 0:w.ref,"owner-reassign"],(function(e){var t=e.signal;return(0,B.U2)("".concat(h.T5,"/database/").concat(null===w||void 0===w?void 0:w.ref,"/owner-reassign"),{signal:t})}),{enabled:"schema-migration"===n.data.upgrade_type&&void 0!==w}).data,S=function(){var e=(0,v.Z)(g().mark((function e(t){var r,n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return j(!0),e.next=5,(0,B.$v)("".concat(h.T5,"/notifications"),{ids:[t]});case 5:if(r=e.sent,!(n=r.error)){e.next=11;break}u.setNotification({category:"error",message:"Failed to dismiss notification",error:n,duration:4e3}),e.next=13;break;case 11:return e.next=13,p.invalidateQueries(Ye());case 13:j(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w?(0,d.jsxs)("div",{className:"flex py-2",children:[(0,d.jsx)("div",{className:"flex min-w-[50px] justify-center",children:n.notification_status!==We.Ez.Seen&&(0,d.jsx)("div",{className:"mt-1.5 h-2 w-2 rounded-full bg-green-900"})}),(0,d.jsxs)("div",{className:"flex-grow mr-8 flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"w-full flex justify-between",children:[(0,d.jsxs)("div",{className:"w-9/10 space-y-2",children:[st(w,n,P),at(O,P),(0,d.jsx)("p",{className:"text-scale-1100 text-sm !mt-2",children:N})]}),(0,d.jsx)("div",{className:"w-1/10 flex justify-end",children:(0,d.jsx)("div",{children:(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{asChild:!0,children:(0,d.jsx)(l.z,{className:"!px-1 group",type:"text",loading:x,icon:(0,d.jsx)(Ne.Z,{size:14,strokeWidth:2,className:"text-scale-1100 group-hover:text-scale-1200 transition"}),onClick:function(){return S(n.id)}})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:"Dismiss"})})]})})]})})})]}),(O.length>0||void 0!==k)&&(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)(nt,{project:w,changelogLink:k,ownerReassignStatus:P,availableActions:O,onSelectRestartProject:function(){return s(w,n)},onSelectApplyMigration:function(){return i(w,n)},onSelectRollbackMigration:function(){return o(w,n)},onSelectFinalizeMigration:function(){return c(w,n)}})})]})]}):null},ot=function(){var e,t,r,n,i,o,c,u,p,f,x,j,y,w,N,k,O,P,S=(0,b.NL)(),C=(0,s.useRouter)(),Z=(0,m.oR)(),E=Z.meta,_=Z.ui,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,He.a)(Ye(),(function(e){return Qe(e.signal)}),e)}(),T=I.data,R=I.refetch,L=(0,a.useState)(),z=L[0],A=L[1],U=(0,a.useState)(),W=U[0],G=U[1],q=(0,a.useState)(),V=q[0],H=q[1],Y=(0,a.useState)(),Q=Y[0],K=Y[1],$=(0,a.useState)(),J=$[0],X=$[1];if(!T)return(0,d.jsx)(d.Fragment,{});var ee=null===T||void 0===T?void 0:T.some((function(e){return e.notification_status===We.Ez.New})),te=function(){var e=(0,v.Z)(g().mark((function e(t){var r,n,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}if(!((r=T.filter((function(e){return e.notification_status===We.Ez.New})).map((function(e){return e.id}))).length>0)){e.next=9;break}return e.next=5,(0,B.r$)("".concat(h.T5,"/notifications"),{ids:r});case 5:n=e.sent,(s=n.error)&&console.error("Failed to update notifications",s),R();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,v.Z)(g().mark((function e(){var t,r,n,s,a,i,o,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&J){e.next=2;break}return e.abrupt("return");case 2:return r=J.id,n=z.ref,s=z.region,t={},(0,D.Z)(t,We.Us.PgBouncerRestart,"pgbouncer"),(0,D.Z)(t,We.Us.SchedulePostgresRestart,"postgresql"),(0,D.Z)(t,We.Us.MigratePostgresSchema,"postgresql"),a=t,i=J.meta.actions_available.map((function(e){return e.action_type})).filter((function(e){return-1!==Object.keys(a).indexOf(e)})).map((function(e){return a[e]})),e.next=8,(0,B.v_)("".concat(h.T5,"/projects/").concat(n,"/restart-services"),{restartRequest:{region:s,source_notification_id:r,services:i}});case 8:o=e.sent,(c=o.error)?_.setNotification({category:"error",message:"Failed to restart project: ".concat(c.message),error:c}):((0,M.Ob)(S,n,"OFFLINE"),_.setNotification({category:"success",message:"Restarting services"}),C.push("/project/".concat(n))),A(void 0),X(void 0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,v.Z)(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,B.v_)("".concat(h.T5,"/database/").concat(W.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=13;break}return e.next=8,(0,$e.T)({ref:W.ref});case 8:(r=e.sent)&&E.setProjectDetails(r),_.setNotification({category:"success",message:'Successfully applied migration for project "'.concat(W.name,'"')}),e.next=14;break;case 13:_.setNotification({error:t.error,category:"error",message:"Failed to apply migration: ".concat(t.error.message)});case 14:G(void 0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,v.Z)(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,B.$v)("".concat(h.T5,"/database/").concat(V.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=13;break}return e.next=8,(0,$e.T)({ref:V.ref});case 8:(r=e.sent)&&E.setProjectDetails(r),_.setNotification({category:"success",message:'Successfully rolled back migration for project "'.concat(V.name,'"')}),e.next=14;break;case 13:_.setNotification({error:t.error,category:"error",message:"Failed to roll back migration: ".concat(t.error.message)});case 14:H(void 0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,v.Z)(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,B.r$)("".concat(h.T5,"/database/").concat(Q.ref,"/owner-reassign"),{});case 4:if((t=e.sent).error){e.next=13;break}return e.next=8,(0,$e.T)({ref:Q.ref});case 8:(r=e.sent)&&E.setProjectDetails(r),_.setNotification({category:"success",message:'Successfully finalized migration for project "'.concat(Q.name,'"')}),e.next=14;break;case 13:_.setNotification({error:t.error,category:"error",message:"Failed to finalize migration: ".concat(t.error.message)});case 14:K(void 0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(xe.Z,{size:"content",align:"end",side:"bottom",sideOffset:8,onOpenChange:te,overlay:(0,d.jsxs)("div",{className:"w-[400px] lg:w-[700px]",children:[(0,d.jsx)("div",{className:"flex items-center justify-between border-b border-gray-500 bg-gray-400 px-4 py-2",children:(0,d.jsx)("p",{className:"text-sm",children:"Notifications"})}),(0,d.jsx)("div",{className:"max-h-[380px] overflow-y-auto py-2",children:0===T.length?(0,d.jsx)("div",{className:"py-2 px-4",children:(0,d.jsx)("p",{className:"text-sm text-scale-1000",children:"No notifications available"})}):(0,d.jsx)(d.Fragment,{children:T.map((function(e,t){return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(it,{notification:e,onSelectRestartProject:function(e,t){A(e),X(t)},onSelectApplyMigration:function(e,t){G(e),X(t)},onSelectRollbackMigration:function(e,t){H(e),X(t)},onSelectFinalizeMigration:function(e,t){K(e),X(t)}}),t!==T.length-1&&(0,d.jsx)(xe.Z.Separator,{})]},e.id)}))})})]}),children:(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{asChild:!0,children:(0,d.jsxs)("div",{className:"relative flex",children:[(0,d.jsx)(l.z,{asChild:!0,id:"notification-button",type:"default",icon:(0,d.jsx)(et,{size:16,strokeWidth:1.5,className:"text-scale-1200"}),children:(0,d.jsx)("span",{})}),ee&&(0,d.jsxs)("div",{className:"absolute -top-1 -right-1 z-50 flex h-3 w-3 items-center justify-center",children:[(0,d.jsx)("div",{className:"h-full w-full animate-ping rounded-full bg-green-800 opacity-60"}),(0,d.jsx)("div",{className:"z-60 absolute top-0 right-0 h-full w-full rounded-full bg-green-900 opacity-80"})]})]})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 flex items-center space-x-1"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:"Notifications"})})]})})]})}),(0,d.jsx)(Ve.Z,{danger:!0,visible:void 0!==z,title:'Restart project "'.concat(null===z||void 0===z?void 0:z.name,'"'),description:"Are you sure you want to restart the project? There will be a few minutes of downtime.",buttonLabel:"Restart",buttonLoadingLabel:"Restarting",onSelectCancel:function(){return A(void 0)},onSelectConfirm:re}),(0,d.jsx)(Ve.Z,{size:"large",visible:void 0!==W,title:'Apply schema migration for "'.concat(null===W||void 0===W?void 0:W.name,'"'),description:(0,d.jsxs)("div",{className:"text-scale-1200 space-y-2",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"The following schema migration will be applied to the project"}),(0,d.jsx)("ol",{className:"list-disc pl-6",children:(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{children:null===J||void 0===J||null===(e=J.data)||void 0===e||null===(t=e.additional)||void 0===t?void 0:t.name}),(0,d.jsx)(F.Z,{size:12,strokeWidth:2}),(0,d.jsx)("p",{children:null===J||void 0===J||null===(r=J.data)||void 0===r||null===(n=r.additional)||void 0===n?void 0:n.version_to})]})})})]}),(0,d.jsxs)("p",{children:["This change can be rolled back anytime up till"," ",qe()(new Date(null!==(i=null===J||void 0===J||null===(o=J.meta.actions_available)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.deadline)&&void 0!==i?i:0)).format("DD MMM YYYY, HH:mma ZZ"),", after which the changes will be finalized and can no longer be undone."]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return G(void 0)},onSelectConfirm:ne}),(0,d.jsx)(Ve.Z,{size:"medium",visible:void 0!==V,title:'Rollback schema migration for "'.concat(null===V||void 0===V?void 0:V.name,'"'),description:(0,d.jsxs)("div",{className:"text-scale-1200 space-y-2",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"The following schema migration will be rolled back for the project"}),(0,d.jsx)("ol",{className:"list-disc pl-6",children:(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{children:null===J||void 0===J||null===(u=J.data)||void 0===u||null===(p=u.additional)||void 0===p?void 0:p.name}),(0,d.jsx)(F.Z,{size:12,strokeWidth:2}),(0,d.jsx)("p",{children:null===J||void 0===J||null===(f=J.data)||void 0===f||null===(x=f.additional)||void 0===x?void 0:x.version_to})]})})})]}),(0,d.jsxs)("p",{children:["This migration however will still be applied and finalized after"," ",qe()(new Date(null!==(j=null===J||void 0===J||null===(y=J.meta.actions_available)||void 0===y||null===(w=y[0])||void 0===w?void 0:w.deadline)&&void 0!==j?j:0)).format("DD MMM YYYY, HH:mma ZZ"),", after which the changes can no longer be undone."]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return H(void 0)},onSelectConfirm:se}),(0,d.jsx)(Ve.Z,{danger:!0,size:"small",visible:void 0!==Q,title:'Finalize schema migration for "'.concat(null===Q||void 0===Q?void 0:Q.name,'"'),description:(0,d.jsxs)("div",{className:"text-scale-1200 space-y-4",children:[(0,d.jsx)(tt.Z,{withIcon:!0,variant:"warning",title:"This action canot be undone"}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"The following schema migration will be finalized for the project"}),(0,d.jsx)("ol",{className:"list-disc pl-6",children:(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{children:null===J||void 0===J||null===(N=J.data)||void 0===N||null===(k=N.additional)||void 0===k?void 0:k.name}),(0,d.jsx)(F.Z,{size:12,strokeWidth:2}),(0,d.jsx)("p",{children:null===J||void 0===J||null===(O=J.data)||void 0===O||null===(P=O.additional)||void 0===P?void 0:P.version_to})]})})})]})]}),buttonLabel:"Confirm",buttonLoadingLabel:"Confirm",onSelectCancel:function(){return K(void 0)},onSelectConfirm:ae})]})},ct=r(79588),lt=r(97485),dt=r(87474),ut=function(){var e=(0,s.useRouter)(),t=(0,m.oR)().ui,r=(0,lt.tl)().data,n=(0,m.lL)(),a=(0,m.P5)("orgcreationv2");return h.Qy?(0,d.jsx)(ke.ZP,{side:"bottom",align:"start",overlay:(0,d.jsxs)(d.Fragment,{children:[null===r||void 0===r?void 0:r.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(r){var n=(0,ct.ZN)(r.slug);return(0,d.jsx)(ke.ZP.Item,{onClick:function(){var r;if(!n)return t.setNotification({category:"error",message:"Could not navigate to organization settings, please try again or contact support"});e.push({pathname:"/org/[slug]/general",query:{slug:n},hash:null===(r=e.asPath.split("#")[1])||void 0===r?void 0:r.toLowerCase()})},children:r.name},n)})),(0,d.jsx)(ke.ZP.Separator,{}),(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(dt.Z,{size:"tiny"}),onClick:function(){return e.push("/new")},children:"New organization"}),a&&(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(dt.Z,{size:"tiny"}),onClick:function(){return e.push("/new-with-subscription")},children:"New organization V2"})]}),children:(0,d.jsx)(l.z,{asChild:!0,type:"text",size:"tiny",children:(0,d.jsx)("span",{children:null===n||void 0===n?void 0:n.name})})}):(0,d.jsx)(l.z,{asChild:!0,type:"text",size:"tiny",children:(0,d.jsx)("span",{children:null===n||void 0===n?void 0:n.name})})},pt=function(){var e=(0,m.lL)(),t=(0,m.Vm)(),r=(0,M.Sy)().data,n=null===e||void 0===e?void 0:e.slug,a=(0,s.useRouter)(),i=function(e,t){if(Object.entries(t).length>1){var r="bucketId"in t;return e.split("/").slice(0,r?5:4).join("/")}return e}(a.route,a.query);return h.Qy?(0,d.jsx)(ke.ZP,{side:"bottom",align:"start",overlay:(0,d.jsxs)(d.Fragment,{children:[null===r||void 0===r?void 0:r.filter((function(e){return e.status!==h.S.INACTIVE})).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){var r;return(0,d.jsx)(c(),{href:null!==(r=null===i||void 0===i?void 0:i.replace("[ref]",e.ref))&&void 0!==r?r:"/project/".concat(e.ref),passHref:!0,children:(0,d.jsx)("a",{className:"block",children:(0,d.jsx)(ke.ZP.Item,{className:(null===t||void 0===t?void 0:t.name)===e.name?"font-bold bg-slate-400 dark:bg-slate-500":"",children:e.name})})},e.ref)})),(0,d.jsx)(xe.Z.Separator,{}),(0,d.jsx)(c(),{href:"/new/".concat(n),children:(0,d.jsx)("a",{className:"block",children:(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(dt.Z,{size:"tiny"}),children:"New project"})})})]}),children:(0,d.jsx)(l.z,{asChild:!0,type:"text",size:"tiny",className:"my-1",children:(0,d.jsx)("span",{children:null===t||void 0===t?void 0:t.name})})}):(0,d.jsx)(l.z,{asChild:!0,type:"text",size:"tiny",children:(0,d.jsx)("span",{children:null===t||void 0===t?void 0:t.name})})},mt=function(e){var t,r=e.customHeaderComponents,n=e.breadcrumbs,s=void 0===n?[]:n,a=e.headerBorder,o=void 0===a||a,l=(0,m.lL)(),u=(0,m.Vm)(),p=(0,i.UO)().ref,f=function(e){var t=e.projectRef,r=e.connectionString,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,ue.cp)({projectRef:t,connectionString:r,sql:"\n    show default_transaction_read_only;\n  ",queryKey:["project-read-only"]},me({select:function(e){var t;return"on"===(null===(t=e.result[0])||void 0===t?void 0:t.default_transaction_read_only)},enabled:"undefined"!==typeof t&&"undefined"!==typeof r},n))}({projectRef:null===u||void 0===u?void 0:u.ref,connectionString:null===u||void 0===u?void 0:u.connectionString}),x=f.data,v=(0,fe.DK)({projectRef:p}).data,j=(t=v)?(0,de.compact)(Object.keys(t).filter((function(e){return null!==t[e]})).map((function(e){var r=t[e];if(r.limit>0&&r.usage/r.limit>1)return e}))):[],g=(null===u||void 0===u?void 0:u.subscription_tier)===h.ev.PAYG||(null===u||void 0===u?void 0:u.subscription_tier)===h.ev.ENTERPRISE||(null===u||void 0===u?void 0:u.subscription_tier)===h.ev.TEAM,b=(0,m.P5)("overusageBadge")&&void 0!==(null===u||void 0===u?void 0:u.subscription_tier)&&!g&&j.length>0;return(0,d.jsxs)("div",{className:"flex h-12 max-h-12 items-center justify-between py-2 px-5 ".concat(o?"border-b border-scale-500":""),children:[(0,d.jsxs)("div",{className:"-ml-2 flex items-center text-sm",children:[p&&l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ut,{}),u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"text-scale-800 dark:text-scale-700",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,d.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,d.jsx)(pt,{}),x&&(0,d.jsx)("div",{className:"ml-2",children:(0,d.jsx)(c(),{href:"/project/".concat(p,"/settings/billing/usage"),children:(0,d.jsx)("a",{children:(0,d.jsx)(z.Z,{color:"red",children:"Project is in read-only mode"})})})}),b&&(0,d.jsx)("div",{className:"ml-2",children:(0,d.jsx)(c(),{href:"/project/".concat(p,"/settings/billing/usage"),children:(0,d.jsx)("a",{children:(0,d.jsx)(z.Z,{color:"red",children:"Exceeding usage limits"})})})})]})]}):(0,d.jsx)(c(),{href:"/projects",children:(0,d.jsx)("a",{className:"cursor-pointer px-2 py-1 text-xs text-scale-1200 focus:bg-transparent focus:outline-none",children:"Supabase"})}),(0,d.jsx)(he,{defaultValue:s})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&r,h.Qy&&(0,d.jsx)(Me,{}),h.Qy&&(0,d.jsx)(Re,{}),h.Qy&&(0,d.jsx)(ot,{})]})]})},ft=mt,ht=r(79305),xt=r(78695),vt=r(72112),jt=r(1296),gt=r(40288),bt=r(33759),yt=r(84411),wt=r(47510),Nt=r(83443),kt=r(2686),Ot=function(e){var t=e.condition,r=e.children,n=e.wrap;return t?(0,a.cloneElement)(n(r)):r},Pt=function(e){var t=e.route,r=e.isActive,n=void 0!==r&&r;return(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{children:(0,d.jsx)(Ot,{condition:void 0!==t.link,wrap:function(e){return(0,d.jsx)(c(),{href:t.link,children:(0,d.jsx)("a",{children:e})})},children:(0,d.jsx)("span",{className:["transition-colors duration-200","flex items-center justify-center h-10 w-10 rounded","bg-scale-200 hover:bg-scale-500","text-scale-900 hover:text-scale-1200 ","".concat(n?"bg-scale-500 shadow-sm text-scale-1200":"")].join(" "),children:t.icon})})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"right",sideOffset:5,children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["bg-scale-100 shadow-lg shadow-scale-700 dark:shadow-scale-300\tpy-1.5 px-3 rounded leading-none","border border-scale-500 "].join(" "),children:(0,d.jsx)("span",{className:"text-scale-1200 text-xs",children:t.label})})]})})]})},St=function(e){(0,ht.Z)(e);var t=(0,s.useRouter)(),r=(0,i.Fg)(),n=r.isDarkMode,a=r.toggleTheme,o=(0,_.UO)().ref,u=(0,wt.d2)().project,p=(0,m.P5)("ongoingIncident"),x=t.pathname.split("/")[3],v=function(e,t){var r=(null===t||void 0===t?void 0:t.status)===h.S.COMING_UP,n="/project/".concat(e,"/building");return[{key:"editor",label:"Table Editor",icon:(0,d.jsx)(Ue.Z,{src:"".concat(h.GW,"/img/table-editor.svg"),style:{width:"".concat(18,"px"),height:"".concat(18,"px")},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),link:e&&(r?n:"/project/".concat(e,"/editor"))},{key:"sql",label:"SQL Editor",icon:(0,d.jsx)(Ue.Z,{src:"".concat(h.GW,"/img/sql-editor.svg"),style:{width:"".concat(18,"px"),height:"".concat(18,"px")},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),link:e&&(r?n:"/project/".concat(e,"/sql"))}]}(o,u),j=function(e,t){var r=(null===t||void 0===t?void 0:t.status)===h.S.COMING_UP,n="/project/".concat(e,"/building");return[{key:"database",label:"Database",icon:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:S.RB.database.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(r?n:"/project/".concat(e,"/database/tables"))},{key:"auth",label:"Authentication",icon:(0,d.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:S.RB.authentication.icon[24],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(r?n:"/project/".concat(e,"/auth/users"))},{key:"storage",label:"Storage",icon:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:S.RB.storage.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(r?n:"/project/".concat(e,"/storage/buckets"))}].concat((0,f.Z)(h.Qy?[{key:"functions",label:"Edge Functions",icon:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:S.RB.functions.icon[18],stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}),link:e&&(r?n:"/project/".concat(e,"/functions"))}]:[]))}(o,u),g=function(e,t){var r=(null===t||void 0===t?void 0:t.status)===h.S.COMING_UP,n="/project/".concat(e,"/building");return[].concat((0,f.Z)(h.Qy?[{key:"reports",label:"Reports",icon:(0,d.jsx)(Nt.Z,{size:18,strokeWidth:2}),link:e&&(r?n:"/project/".concat(e,"/reports"))}]:[]),[{key:"logs",label:"Logs",icon:(0,d.jsx)(kt.Z,{size:18,strokeWidth:2}),link:e&&(r?n:"/project/".concat(e,"/logs/explorer"))},{key:"api",label:"API Docs",icon:(0,d.jsx)(C.Z,{size:18,strokeWidth:2}),link:e&&(r?n:"/project/".concat(e,"/api"))}],(0,f.Z)(h.Qy?[{key:"settings",label:"Project Settings",icon:(0,d.jsx)(bt.Z,{size:18,strokeWidth:2}),link:e&&"/project/".concat(e,"/settings/general")}]:[]))}(o,u),b=(0,m.P5)("dashboardCmdk"),y=(0,_e.fV)(),w=(0,xt.f$)().setIsOpen;return(0,d.jsxs)("div",{style:{height:p?"calc(100vh - 44px)":"100vh"},className:["flex w-14 flex-col justify-between overflow-y-hidden p-2","border-r bg-body border-scale-500"].join(" "),children:[(0,d.jsxs)("ul",{className:"flex flex-col space-y-2",children:[(0,d.jsx)(c(),{href:"/projects",children:(0,d.jsx)("a",{className:"block",children:(0,d.jsx)("img",{src:"".concat(t.basePath,"/img/supabase-logo.svg"),alt:"Supabase",className:"mx-auto h-[40px] w-6 cursor-pointer rounded"})})}),(0,d.jsx)(Pt,{isActive:(0,de.isUndefined)(x)&&!(0,de.isUndefined)(t.query.ref),route:{key:"HOME",label:"Home",icon:(0,d.jsx)(vt.Z,{size:18,strokeWidth:2}),link:"/project/".concat(o)}}),(0,d.jsx)("div",{className:"bg-scale-500 h-px w-full"}),v.map((function(e){return(0,d.jsx)(Pt,{route:e,isActive:x===e.key},e.key)})),(0,d.jsx)("div",{className:"bg-scale-500 h-px w-full"}),j.map((function(e){return(0,d.jsx)(Pt,{route:e,isActive:x===e.key},e.key)})),(0,d.jsx)("div",{className:"h-px w-full bg-scale-500"}),g.map((function(e){return(0,d.jsx)(Pt,{route:e,isActive:x===e.key},e.key)}))]}),(0,d.jsxs)("ul",{className:"flex flex-col space-y-4 items-center",children:[h.Qy&&b&&(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{asChild:!0,children:(0,d.jsx)(l.z,{type:"text",size:"tiny",onClick:function(){return w(!0)},className:"border-none",children:(0,d.jsx)("div",{className:"py-1",children:(0,d.jsx)(jt.Z,{size:18,strokeWidth:2,className:"text-scale-900"})})})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"right",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsxs)("div",{className:["rounded  py-1 px-2 leading-none shadow","border border-scale-200 flex items-center space-x-1"].join(" "),children:["macos"===y?(0,d.jsx)(gt.Z,{size:11.5,strokeWidth:1.5,className:"text-scale-1200"}):(0,d.jsx)("p",{className:"text-xs",children:"CTRL"}),(0,d.jsx)("p",{className:"text-xs",children:"K"})]})]})})]}),(0,d.jsx)(ke.ZP,{side:"right",align:"start",overlay:(0,d.jsxs)(d.Fragment,{children:[h.Qy&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c(),{href:"/account/me",children:(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(bt.Z,{size:14,strokeWidth:1.5}),children:"Account Preferences"},"header")}),(0,d.jsx)(ke.ZP.Separator,{})]}),(0,d.jsx)(ke.ZP.Label,{children:"Theme"}),(0,d.jsxs)(ke.ZP.RadioGroup,{value:n?"dark":"light",onChange:function(e){return a("dark"===e)},children:[(0,d.jsx)(ke.ZP.Radio,{value:"dark",children:"Dark"}),(0,d.jsx)(ke.ZP.Radio,{value:"light",children:"Light"})]},"theme")]}),children:(0,d.jsx)(l.z,{asChild:!0,type:"text",size:"tiny",children:(0,d.jsx)("span",{className:"py-1 h-10 border-none",children:(0,d.jsx)(yt.Z,{size:18,strokeWidth:2,className:"text-scale-900"})})})})]})]})},Ct=r(26160);function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Et=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Ct.Z},e))},_t=function(e){var t=e.project;return(0,d.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,d.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,d.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,d.jsx)("h1",{className:"text-3xl",children:t.name}),(0,d.jsx)("div",{children:(0,d.jsx)(z.Z,{color:"gray",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(A.Z,{className:"animate-spin",size:12}),(0,d.jsx)("span",{children:"Pausing project"})]})})})]}),(0,d.jsx)("div",{className:"mx-auto mt-8 mb-16 w-full max-w-7xl",children:(0,d.jsx)("div",{className:"mx-6 flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:(0,d.jsxs)("div",{className:"grid w-[380px] gap-4",children:[(0,d.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,d.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,d.jsx)(A.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,d.jsx)(Et,{className:"text-scale-900",size:50,strokeWidth:1.5})]}),(0,d.jsxs)("p",{className:"text-center",children:["Pausing ",t.name]}),(0,d.jsx)("p",{className:"mt-4 text-center text-sm text-scale-1100",children:"You may restore your project anytime thereafter, and your data will be restored to when it was initially paused."})]})})})]})})},It=function(e){var t=e.title,r=e.children,n=(0,m.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,d.jsxs)("div",{style:{height:n,maxHeight:n},className:["hide-scrollbar flex w-64 flex-col border-r","bg-scale-200","dark:border-dark "].join(" "),children:[(0,d.jsx)("div",{className:"dark:border-dark flex max-h-12 items-center border-b px-6",style:{minHeight:"3rem"},children:(0,d.jsx)("h4",{className:"text-lg",children:t})}),(0,d.jsx)("div",{className:"flex-grow overflow-y-auto",children:r})]})},Dt=r(87574),Tt=r(44602),Rt=r(33769),Lt=function(e){(0,ht.Z)(e);var t=(0,m.oR)().meta,r=(0,wt.d2)().project,n=(0,a.useRef)(),s=(0,a.useState)(!1),i=s[0],o=s[1],u=(0,a.useState)(!1),p=u[0],f=u[1],x=(0,a.useState)(!1),j=x[0],b=x[1];function y(){return w.apply(this,arguments)}function w(){return(w=(0,v.Z)(g().mark((function e(){var t,s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,B.GC)("".concat(h.T5,"/projects/").concat(r.ref,"/status"),{timeout:2e3});case 4:(t=e.sent)&&!t.error&&((s=t.status)===h.S.RESTORATION_FAILED?(clearInterval(n.current),f(!0)):s===h.S.ACTIVE_HEALTHY&&(clearInterval(n.current),b(!0)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,a.useEffect)((function(){return n.current=window.setInterval(y,4e3),function(){return clearInterval(n.current)}}),[]);var N=function(){var e=(0,v.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",console.error("Project is required"));case 2:return o(!0),e.next=5,(0,$e.T)({ref:null===r||void 0===r?void 0:r.ref});case 5:(n=e.sent)&&t.setProjectDetails(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,d.jsx)("div",{className:"bg-scale-300 border border-scale-400 rounded-md w-3/4 lg:w-1/2",children:j?(0,d.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,d.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsx)(Tt.Z,{className:"text-brand-900",size:18,strokeWidth:2})}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"Restoration complete!"}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:"Your project has been successfully restored and is now back online."})]})]}),(0,d.jsx)("div",{className:"border-t border-scale-400 flex items-center justify-end py-4 px-8",children:(0,d.jsx)(l.z,{disabled:i,loading:i,onClick:N,children:"Return to project"})})]}):p?(0,d.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,d.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsx)(Rt.Z,{size:18,strokeWidth:2})}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"Something went wrong while restoring your project"}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:"Our engineers have already been notified of this, do hang tight while we are investigating into the issue."})]})]}),p&&(0,d.jsx)("div",{className:"border-t border-scale-400 flex items-center justify-end py-4 px-8",children:(0,d.jsx)(c(),{href:"/support/new?category=Database_unresponsive&ref=".concat(null===r||void 0===r?void 0:r.ref,"&subject=Restoration%20failed%20for%20project"),children:(0,d.jsx)("a",{children:(0,d.jsx)(l.z,{type:"default",children:"Contact support"})})})})]}):(0,d.jsx)("div",{className:"space-y-6 py-6",children:(0,d.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsx)(A.Z,{className:"animate-spin",size:18})}),(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("p",{children:"Restoration in progress"}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:"Restoration can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while the restoration is running."})]})]})})})})},zt=r(25024),At=r(93942),Ft=r(78651),Ut=r(66804),Mt=r(86051),Bt=[{key:zt.L9.Started,initial:"Prepare new server",progress:"Preparing new server",completed:"Prepared new server"},{key:zt.L9.LaunchedUpgradedInstance,initial:"Prepare new server for migration",progress:"Preparing new server for migration",completed:"New server ready for migration"},{key:zt.L9.DetachedVolumeFromUpgradedInstance,initial:"Execute pre-upgrade checks",progress:"Executing pre-upgrade checks",completed:"Completed pre-upgrade checks"},{key:zt.L9.AttachedVolumeToOriginalInstance,initial:"Shut down API services",progress:"Shutting down API services",completed:"Completed shutting down API services"},{key:zt.L9.InitiatedDataUpgrade,initial:"Migrate to new database",progress:"Migrating to new database",completed:"Completed migration to new database"},{key:zt.L9.CompletedDataUpgrade,initial:"Execute database migration",progress:"Executing database migration",completed:"Completed database migration"},{key:zt.L9.DetachedVolumeFromOriginalInstance,initial:"Update database extensions",progress:"Updating database extensions",completed:"Updated database extensions"},{key:zt.L9.AttachedVolumeToUpgradedInstance,initial:"Optimize database",progress:"Optimizing database",completed:"Completed optimization of database"}],Wt=function(){var e,t=(0,_.UO)().ref,r=(0,m.oR)().meta,n=(0,wt.d2)().project,s=(0,a.useState)(!1),i=s[0],o=s[1],u=(0,a.useState)(!1),p=u[0],f=u[1],x=(0,Mt.h1)({projectRef:t,projectStatus:null===n||void 0===n?void 0:n.status},{enabled:h.Qy}).data,j=null!==(e=null===x||void 0===x?void 0:x.databaseUpgradeStatus)&&void 0!==e?e:{},b=j.initiated_at,y=j.status,w=j.progress,N=j.target_version,k=j.error,O=Number((w||"").split("_")[0]),P=y===zt.h.Failed,S=y===zt.h.Upgraded,C=qe()(null!==b&&void 0!==b?b:0).format("DD MMM YYYY HH:mm:ss (ZZ)"),Z=qe()(null!==b&&void 0!==b?b:0).utc().format("DD MMM YYYY HH:mm:ss"),E=function(){var e=(0,v.Z)(g().mark((function e(){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,(0,$e.T)({ref:t});case 3:(n=e.sent)&&r.setProjectDetails(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I="Upgrade information:%0A\u2022 Initiated at: ".concat(b,"%0A\u2022 Target Version: ").concat(N,"%0A\u2022 Error: ").concat(k);return(0,d.jsx)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:(0,d.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,d.jsx)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:(0,d.jsx)("h1",{className:"text-3xl",children:null===n||void 0===n?void 0:n.name})}),(0,d.jsx)("div",{className:"w-full mx-auto mt-8 mb-16 max-w-7xl",children:(0,d.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-scale-400 bg-scale-300 p-8",children:S?(0,d.jsxs)("div",{className:"grid gap-4",children:[(0,d.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,d.jsx)(Tt.Z,{className:"text-brand-900",size:40,strokeWidth:1.5})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-center",children:"Upgrade completed!"}),(0,d.jsxs)("p",{className:"mt-4 text-center text-sm text-scale-1100 w-[300px] mx-auto",children:["Your project has been successfully upgraded to Postgres ",N," and is now back online."]})]}),(0,d.jsx)("div",{className:"mx-auto",children:(0,d.jsx)(l.z,{loading:i,disabled:i,onClick:E,children:"Return to project"})})]}):P?(0,d.jsxs)("div",{className:"grid gap-4",children:[(0,d.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,d.jsx)(Rt.Z,{className:"text-amber-900",size:40,strokeWidth:1.5})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-center",children:"We ran into an issue while upgrading your project"}),(0,d.jsx)("p",{className:"mt-4 text-center text-sm text-scale-1100 w-[450px] mx-auto",children:"Your project is back online and its data is not affected. Please reach out to us via our support form for assistance with the upgrade."})]}),(0,d.jsxs)("div",{className:"flex items-center mx-auto space-x-2",children:[(0,d.jsx)(c(),{href:"/support/new?category=Database_unresponsive&ref=".concat(t,"&subject=").concat("Upgrade%20failed%20for%20project","&message=").concat(I),children:(0,d.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,d.jsx)(l.z,{type:"default",children:"Contact support"})})}),(0,d.jsx)(l.z,{loading:i,disabled:i,onClick:E,children:"Return to project"})]})]}):(0,d.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,d.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,d.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full",children:(0,d.jsx)(bt.Z,{className:"animate-spin",size:20,strokeWidth:2})}),(0,d.jsx)(Et,{className:"text-scale-900",size:50,strokeWidth:1.5})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-center",children:"Upgrading in progress"}),(0,d.jsx)("p",{className:"text-sm text-center text-scale-1100",children:"Upgrades can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while it is being upgraded."}),(0,d.jsxs)("div",{className:"!mt-4 !mb-2 py-3 px-4 transition-all overflow-hidden border rounded relative",style:{maxHeight:p?"500px":"110px"},children:[p?(0,d.jsx)(At.Z,{size:"tiny",strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:function(){return f(!1)}}):(0,d.jsx)(Ft.Z,{size:"tiny",strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:function(){return f(!0)}}),(0,d.jsx)("div",{className:"space-y-2 transition-all",style:{translate:p?"0px 0px":"0px ".concat(-28*(O-2<=0?0:O>6?5:O-2),"px")},children:Bt.map((function(e,t){var r=e.key===w,n=O>t;return(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[r?(0,d.jsx)("div",{className:"flex items-center justify-center w-5 h-5 rounded-full",children:(0,d.jsx)(A.Z,{size:20,className:"animate-spin text-scale-1100",strokeWidth:2})}):n?(0,d.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-brand-800 border-brand-700",children:(0,d.jsx)(Ut.Z,{size:12,className:"text-white",strokeWidth:2})}):(0,d.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-scale-600"}),(0,d.jsx)("p",{className:"text-sm ".concat(r?"text-scale-1200":n?"text-scale-1100":"text-scale-1000"," hover:text-scale-1200 transition"),children:r?e.progress:n?e.completed:e.initial})]},e.key)}))})]}),void 0!==b&&(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{className:"w-full",children:(0,d.jsxs)("p",{className:"text-sm text-center text-scale-1000",children:["Started on: ",Z," (UTC)"]})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:C})})]})})]})]})]})})})]})})},Gt=Wt,qt=function(e){var t=e.title,r=e.isLoading,n=void 0!==r&&r,a=e.product,i=void 0===a?"":a,o=e.productMenu,c=e.children,l=e.hideHeader,u=void 0!==l&&l,p=e.hideIconBar,f=void 0!==p&&p,x=e.selectedTable,v=(0,s.useRouter)(),j=(0,_.UO)().ref,g=(0,m.P5)("ongoingIncident"),b=(0,m.lL)(),y=(0,m.Vm)(),w=null===y||void 0===y?void 0:y.name,N=null===b||void 0===b?void 0:b.name,O=(null===y||void 0===y?void 0:y.status)===h.S.INACTIVE,P="/project/[ref]"===v.pathname||v.pathname.includes("/project/[ref]/settings"),S=O&&!P;return(0,d.jsxs)(wt.Ml,{projectRef:j,children:[(0,d.jsxs)(k(),{children:[(0,d.jsx)("title",{children:t?"".concat(t," | Supabase"):x?"".concat(x," | ").concat(w," | ").concat(N," | Supabase"):w?"".concat(w," | ").concat(N," | Supabase"):N?"".concat(N," | Supabase"):"Supabase"}),(0,d.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,d.jsxs)("div",{className:"flex h-full",children:[!f&&(0,d.jsx)(St,{}),!S&&(0,d.jsx)(Yt,{isLoading:n,productMenu:o,children:(0,d.jsx)(It,{title:i,children:o})}),(0,d.jsxs)("main",{className:"flex flex-col flex-1 w-full overflow-x-hidden",style:{height:g?"calc(100vh - 44px)":"100vh"},children:[!u&&(0,d.jsx)(ft,{}),S?(0,d.jsx)("div",{className:"mx-auto my-16 w-full h-full max-w-7xl flex items-center",children:(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)(Dt.Z,{product:i})})}):(0,d.jsx)(Qt,{isLoading:n,children:c})]})]})]})},Vt=(0,m.QO)(qt),Ht=qt,Yt=function(e){var t=e.isLoading,r=e.productMenu,n=e.children,s=(0,m.Vm)();return(0,d.jsx)(d.Fragment,{children:!t&&r&&void 0!==s?n:null})},Qt=function(e){var t=e.isLoading,r=e.children,n=(0,m.Vm)(),i=(0,s.useRouter)(),o="/project/[ref]/settings/general"!==i.pathname,c=!["/project/[ref]/reports","/project/[ref]/settings/general","/project/[ref]/settings/database","/project/[ref]/settings/billing/subscription","/project/[ref]/settings/billing/usage","/project/[ref]/settings/billing/invoices"].includes(i.pathname),l=(null===n||void 0===n?void 0:n.status)===h.S.UPGRADING,u=(null===n||void 0===n?void 0:n.status)===h.S.RESTORING,p=(null===n||void 0===n?void 0:n.status)===h.S.COMING_UP,f=(null===n||void 0===n?void 0:n.status)===h.S.GOING_DOWN||(null===n||void 0===n?void 0:n.status)===h.S.PAUSING,x="OFFLINE"===(null===n||void 0===n?void 0:n.postgrestStatus);return(0,d.jsx)(d.Fragment,{children:t||void 0===n?(0,d.jsx)(I.Z,{}):l?(0,d.jsx)(Gt,{}):f?(0,d.jsx)(_t,{project:n}):c&&x?(0,d.jsx)(le,{project:n}):o&&u?(0,d.jsx)(Lt,{}):o&&p?(0,d.jsx)(q,{project:n}):(0,d.jsx)(a.Fragment,{children:r},n.ref)})},Kt=function(e){var t=e.title,r=e.product,n=void 0===r?"":r,a=e.productMenu,i=e.children,o=e.hideHeader,c=void 0!==o&&o,l=e.hideIconBar,u=void 0!==l&&l,p=(0,m.Vm)(),f=(0,s.useRouter)(),x=(0,_.UO)().ref,v=(0,m.P5)("ongoingIncident"),j=(null===p||void 0===p?void 0:p.status)===h.S.INACTIVE,g="/project/[ref]"===f.pathname||f.pathname.includes("/project/[ref]/settings"),b=j&&!g;return(0,d.jsxs)(wt.Ml,{projectRef:x,children:[(0,d.jsxs)(k(),{children:[(0,d.jsx)("title",{children:t?"".concat(t," | Supabase"):"Supabase"}),(0,d.jsx)("meta",{name:"description",content:"Supabase Studio"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)("div",{className:"flex h-full",children:[!u&&(0,d.jsx)(St,{}),a&&!b&&(0,d.jsx)(It,{title:n,children:a}),(0,d.jsxs)("main",{className:"flex w-full flex-1 flex-col overflow-x-hidden",style:{height:v?"calc(100vh - 44px)":"100vh"},children:[!c&&(0,d.jsx)(ft,{}),b?(0,d.jsx)("div",{className:"mx-auto my-16 w-full h-full max-w-7xl flex items-center",children:(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)(Dt.Z,{product:n})})}):i]})]})]})},$t=r(68043),Jt=r(62771),Xt=r(38230),er=r(76309),tr=r(98248),rr=r(21246),nr=r(86949),sr=r(34860),ar=r(98631),ir=(0,nr.sj)({projectRef:void 0,loadedIds:(0,ar.C6)([]),addLoadedId:function(e,t){e!==ir.projectRef&&(ir.loadedIds.clear(),ir.projectRef=e),ir.loadedIds.add(t)}}),or=function(e){return(0,sr.RK)(ir,e)},cr=r(97033),lr=r(29026);var dr=function(){var e=(0,m.x3)({arrayKeys:["sort","filter"]}),t=(0,be.Z)(e,1)[0],r=t.sort,n=t.filter,s=(0,cr.rg)(r),i=(0,cr.Yb)(n),o=(0,wt.d2)().project,c=(0,lr.Xj)();return(0,a.useCallback)((function(e){return c({queryKey:[e.schema,e.name],projectRef:null===o||void 0===o?void 0:o.ref,connectionString:null===o||void 0===o?void 0:o.connectionString,table:e,sorts:s,filters:i,page:1,limit:100})}),[o,s,i])},ur=r(58728),pr=r(67863),mr=r(37772),fr=r(68464),hr=r(95992),xr=r(58069),vr=r(89301),jr=r(86010),gr=r(3108),br=r(86223),yr=r(44315),wr=r(51664),Nr=function(e){var t,r,n,s=e.id,a=e.projectRef,i=e.item,o=e.isLocked,l=e.onEditTable,u=e.onDeleteTable,p=e.onDuplicateTable,m=e.isLoadingTableMetadata,f=Number(s)===i.id;return(0,d.jsxs)("div",{className:(0,jr.Z)("group flex items-center justify-between rounded-md",f&&"text-scale-1200 bg-scale-300"),children:[(0,d.jsx)(c(),{href:"/project/".concat(a,"/editor/").concat(i.id),children:(0,d.jsxs)("a",{className:"flex items-center py-1 px-3 w-full space-x-3 max-w-[90%]",children:[(0,d.jsxs)(Be.fC,{delayDuration:0,disableHoverableContent:!0,children:[(0,d.jsx)(Be.xz,{className:"flex items-center",children:i.type===er.l.TABLE?(0,d.jsx)(Ue.Z,{className:"table-icon",src:"".concat(h.GW,"/img/icons/table-icon.svg"),style:{width:"16px",height:"16px",strokeWidth:"1px"},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}):i.type===er.l.VIEW?(0,d.jsx)(Ue.Z,{className:"view-icon",src:"".concat(h.GW,"/img/icons/view-icon.svg"),style:{width:"16px",height:"16px",strokeWidth:"1px"},preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}):(0,d.jsx)("div",{className:(0,jr.Z)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",i.type===er.l.FOREIGN_TABLE&&"text-yellow-900 bg-yellow-500",i.type===er.l.MATERIALIZED_VIEW&&"text-purple-1000 bg-purple-500",i.type===er.l.PARTITIONED_TABLE&&"text-scale-1100 bg-scale-800"),children:null===(t=Object.entries(er.l).find((function(e){return(0,be.Z)(e,2)[1]===i.type})))||void 0===t||null===(r=t[0])||void 0===r||null===(n=r[0])||void 0===n?void 0:n.toUpperCase()})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200 capitalize",children:function(e){var t,r,n,s;return null===(t=Object.entries(er.l).find((function(t){return(0,be.Z)(t,2)[1]===e})))||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.toLowerCase())||void 0===n||null===(s=n.split("_"))||void 0===s?void 0:s.join(" ")}(i.type)})})]})})]}),(0,d.jsx)("p",{className:"text-sm text-scale-1100 group-hover:text-scale-1200 transition max-w-[85%] overflow-hidden text-ellipsis whitespace-nowrap",children:i.name.length>20?(0,d.jsxs)(Be.fC,{delayDuration:0,disableHoverableContent:!0,children:[(0,d.jsx)(Be.xz,{className:"max-w-[95%] overflow-hidden text-ellipsis whitespace-nowrap",children:i.name}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:i.name})})]})})]}):i.name})]})}),(0,d.jsx)("div",{className:"pr-3",children:i.type===er.l.TABLE&&f&&!o&&(0,d.jsx)(ke.ZP,{size:"small",side:"bottom",align:"start",overlay:[(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(pr.Z,{size:"tiny"}),onClick:function(e){e.stopPropagation(),l(i)},disabled:m,children:"Edit Table"},"edit-table"),(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(gr.Z,{size:"tiny"}),onClick:function(e){e.stopPropagation(),p(i)},disabled:m,children:"Duplicate Table"},"duplicate-table"),(0,d.jsx)(c(),{href:"/project/".concat(a,"/auth/policies?search=").concat(i.id),children:(0,d.jsx)("a",{children:(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(br.Z,{size:"tiny"}),children:"View Policies"},"delete-table")})},"view-policies"),(0,d.jsx)(ke.ZP.Separator,{},"separator"),(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(yr.Z,{size:"tiny"}),onClick:function(e){e.stopPropagation(),u(i)},disabled:m,children:"Delete Table"},"delete-table")],children:(0,d.jsx)("div",{className:"text-scale-900 transition-colors hover:text-scale-1200",children:(0,d.jsx)(wr.Z,{size:14,strokeWidth:2})})})})]})},kr=(0,n.Pi)((function(e){var t,r,n,s=e.selectedSchema,i=e.onSelectSchema,o=void 0===i?de.noop:i,c=e.onAddTable,u=void 0===c?de.noop:c,p=e.onEditTable,f=void 0===p?de.noop:p,h=e.onDeleteTable,x=void 0===h?de.noop:h,j=e.onDuplicateTable,b=void 0===j?de.noop:j,y=(0,m.oR)().meta,w=(0,_.UO)().id,N=(0,a.useState)(""),k=N[0],O=N[1],P=(0,m._)("table-editor-sort","alphabetical"),S=(0,be.Z)(P,2),C=S[0],Z=S[1],E=(0,wt.d2)().project,I=(0,xr.H)({projectRef:null===E||void 0===E?void 0:E.ref,connectionString:null===E||void 0===E?void 0:E.connectionString,schema:s,search:k||void 0,sort:C},{keepPreviousData:!0}),D=I.data,T=I.isLoading,R=I.refetch,L=I.isRefetching,z=I.hasNextPage,F=I.isFetchingNextPage,U=I.fetchNextPage,M=I.isPreviousData,B=null===D||void 0===D||null===(t=D.pages)||void 0===t?void 0:t[0].data.count,W=(0,a.useMemo)((function(){return null===D||void 0===D?void 0:D.pages.flatMap((function(e){return e.data.entities}))}),[null===D||void 0===D?void 0:D.pages]),G=y.schemas.list(),q=G.find((function(e){return e.name===s})),V=(0,m.Xo)($t.KA.TENANT_SQL_ADMIN_WRITE,"tables"),H=!w||!y.tables.byId(w),Y=function(){var e=(0,v.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=(0,de.partition)(G,(function(e){var t;return y.excludedSchemas.includes(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"")})),K=(0,be.Z)(Q,2),$=K[0],J=K[1],X=$.some((function(e){return e.id===(null===q||void 0===q?void 0:q.id)}));return(0,d.jsxs)("div",{className:"pt-6 flex flex-col flex-grow space-y-6 h-full",style:{maxHeight:"calc(100vh - 48px)"},children:[(0,d.jsx)("div",{className:"px-3 mx-4",children:y.schemas.isInitialized?(0,d.jsxs)(ur.Z,{size:"tiny",value:s,onChange:function(e){O(""),o(e)},children:[(0,d.jsx)(ur.Z.Option,{disabled:!0,value:"normal-schemas",label:"Schemas",className:"!w-[200px]",children:(0,d.jsx)("p",{className:"text-xs text-scale-1100",children:"Schemas"})},"normal-schemas"),J.map((function(e){return(0,d.jsx)(ur.Z.Option,{value:e.name,label:e.name,className:"!w-[200px]",addOnBefore:function(){return(0,d.jsx)("span",{className:"text-scale-900 text-xs",children:"schema"})},children:(0,d.jsx)("span",{className:"text-scale-1200 text-xs",children:e.name})},e.id)})),(0,d.jsx)(ur.Z.Option,{disabled:!0,value:"protected-schemas",label:"Protected schemas",className:"!w-[200px]",children:(0,d.jsx)("p",{className:"text-xs text-scale-1100",children:"Protected schemas"})},"protected-schemas"),$.map((function(e){return(0,d.jsx)(ur.Z.Option,{value:e.name,label:e.name,className:"!w-[200px]",addOnBefore:function(){return(0,d.jsx)("span",{className:"text-scale-900 text-xs",children:"schema"})},children:(0,d.jsx)("span",{className:"text-scale-1200 text-xs",children:e.name})},e.id)}))]}):(0,d.jsxs)("div",{className:"flex h-[26px] items-center space-x-3 rounded border border-gray-500 px-3",children:[(0,d.jsx)(A.Z,{className:"animate-spin",size:12}),(0,d.jsx)("span",{className:"text-xs text-scale-900",children:"Loading schemas..."})]})}),(0,d.jsxs)("div",{className:"space-y-1 mx-4",children:[!X&&(0,d.jsx)("div",{className:"px-3",children:(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{className:"w-full",children:(0,d.jsx)(l.z,{asChild:!0,block:!0,disabled:!V,size:"tiny",icon:(0,d.jsx)("div",{className:"text-scale-900",children:(0,d.jsx)(pr.Z,{size:14,strokeWidth:1.5})}),type:"default",style:{justifyContent:"start"},onClick:u,children:(0,d.jsx)("span",{children:"New table"})})}),!V&&(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create tables"})})]})})]})}),(0,d.jsx)("div",{className:"mb-2 block px-3",children:(0,d.jsx)(we.Z,{className:"table-editor-search border-none",icon:M?(0,d.jsx)(A.Z,{className:"animate-spin text-scale-900",size:12,strokeWidth:1.5}):(0,d.jsx)(jt.Z,{className:"text-scale-900",size:12,strokeWidth:1.5}),placeholder:"Search tables",onChange:function(e){return O(e.target.value.trim())},value:k,size:"tiny",actions:k&&(0,d.jsx)(l.z,{size:"tiny",type:"text",onClick:function(){return O("")},children:(0,d.jsx)(Ne.Z,{size:12,strokeWidth:2})})})})]}),T?(0,d.jsxs)("div",{className:"mx-7 flex items-center space-x-2",children:[(0,d.jsx)(A.Z,{className:"animate-spin",size:14,strokeWidth:1.5}),(0,d.jsx)("p",{className:"text-sm text-scale-1000",children:"Loading entities..."})]}):0===k.length&&0===(null!==(r=null===W||void 0===W?void 0:W.length)&&void 0!==r?r:0)?(0,d.jsxs)("div",{className:"mx-7 space-y-1 rounded-md border border-scale-400 bg-scale-300 py-3 px-4",children:[(0,d.jsx)("p",{className:"text-xs",children:"No entities available"}),(0,d.jsx)("p",{className:"text-xs text-scale-1100",children:"This schema has no entities available yet"})]}):k.length>0&&0===(null!==(n=null===W||void 0===W?void 0:W.length)&&void 0!==n?n:0)?(0,d.jsxs)("div",{className:"mx-7 space-y-1 rounded-md border border-scale-400 bg-scale-300 py-3 px-4",children:[(0,d.jsx)("p",{className:"text-xs",children:"No results found"}),(0,d.jsx)("p",{className:"text-xs text-scale-1100",children:"There are no entities that match your search"})]}):(0,d.jsxs)(mr.ZP,{type:"pills",className:"flex flex-auto px-4 space-y-6 pb-4",ulClassName:"flex flex-auto flex-col",children:[(0,d.jsx)(mr.ZP.Group,{title:(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)("p",{children:"Tables"}),void 0!==B&&(0,d.jsxs)("p",{style:{fontVariantNumeric:"tabular-nums"},children:["(",B,")"]})]}),(0,d.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,d.jsx)(ke.ZP,{size:"small",side:"bottom",align:"start",style:{zIndex:1},overlay:[(0,d.jsx)(ke.ZP.Item,{icon:"alphabetical"===C?(0,d.jsx)(Ut.Z,{size:"tiny"}):(0,d.jsx)("div",{className:"w-[14px] h-[14px]"}),onClick:function(){Z("alphabetical")},children:"Alphabetical"},"alphabetical"),(0,d.jsx)(ke.ZP.Item,{icon:"grouped-alphabetical"===C?(0,d.jsx)(Ut.Z,{size:"tiny"}):(0,d.jsx)("div",{className:"w-[14px] h-[14px]"}),onClick:function(){Z("grouped-alphabetical")},children:"Entity Type"},"grouped-alphabetical")],children:(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{asChild:!0,children:(0,d.jsx)("div",{className:"text-scale-900 transition-colors hover:text-scale-1200",children:(0,d.jsx)(fr.Z,{size:18,strokeWidth:1})})}),(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs",children:"Sort By"})})]})})]})}),(0,d.jsx)("button",{className:"cursor-pointer text-scale-900 transition-colors hover:text-scale-1200",onClick:Y,children:(0,d.jsx)(hr.Z,{className:L?"animate-spin":"",size:14})})]})]})})}),(0,d.jsx)("div",{className:"flex flex-1",children:(0,d.jsx)(vr.Z,{items:W,ItemComponent:Nr,itemProps:{projectRef:null===E||void 0===E?void 0:E.ref,id:Number(w),onEditTable:f,onDeleteTable:x,onDuplicateTable:b,isLoadingTableMetadata:H},getItemSize:function(){return 28},hasNextPage:z,isLoadingNextPage:F,onLoadNextPage:function(){return U()}})})]})]})})),Or=(0,n.Pi)((function(e){var t=e.selectedSchema,r=e.selectedTable,n=e.onSelectSchema,i=void 0===n?de.noop:n,o=e.onAddTable,c=void 0===o?de.noop:o,l=e.onEditTable,u=void 0===l?de.noop:l,p=e.onDeleteTable,f=void 0===p?de.noop:p,h=e.onDuplicateTable,x=void 0===h?de.noop:h,j=e.children,b=(0,m.oR)(),y=b.ui,w=b.vault,N=b.meta,k=(0,m.Vm)(),O=(0,s.useRouter)(),P=(0,_.UO)(),S=P.ref,C=P.id,Z=C?Number(C):void 0,E=or(),I=(0,m.Xo)($t.KA.TENANT_SQL_ADMIN_READ,"tables"),D=N.extensions.byId("supabase_vault"),T=void 0!==D&&null!==D.installed_version;(0,a.useEffect)((function(){y.selectedProjectRef&&(N.schemas.load(),N.types.load(),N.policies.load(),N.publications.load(),N.extensions.load())}),[y.selectedProjectRef]);var R=function(e,t){var r=or();return!(!e||!t)&&e===r.projectRef&&r.loadedIds.has(t)}(S,Z),L=(0,tr.Z)(Z,(function(e){S&&E.addLoadedId(S,e)})),z=(0,rr.Z)(dr());return(0,a.useEffect)((function(){var e,t=!0;return null===(e=function(){if(null!==L&&void 0!==L&&L.type)switch(L.type){case er.l.MATERIALIZED_VIEW:return N.materializedViews.loadById(L.id);case er.l.VIEW:return N.views.loadById(L.id);case er.l.FOREIGN_TABLE:return N.foreignTables.loadById(L.id);default:return N.tables.loadById(L.id)}}())||void 0===e||e.then(function(){var e=(0,v.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.current(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t&&S&&E.addLoadedId(S,e.id)})).catch((function(){t&&null!==L&&void 0!==L&&L.id&&S&&E.addLoadedId(S,L.id)})),function(){t=!1}}),[null===L||void 0===L?void 0:L.id]),(0,a.useEffect)((function(){T&&w.load()}),[null===k||void 0===k?void 0:k.ref,T]),I?(0,d.jsx)(ds,{product:"Table editor",selectedTable:r,productMenu:(0,d.jsx)(kr,{selectedSchema:t,onSelectSchema:i,onAddTable:c,onEditTable:u,onDeleteTable:f,onDuplicateTable:x}),children:O.isReady&&void 0!==Z?R?j:(0,d.jsx)(Jt.Z,{}):j}):(0,d.jsx)(ds,{children:(0,d.jsx)(Xt.Z,{isFullPage:!0,resourceText:"view tables from this project"})})})),Pr=r(90046),Sr=r(24954),Cr=r(51452),Zr=r(90089),Er=r(94174),_r=["enabled"];function Ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tr(e,t){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,v.Z)(g().mark((function e(t,r){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t){e.next=2;break}throw new Error("projectRef is required for getContent");case 2:return e.next=4,(0,B.U2)("".concat(h.T5,"/projects/").concat(t,"/content"),{signal:r});case 4:if(!(n=e.sent).error){e.next=7;break}throw n.error;case 7:if(n){e.next=9;break}throw new Error("Content not found");case 9:return e.abrupt("return",{content:n.data});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enabled,n=void 0===r||r,s=(0,Zr.Z)(t,_r);return(0,He.a)(Er.$.list(e),(function(t){var r=t.signal;return Tr(e,r)}),Dr({enabled:n&&"undefined"!==typeof e},s))};function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fr(e){return"sql"===e.type}var Ur=r(96370),Mr=r(58663),Br=r(71360),Wr=r(63840),Gr=r(48228),qr=["onSuccess"];function Vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,v.Z)(g().mark((function e(t,r){var n,s,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectRef,s=t.id,e.next=3,(0,B.$v)("".concat(h.T5,"/projects/").concat(n,"/content?id=").concat(s),void 0,{signal:r});case 3:if(!(a=e.sent).error){e.next=6;break}throw a.error;case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Zr.Z)(e,qr),n=(0,b.NL)();return(0,Gr.D)((function(e){return Yr(e)}),Hr({onSuccess:function(e,r,s){return(0,v.Z)(g().mark((function a(){var i;return g().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r.projectRef,a.next=3,Promise.all([n.invalidateQueries(Er.$.list(i))]);case 3:return a.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return a.stop()}}),a)})))()}},r))},$r=r(93986),Jr=r(77758),Xr=function(e){var t=e.snippet,r=e.visible,n=e.onCancel,s=e.onComplete,a=(0,m.oR)().ui,o=(0,i.UO)().ref,c=(0,Mr.W2)(),u=t.id,p=t.name,f=t.description,h=function(){var e=(0,v.Z)(g().mark((function e(t,r){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.setSubmitting,o){e.next=3;break}return e.abrupt("return",console.error("Project ref is required"));case 3:if(u){e.next=5;break}return e.abrupt("return",console.error("Snippet ID is required"));case 5:return n(!0),e.prev=6,c.renameSnippet(u,t.name,t.description),s&&s(),e.abrupt("return",Promise.resolve());case 12:e.prev=12,e.t0=e.catch(6),a.setNotification({error:e.t0,category:"error",message:"Failed to rename query: ".concat(e.t0.message)});case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,r){return e.apply(this,arguments)}}();return(0,d.jsx)(J.C,{visible:r,onCancel:n,hideFooter:!0,header:"Rename",size:"small",children:(0,d.jsx)(Jr.Z,{onReset:n,validateOnBlur:!0,initialValues:{name:null!==p&&void 0!==p?p:"",description:null!==f&&void 0!==f?f:""},validate:function(e){var t={};return e.name||(t.name="Please enter a query name"),t},onSubmit:h,children:function(e){var t=e.isSubmitting;return(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsx)(J.C.Content,{children:(0,d.jsx)(we.Z,{label:"Name",id:"name",name:"name"})}),(0,d.jsx)(J.C.Content,{children:(0,d.jsx)(we.Z,{label:"Description",id:"description",placeholder:"Describe query"})}),(0,d.jsx)(J.C.Separator,{}),(0,d.jsx)(J.C.Content,{children:(0,d.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,d.jsx)(l.z,{htmlType:"reset",type:"default",onClick:n,disabled:t,children:"Cancel"}),(0,d.jsx)(l.z,{htmlType:"submit",loading:t,disabled:t,children:"Rename query"})]})})]})}})})},en=function(e){var t=e.tabInfo,r=(0,i.UO)(),n=r.ref,s=r.id,o=t||{},l=o.id,u=o.name,p=o.description,m=l===s,f=(0,a.useRef)(null);return(0,a.useEffect)((function(){m&&f.current&&setTimeout((function(){var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),0)})),(0,d.jsxs)("div",{className:(0,jr.Z)("flex items-center justify-between rounded-md group",m&&"text-scale-1200 bg-scale-400 dark:bg-scale-600 -active"),ref:m?f:null,children:[(0,d.jsx)(c(),{href:"/project/".concat(n,"/sql/").concat(l),children:(0,d.jsx)("a",{className:"py-1 px-3 w-full",children:(0,d.jsx)("p",{title:p||u,className:"text-sm text-scale-1100 group-hover:text-scale-1200 transition",children:u})})}),(0,d.jsx)("div",{className:"pr-3",children:(0,d.jsx)(tn,{tabInfo:t,activeId:s})})]},l)},tn=(0,n.Pi)((function(e){var t=e.tabInfo,r=e.activeId,n=(0,m.oR)().ui,o=(0,i.UO)().ref,c=(0,s.useRouter)(),u=(0,Mr.W2)(),p=Kr({onSuccess:function(e){e.id&&u.removeSnippet(e.id)}}).mutateAsync,f=t||{},x=f.id,j=f.name,b=(0,a.useState)(!1),y=b[0],w=b[1],N=(0,a.useState)(!1),k=N[0],O=N[1],P=x===r,S=function(){w(!1)},C=function(){var e=(0,v.Z)(g().mark((function e(){var t,r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:if(x){e.next=4;break}return e.abrupt("return",console.error("Snippet ID is required"));case 4:return e.prev=4,e.next=7,p({projectRef:o,id:x});case 7:0===(r=(null!==(t=u.orders[o])&&void 0!==t?t:[]).filter((function(e){return e!==x}))).length?c.push("/project/".concat(o,"/sql")):c.push("/project/".concat(o,"/sql/").concat(r[0])),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),n.setNotification({category:"error",message:"Failed to create new query: ".concat(e.t0.message)});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"group [div&>button[data-state='open']>span]:text-scale-900",children:[h.Qy?(0,d.jsx)(ke.ZP,{side:"bottom",align:"end",overlay:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ke.ZP.Item,{onClick:function(e){e.stopPropagation(),w(!0)},icon:(0,d.jsx)($r.Z,{size:"tiny"}),children:"Rename query"}),(0,d.jsx)(ke.ZP.Separator,{}),(0,d.jsx)(ke.ZP.Item,{onClick:function(e){e.stopPropagation(),O(!0)},icon:(0,d.jsx)(yr.Z,{size:"tiny"}),children:"Delete query"})]}),children:(0,d.jsx)("span",{className:(0,jr.Z)("p-0.5 rounded-md",P?"text-scale-1100 hover:bg-scale-800":"text-scale-300 dark:text-scale-200 hover:bg-scale-500 group-hover:text-scale-1100"),children:(0,d.jsx)(wr.Z,{size:"tiny",strokeWidth:2})})}):(0,d.jsx)(l.z,{asChild:!0,disabled:!0,type:"text",style:{padding:"3px"},children:(0,d.jsx)("span",{})}),(0,d.jsx)(Xr,{snippet:t,visible:y,onCancel:S,onComplete:S}),(0,d.jsx)(Wr.Z,{header:"Confirm to delete",buttonLabel:"Delete query",buttonLoadingLabel:"Deleting query",visible:k,onSelectConfirm:C,onSelectCancel:function(){return O(!1)},children:(0,d.jsx)(J.C.Content,{children:(0,d.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to delete '".concat(j,"' ?")})})})]})}));function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sn=(0,n.Pi)((function(){var e=(0,m.oR)().ui,t=(0,i.UO)(),r=t.ref,n=t.id,o=(0,s.useRouter)(),c=(0,Ur.Un)().profile,u=(0,a.useState)(""),p=u[0],f=u[1],x=(0,xt.f$)(),j=x.setPages,b=x.setIsOpen,y=(0,m.P5)("dashboardCmdk"),w=(0,Mr.W2)(),N=function(e){return Lr(e,Ar({select:function(e){return{snippets:e.content.filter(Fr)}}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(r,{onSuccess:function(e){r&&w.setRemoteSnippets(e.snippets,r)}}),k=N.isLoading,O=N.isSuccess,P=(0,Mr.Fy)(r),S=(0,a.useMemo)((function(){return P?(0,de.partition)(P,(function(e){return e.content.favorite})):[[],[]]}),[P]),C=S[0],Z=S[1],E=0===p.length?C:C.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())})),_=0===p.length?Z:Z.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())})),I=(0,m.Xo)($t.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null===c||void 0===c?void 0:c.id},subject:{id:null===c||void 0===c?void 0:c.id}}),D=function(){var t=(0,v.Z)(g().mark((function t(){var n,s;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",console.error("Project ref is required"));case 2:if(I){t.next=4;break}return t.abrupt("return",e.setNotification({category:"info",message:"Your queries will not be saved as you do not have sufficient permissions"}));case 4:try{n=(0,Pr.U)({name:"Untitled query",owner_id:null===c||void 0===c?void 0:c.id}),s=nn(nn({},n),{},{id:(0,_e.k$)()}),w.addSnippet(s,r,!0),o.push("/project/".concat(r,"/sql/").concat(s.id))}catch(a){e.setNotification({category:"error",message:"Failed to create new query: ".concat(a.message)})}case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsxs)(mr.ZP,{type:"pills",children:[h.Qy&&(0,d.jsxs)("div",{className:"my-4 mx-3 space-y-2 px-3",children:[(0,d.jsx)("div",{className:"flex items-center mb-3 w-full justify-center min-w-[210px] ",children:(0,d.jsx)(ke.ZP,{align:"start",side:"bottom",sideOffset:3,className:"max-w-[210px]",overlay:[(0,d.jsx)(ke.ZP.Item,{onClick:function(){return D()},children:(0,d.jsx)("div",{className:"space-y-1",children:(0,d.jsx)("p",{className:"block text-scale-1200 text-xs",children:"New blank query"})})},"new-blank-query"),(0,d.jsx)("div",{className:"my-1 border-t border-scale-400"},"divider"),y?(0,d.jsx)(ke.ZP.Item,{onClick:function(){b(!0),j([Br.p.GENERATE_SQL])},children:(0,d.jsx)("div",{className:"space-y-1",children:(0,d.jsx)("p",{className:"block text-scale-1200 text-xs",children:"New AI query"})})},"new-ai-query"):null],children:(0,d.jsx)(l.z,{block:!0,icon:(0,d.jsx)(dt.Z,{}),className:"min-w-[208px]",type:"outline",disabled:k,style:{justifyContent:"start"},children:"New query"})})}),(0,d.jsx)(we.Z,{size:"tiny",icon:(0,d.jsx)(jt.Z,{size:"tiny"}),placeholder:"Search",disabled:k,onChange:function(e){return f(e.target.value)},value:p,actions:p&&(0,d.jsx)(Ne.Z,{size:"tiny",className:"mr-2 cursor-pointer",onClick:function(){return f("")}})})]}),k?(0,d.jsxs)("div",{className:"px-5 my-4 space-y-2",children:[(0,d.jsx)(Cr.Z,{}),(0,d.jsx)(Cr.Z,{className:"w-3/4"}),(0,d.jsx)(Cr.Z,{className:"w-1/2"})]}):O?(0,d.jsxs)("div",{className:"space-y-6",children:[h.Qy&&(0,d.jsxs)("div",{className:"px-3",children:[(0,d.jsx)(mr.ZP.Group,{title:"Getting started"}),(0,d.jsx)(Sr.Z,{name:"Welcome",isActive:void 0===n,url:"/project/".concat(r,"/sql")})]}),(0,d.jsxs)("div",{className:"space-y-6 px-3",children:[E.length>=1&&(0,d.jsxs)("div",{className:"editor-product-menu",children:[(0,d.jsx)(mr.ZP.Group,{title:"Favorites"}),(0,d.jsx)("div",{className:"space-y-1",children:E.map((function(e){var t=(e||{}).id;return(0,d.jsx)(en,{tabInfo:e},t)}))})]}),_.length>=1&&(0,d.jsxs)("div",{className:"editor-product-menu",children:[(0,d.jsx)(mr.ZP.Group,{title:"SQL snippets"}),(0,d.jsx)("div",{className:"space-y-1 pb-8",children:_.map((function(e){var t=(e||{}).id;return(0,d.jsx)(en,{tabInfo:e},t)}))})]}),p.length>0&&0===E.length&&0===_.length&&(0,d.jsx)("div",{className:"px-4",children:(0,d.jsx)("p",{className:"text-sm",children:"No queries found"})})]})]}):(0,d.jsx)("div",{})]})})})),an=sn,on=(0,m.QO)((function(e){var t=e.title,r=e.children,n=(0,a.useMemo)((function(){return(0,d.jsx)(an,{},"sql-editor-menu")}),[]);return(0,d.jsx)(Kt,{title:t||"SQL",product:"SQL Editor",productMenu:n,children:r})})),cn=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default";return[{title:"Database",items:[{name:"Tables",key:"tables",url:"/project/".concat(s,"/database/tables"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(s,"/database/triggers"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(s,"/database/functions"),items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(s,"/database/extensions"),items:[]},{name:"Roles",key:"roles",url:"/project/".concat(s,"/database/roles"),items:[]},{name:"Replication",key:"replication",url:"/project/".concat(s,"/database/replication"),items:[]}].concat((0,f.Z)(n?[{name:"Webhooks",key:"hooks",url:"/project/".concat(s,"/database/hooks"),items:[]}]:[]),(0,f.Z)(r?[{name:"Wrappers",key:"wrappers",url:"/project/".concat(s,"/database/wrappers"),items:[],label:"ALPHA"}]:[]),(0,f.Z)(h.Qy?[{name:"Backups",key:"backups",url:"/project/".concat(s,"/database/backups/scheduled"),items:[]}]:[]),[{name:"Migrations",key:"migrations",url:"/project/".concat(s,"/database/migrations"),items:[]}])}]},ln=(0,m.QO)((0,n.Pi)((function(e){e.title;var t=e.children,r=(0,m.oR)(),n=r.ui,i=r.meta,o=r.vault,c=r.backups,l=i.schemas.isLoading,f=o.isLoading,x=i.tables,v=x.isInitialized,j=x.error,g=(0,m.Vm)(),b=(0,s.useRouter)().pathname.split("/")[4],y=i.extensions.byId("supabase_vault"),w=void 0!==y&&null!==y.installed_version,N=(0,m.P5)("foreignDataWrappers"),k=void 0!==i.extensions.byId("pg_net"),O=l||w&&f,P=(0,a.useState)(v),S=P[0],C=P[1];return(0,a.useEffect)((function(){n.selectedProjectRef&&(i.schemas.load(),i.tables.load(),i.roles.load(),i.triggers.load(),i.extensions.load(),i.publications.load(),h.Qy&&c.load())}),[n.selectedProjectRef]),(0,a.useEffect)((function(){w&&o.load()}),[n.selectedProjectRef,w]),(0,a.useEffect)((function(){O||S||C(!0)}),[O]),j?(0,d.jsx)(ds,{children:(0,d.jsx)(u,{error:j})}):(0,d.jsx)(ds,{isLoading:!S,product:"Database",productMenu:(0,d.jsx)(p.Z,{page:b,menu:cn(g,N,k)}),children:(0,d.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:t})})}))),dn=r(81391);var un=(0,m.QO)((0,n.Pi)((function(e){var t,r,n,i=e.title,o=e.children,c=(0,s.useRouter)(),l=(0,m.oR)(),x=l.ui,v=l.meta,j=v.openApi,g=j.data,b=j.isLoading,y=j.error,w=(0,m.Vm)(),N=(null===w||void 0===w?void 0:w.status)===h.S.INACTIVE;if((0,a.useEffect)((function(){x.selectedProjectRef&&!N&&v.openApi.load()}),[x.selectedProjectRef]),y)return(0,d.jsx)(ds,{product:"API Docs",children:(0,d.jsx)(u,{error:y})});var k,O,P,S=null!==(t=null===w||void 0===w?void 0:w.ref)&&void 0!==t?t:"default",C=(null!==(r=null===g||void 0===g?void 0:g.tables)&&void 0!==r?r:[]).map((function(e){return e.name})),Z=(null!==(n=null===g||void 0===g?void 0:g.functions)&&void 0!==n?n:[]).map((function(e){return e.name}));return(0,d.jsx)(ds,{title:i||"API Docs",isLoading:b,product:"API Docs",productMenu:(0,d.jsx)(p.Z,{page:function(){if(c.pathname.endsWith("graphiql"))return"graphiql";var e=c.query,t=e.page,r=e.resource;return t||r?t||r||"":"introduction"}(),menu:(k=S,O=C,P=Z,[{title:"Getting Started",items:[{name:"Introduction",key:"introduction",url:"/project/".concat(k,"/api"),items:[]},{name:"Authentication",key:"auth",url:"/project/".concat(k,"/api?page=auth"),items:[]},{name:"User Management",key:"users",url:"/project/".concat(k,"/api?page=users"),items:[]}]},{title:"Tables and Views",items:[{name:"Introduction",key:"tables-intro",url:"/project/".concat(k,"/api?page=tables-intro"),items:[]}].concat((0,f.Z)(O.sort().map((function(e){return{name:e,key:e,url:"/project/".concat(k,"/api?resource=").concat(e),items:[]}}))))},{title:"Stored Procedures",items:[{name:"Introduction",key:"rpc-intro",url:"/project/".concat(k,"/api?page=rpc-intro"),items:[]}].concat((0,f.Z)(P.map((function(e){return{name:e,key:e,url:"/project/".concat(k,"/api?rpc=").concat(e),items:[]}}))))},{title:"GraphQL",items:[{name:"GraphiQL",key:"graphiql",url:"/project/".concat(k,"/api/graphiql"),icon:(0,d.jsx)(Ue.Z,{src:"".concat(h.GW,"/img/graphql.svg"),style:{width:"".concat(16,"px"),height:"".concat(16,"px")},className:"text-scale-1200",preProcessor:function(e){return e.replace(/svg/,'svg class="m-auto text-color-inherit"')}}),items:[]}]},{title:"More Resources",items:[{name:"Guides",key:"guides",url:"https://supabase.com/docs",icon:(0,d.jsx)(dn.Z,{size:14,strokeWidth:2}),items:[],isExternal:!0},{name:"API Reference",key:"api-reference",url:"https://supabase.com/docs/guides/api",icon:(0,d.jsx)(ze.Z,{size:14,strokeWidth:2}),items:[],isExternal:!0}]}])}),children:o})}))),pn=(0,m.QO)((0,n.Pi)((function(e){var t=e.title,r=e.children,n=(0,m.oR)(),i=n.ui,o=n.meta,c=(0,m.Vm)(),l=(0,m.lL)(),u=!(null===l||void 0===l||!l.subscription_id),x=(0,s.useRouter)(),v=x.pathname.includes("billing")?x.pathname.split("/")[5]:x.pathname.split("/")[4],j=(0,m.P5)("vaultExtension"),g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(null===t||void 0===t?void 0:t.status)===h.S.COMING_UP,a="/project/".concat(e,"/building");return n?[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},{name:"Infrastructure",key:"infrastructure",url:s?a:"/project/".concat(e,"/settings/infrastructure"),items:[]},{name:"Add Ons",key:"addons",url:"/project/".concat(e,"/settings/addons"),items:[]}].concat((0,f.Z)(r?[{name:"Vault",key:"vault",url:s?a:"/project/".concat(e,"/settings/vault/secrets"),items:[],label:"BETA"}]:[]))},{title:"",items:[{name:"Database",key:"database",url:s?a:"/project/".concat(e,"/settings/database"),items:[]},{name:"API",key:"api",url:s?a:"/project/".concat(e,"/settings/api"),items:[]}].concat((0,f.Z)(h.Qy?[{name:"Auth",key:"auth",url:s?a:"/project/".concat(e,"/settings/auth"),items:[]}]:[]),(0,f.Z)(h.Qy?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/settings/storage"),items:[]}]:[]))}]:[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},{name:"Database",key:"database",url:s?a:"/project/".concat(e,"/settings/database"),items:[]},{name:"API",key:"api",url:s?a:"/project/".concat(e,"/settings/api"),items:[]}].concat((0,f.Z)(h.Qy?[{name:"Auth",key:"auth",url:s?a:"/project/".concat(e,"/settings/auth"),items:[]}]:[]),(0,f.Z)(h.Qy?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/settings/storage"),items:[]}]:[]),(0,f.Z)(r?[{name:"Vault",key:"vault",url:s?a:"/project/".concat(e,"/settings/vault/secrets"),items:[],label:"BETA"}]:[]))}].concat((0,f.Z)(h.Qy?[{title:"Billing",items:[{name:"Subscription",key:"subscription",url:s?a:"/project/".concat(e,"/settings/billing/subscription"),items:[]},{name:"Usage",key:"usage",url:s?a:"/project/".concat(e,"/settings/billing/usage"),items:[]},{name:"Invoices",key:"invoices",url:s?a:"/project/".concat(e,"/settings/billing/invoices"),items:[]}]}]:[]))}(null===c||void 0===c?void 0:c.ref,c,j,u);return(0,a.useEffect)((function(){i.selectedProjectRef&&o.extensions.load()}),[i.selectedProjectRef]),(0,d.jsx)(ds,{title:t||"Settings",product:"Settings",productMenu:(0,d.jsx)(p.Z,{page:v,menu:g}),children:(0,d.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:r})})}))),mn=r(2288),fn=r(17737),hn=r(17634),xn=r(11872),vn=r(20183),jn=r(77249),gn=r(33582),bn=r(80965),yn=["onSuccess"];function wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kn(e){return On.apply(this,arguments)}function On(){return(On=(0,v.Z)(g().mark((function e(t){var r,n,s,a,i,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef,n=t.id,s=t.isPublic,a=t.file_size_limit,i=t.allowed_mime_types,r){e.next=3;break}throw new Error("projectRef is required");case 3:if(n){e.next=5;break}throw new Error("Bucket name is requried");case 5:return e.next=7,(0,B.v_)("".concat(h.T5,"/storage/").concat(r,"/buckets"),{id:n,public:s,file_size_limit:a,allowed_mime_types:i});case 7:if(!(o=e.sent).error){e.next=10;break}throw o.error;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Zr.Z)(e,yn),n=(0,b.NL)();return(0,Gr.D)((function(e){return kn(e)}),Nn({onSuccess:function(e,r,s){return(0,v.Z)(g().mark((function a(){var i;return g().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r.projectRef,a.next=3,n.invalidateQueries(bn.m.buckets(i));case 3:return a.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return a.stop()}}),a)})))()}},r))},Sn=function(e){var t,r=e.visible,n=e.onClose,o=(0,m.oR)().ui,u=(0,i.UO)().ref,p=(0,s.useRouter)(),f=Pn().mutateAsync,x=(0,gn.kl)({projectRef:u},{enabled:h.Qy}).data,j=(0,jn.K)(null!==(t=null===x||void 0===x?void 0:x.fileSizeLimit)&&void 0!==t?t:0),b=j.value,y=j.unit,w="".concat(b," ").concat(y),N=(0,a.useState)(vn.b.BYTES),k=N[0],O=N[1],P=(0,a.useState)(!1),S=P[0],C=P[1],Z=function(){var e=(0,v.Z)(g().mark((function e(t,r){var s,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.setSubmitting,u){e.next=3;break}return e.abrupt("return",console.error("Project ref is required"));case 3:return s(!0),e.prev=4,e.next=7,f({projectRef:u,id:t.name,isPublic:t.public,file_size_limit:t.has_file_size_limit?(0,jn.F)(t.formatted_size_limit,k):null,allowed_mime_types:t.allowed_mime_types.length>0?t.allowed_mime_types.split(",").map((function(e){return e.trim()})):null});case 7:a=e.sent,o.setNotification({category:"success",message:"Successfully created bucket ".concat(a.name)}),p.push("/project/".concat(u,"/storage/buckets/").concat(a.name)),n(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),o.setNotification({category:"error",message:"Failed to create bucket: ".concat(e.t0.message)}),s(!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,r){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){r&&(O(vn.b.BYTES),C(!1))}),[r]),(0,d.jsx)(J.C,{hideFooter:!0,visible:r,size:"medium",header:"Create storage bucket",onCancel:function(){return n()},children:(0,d.jsx)(Jr.Z,{validateOnBlur:!1,initialValues:{name:"",public:!1,file_size_limit:0,allowed_mime_types:"",has_file_size_limit:!1,formatted_size_limit:0},validate:function(e){var t={};return e.name||(t.name="Please provide a name for your bucket"),e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),t},onSubmit:Z,children:function(e){var t=e.values,r=e.isSubmitting;return(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)(J.C.Content,{children:[(0,d.jsx)(we.Z,{id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created.",descriptionText:"Only lowercase letters, numbers, dots, and hyphens"}),(0,d.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,d.jsx)(hn.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),t.public&&(0,d.jsxs)(tt.Z,{title:"Public buckets are not protected",variant:"warning",withIcon:!0,children:[(0,d.jsx)("p",{className:"mb-2",children:"Users can read objects in public buckets without any authorization."}),(0,d.jsx)("p",{children:"Row level security (RLS) policies are still required for other operations such as object uploads and deletes."})]})]})]}),(0,d.jsxs)(xn.ZP,{open:S,onOpenChange:function(){return C(!S)},children:[(0,d.jsx)(xn.ZP.Trigger,{asChild:!0,children:(0,d.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-scale-500",children:[(0,d.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,d.jsx)(wr.Z,{size:18,strokeWidth:2,className:(0,jr.Z)("text-scale-1100",S&&"rotate-180")})]})}),(0,d.jsx)(xn.ZP.Content,{className:"py-4",children:(0,d.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(hn.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,d.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,d.jsx)("div",{className:"col-span-8",children:(0,d.jsx)(we.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:function(e){(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,jn.F)(t.formatted_size_limit,k).toLocaleString()," bytes.")})}),(0,d.jsx)("div",{className:"col-span-4",children:(0,d.jsx)(ur.Z,{id:"size_limit_units",disabled:!1,value:k,onChange:O,children:Object.values(vn.b).map((function(e){return(0,d.jsx)(ur.Z.Option,{label:e,value:e,children:(0,d.jsx)("div",{children:e})},e)}))})}),h.Qy&&(0,d.jsx)("div",{className:"col-span-12",children:(0,d.jsxs)("p",{className:"text-scale-1000 text-sm",children:["Note: The"," ",(0,d.jsx)(c(),{href:"/project/".concat(u,"/settings/storage"),children:(0,d.jsx)("a",{className:"text-brand-900 opacity-80 hover:opacity-100 transition",children:"global upload limit"})})," ","takes precedence over this value (",w,")"]})})]})]}),(0,d.jsx)(we.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpg, image/png, audio/mpeg, video/mp4, etc",descriptionText:"Comma separated values"})]})})]}),(0,d.jsx)("div",{className:"w-full border-t border-scale-500 !mt-0"}),(0,d.jsx)(J.C.Content,{children:(0,d.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,d.jsx)(l.z,{type:"default",htmlType:"button",disabled:r,onClick:function(){return n()},children:"Cancel"}),(0,d.jsx)(l.z,{type:"primary",htmlType:"submit",loading:r,disabled:r,children:"Save"})]})})]})}})})},Cn=["onSuccess"];function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _n(e){return In.apply(this,arguments)}function In(){return(In=(0,v.Z)(g().mark((function e(t){var r,n,s,a,i,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef,n=t.id,s=t.isPublic,a=t.file_size_limit,i=t.allowed_mime_types,r){e.next=3;break}throw new Error("projectRef is required");case 3:if(n){e.next=5;break}throw new Error("Bucket name is requried");case 5:return e.next=7,(0,B.r$)("".concat(h.T5,"/storage/").concat(r,"/buckets/").concat(n),{public:s,file_size_limit:a,allowed_mime_types:i});case 7:if(!(o=e.sent).error){e.next=10;break}throw o.error;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Zr.Z)(e,Cn),n=(0,b.NL)();return(0,Gr.D)((function(e){return _n(e)}),En({onSuccess:function(e,r,s){return(0,v.Z)(g().mark((function a(){var i;return g().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r.projectRef,a.next=3,n.invalidateQueries(bn.m.buckets(i));case 3:return a.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return a.stop()}}),a)})))()}},r))},Tn=function(e){var t,r=e.visible,n=e.bucket,s=e.onClose,o=(0,m.oR)().ui,u=(0,i.UO)().ref,p=Dn().mutateAsync,f=(0,gn.kl)({projectRef:u},{enabled:h.Qy}).data,x=(0,jn.K)(null!==(t=null===f||void 0===f?void 0:f.fileSizeLimit)&&void 0!==t?t:0),j=x.value,b=x.unit,y="".concat(j," ").concat(b),w=(0,a.useState)(vn.b.BYTES),N=w[0],k=w[1],O=(0,a.useState)(!1),P=O[0],S=O[1],C=function(){var e=(0,v.Z)(g().mark((function e(t,r){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.setSubmitting,void 0!==n){e.next=3;break}return e.abrupt("return",console.error("Bucket is required"));case 3:if(void 0!==u){e.next=5;break}return e.abrupt("return",console.error("Project ref is required"));case 5:return e.prev=5,e.next=8,p({projectRef:u,id:n.id,isPublic:t.public,file_size_limit:t.has_file_size_limit?(0,jn.F)(t.formatted_size_limit,N):null,allowed_mime_types:t.allowed_mime_types.length>0?t.allowed_mime_types.split(",").map((function(e){return e.trim()})):null});case 8:o.setNotification({category:"success",message:'Successfully updated bucket "'.concat(n.name,'"')}),s(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),a(!1),o.setNotification({category:"success",message:"Failed to update bucket: ".concat(e.t0.message)});case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(r){var e,t=(0,jn.K)(null!==(e=null===n||void 0===n?void 0:n.file_size_limit)&&void 0!==e?e:0).unit;k(t),S(!1)}}),[r]),(0,d.jsx)(J.C,{hideFooter:!0,visible:r,size:"medium",header:'Edit bucket "'.concat(null===n||void 0===n?void 0:n.name,'"'),onCancel:s,children:(0,d.jsx)(Jr.Z,{validateOnBlur:!1,initialValues:{},validate:function(e){var t={};return e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),t},onSubmit:C,children:function(e){var t=e.values,i=e.isSubmitting,o=e.resetForm;return(0,a.useEffect)((function(){if(r&&void 0!==n){var e,t,s,a=(0,jn.K)(null!==(e=n.file_size_limit)&&void 0!==e?e:0).value,i={name:null!==(t=n.name)&&void 0!==t?t:"",public:n.public,file_size_limit:n.file_size_limit,allowed_mime_types:(null!==(s=n.allowed_mime_types)&&void 0!==s?s:[]).join(", "),has_file_size_limit:null!==n.file_size_limit,formatted_size_limit:null!==a&&void 0!==a?a:0};o({values:i,initialValues:i})}}),[r]),(0,d.jsxs)("div",{className:"space-y-4 py-4",children:[(0,d.jsxs)(J.C.Content,{children:[(0,d.jsx)(we.Z,{disabled:!0,id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created."}),(0,d.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,d.jsx)(hn.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),(null===n||void 0===n?void 0:n.public)!==t.public&&(0,d.jsx)(tt.Z,{title:null!==n&&void 0!==n&&n.public||!t.public?null!==n&&void 0!==n&&n.public&&!t.public?"Warning: Making bucket private":"":"Warning: Making bucket public",variant:"warning",withIcon:!0,children:(0,d.jsx)("p",{className:"mb-2",children:null!==n&&void 0!==n&&n.public||!t.public?null!==n&&void 0!==n&&n.public&&!t.public?'All objects in "'.concat(null===n||void 0===n?void 0:n.name,'" will be made private and will only be accessible via signed URLs or downloaded with the right authorisation headers'):"":'This will make all objects in the bucket "'.concat(null===n||void 0===n?void 0:n.name,'" public')})})]})]}),(0,d.jsxs)(xn.ZP,{open:P,onOpenChange:function(){return S(!P)},children:[(0,d.jsx)(xn.ZP.Trigger,{asChild:!0,children:(0,d.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-scale-500",children:[(0,d.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,d.jsx)(wr.Z,{size:18,strokeWidth:2,className:(0,jr.Z)("text-scale-1100",P&&"rotate-180")})]})}),(0,d.jsx)(xn.ZP.Content,{className:"py-4",children:(0,d.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(hn.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,d.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,d.jsx)("div",{className:"col-span-8",children:(0,d.jsx)(we.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:function(e){(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,jn.F)(t.formatted_size_limit,N).toLocaleString()," bytes.")})}),(0,d.jsx)("div",{className:"col-span-4",children:(0,d.jsx)(ur.Z,{id:"size_limit_units",disabled:!1,value:N,onChange:k,children:Object.values(vn.b).map((function(e){return(0,d.jsx)(ur.Z.Option,{label:e,value:e,children:(0,d.jsx)("div",{children:e})},e)}))})}),h.Qy&&(0,d.jsx)("div",{className:"col-span-12",children:(0,d.jsxs)("p",{className:"text-scale-1000 text-sm",children:["Note: The"," ",(0,d.jsx)(c(),{href:"/project/".concat(u,"/settings/storage"),children:(0,d.jsx)("a",{className:"text-brand-900 opacity-80 hover:opacity-100 transition",children:"global upload limit"})})," ","takes precedence over this value (",y,")"]})})]})]}),(0,d.jsx)(we.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Leave the field blank to allow any MIME type to be uploaded"})]})})]}),(0,d.jsx)("div",{className:"w-full border-t border-scale-500 !mt-0"}),(0,d.jsx)(J.C.Content,{children:(0,d.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,d.jsx)(l.z,{type:"default",disabled:i,onClick:function(){return s()},children:"Cancel"}),(0,d.jsx)(l.z,{type:"primary",htmlType:"submit",loading:i,disabled:i,children:"Save"})]})})]})}})})},Rn=r(14760),Ln=r(92493),zn=function(e){var t=e.bucket,r=e.projectRef,n=void 0===r?"":r,s=e.isSelected,a=void 0!==s&&s,i=e.onSelectDeleteBucket,o=void 0===i?de.noop:i,u=e.onSelectEditBucket,p=void 0===u?de.noop:u,f=(0,m.Xo)($t.KA.STORAGE_ADMIN_WRITE,"*");return(0,d.jsxs)("div",{className:(0,jr.Z)("group flex items-center justify-between rounded-md",a&&"text-scale-1200 bg-scale-300"),children:[(0,d.jsx)(c(),{href:"/project/".concat(n,"/storage/buckets/").concat(t.id),children:(0,d.jsx)("a",{className:"py-1 px-3 w-full",children:(0,d.jsxs)("div",{className:"flex items-center justify-between space-x-2 truncate w-full",children:[(0,d.jsx)("p",{className:"text-sm text-scale-1100 group-hover:text-scale-1200 transition truncate",title:t.name,children:t.name}),t.public&&(0,d.jsx)(z.Z,{color:"yellow",children:"Public"})]})})}),(0,d.jsx)("div",{className:"pr-3",children:f&&a?(0,d.jsx)(ke.ZP,{side:"bottom",align:"start",overlay:[(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)($r.Z,{size:"tiny"}),onClick:function(){return p(t)},children:"Edit bucket"},"toggle-private"),(0,d.jsx)(ke.ZP.Separator,{},"bucket-separator"),(0,d.jsx)(ke.ZP.Item,{icon:(0,d.jsx)(yr.Z,{size:"tiny"}),onClick:function(){return o(t)},children:"Delete bucket"},"delete-bucket")],children:(0,d.jsx)(l.z,{asChild:!0,type:"text",icon:(0,d.jsx)(wr.Z,{size:"tiny",strokeWidth:2,className:"text-scale-1100"}),style:{padding:"3px"},children:(0,d.jsx)("span",{})})}):(0,d.jsx)("div",{className:"w-5"})})]},t.id)},An=(0,n.Pi)((function(){var e=(0,s.useRouter)(),t=(0,_.UO)(),r=t.ref,n=t.bucketId,i=(0,a.useState)(!1),o=i[0],u=i[1],p=(0,a.useState)(),f=p[0],h=p[1],x=(0,a.useState)(),v=x[0],j=x[1],g=(0,m.Xo)($t.KA.STORAGE_ADMIN_WRITE,"*"),b=e.pathname.split("/")[4],y=(0,Ln.KR)({projectRef:r}),w=y.data,N=y.isLoading,k=y.isError,O=y.isSuccess,P=null!==w&&void 0!==w?w:[];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(mr.ZP,{type:"pills",className:"my-6 flex flex-grow flex-col px-5",children:[(0,d.jsx)("div",{className:"mb-6 px-2",children:(0,d.jsxs)(Be.fC,{delayDuration:0,children:[(0,d.jsx)(Be.xz,{className:"w-full",children:(0,d.jsx)(l.z,{block:!0,type:"default",icon:(0,d.jsx)("div",{className:"text-scale-900",children:(0,d.jsx)(pr.Z,{size:14})}),disabled:!g,style:{justifyContent:"start"},onClick:function(){return u(!0)},children:"New bucket"})}),!g&&(0,d.jsx)(Be.h_,{children:(0,d.jsxs)(Be.VY,{side:"bottom",children:[(0,d.jsx)(Be.Eh,{className:"radix-tooltip-arrow"}),(0,d.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,d.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create buckets"})})]})})]})}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"",children:(0,d.jsxs)("div",{children:[(0,d.jsx)(mr.ZP.Group,{title:"All buckets"}),N&&(0,d.jsxs)("div",{className:"space-y-2 mx-2",children:[(0,d.jsx)(Cr.Z,{className:"!py-2.5"}),(0,d.jsx)(Cr.Z,{className:"!py-2.5"}),(0,d.jsx)(Cr.Z,{className:"!py-2.5"})]}),k&&(0,d.jsx)("div",{className:"px-2",children:(0,d.jsx)(tt.Z,{variant:"warning",title:"Failed to fetch buckets",children:"Please refresh to try again."})}),O&&(0,d.jsxs)(d.Fragment,{children:[0===P.length&&(0,d.jsx)("div",{className:"px-2",children:(0,d.jsx)(tt.Z,{title:"No buckets available",children:"Buckets that you create will appear here"})}),P.map((function(e,t){var s=n===e.id;return(0,d.jsx)(zn,{bucket:e,projectRef:r,isSelected:s,onSelectDeleteBucket:function(){return j(e)},onSelectEditBucket:function(){return h(e)}},"".concat(t,"_").concat(e.id))}))]})]})}),(0,d.jsx)("div",{className:"h-px w-full bg-scale-500"}),(0,d.jsxs)("div",{className:"",children:[(0,d.jsx)(mr.ZP.Group,{title:"Configuration"}),(0,d.jsx)(c(),{href:"/project/".concat(r,"/storage/policies"),children:(0,d.jsx)(mr.ZP.Item,{rounded:!0,active:"policies"===b,children:(0,d.jsx)("p",{className:"truncate",children:"Policies"})})})]})]})]}),(0,d.jsx)(Sn,{visible:o,onClose:function(){return u(!1)}}),(0,d.jsx)(Tn,{visible:void 0!==f,bucket:f,onClose:function(){return h(void 0)}}),(0,d.jsx)(Rn.Iw,{visible:void 0!==v,bucket:v,onClose:function(){return j(void 0)}})]})})),Fn=(0,m.QO)((function(e){var t=e.title,r=e.children,n=(0,m.oR)().ui,s=(0,_.UO)().ref,i=(0,m.Vm)(),o=(0,fn.HN)(),c=(0,mn.qP)({projectRef:s}),l=c.data,u=c.isLoading,p=null===l||void 0===l?void 0:l.autoApiService,f=(null===i||void 0===i?void 0:i.status)===h.S.INACTIVE;(0,a.useEffect)((function(){!u&&p&&x(p)}),[u,s]);var x=function(){var e=(0,v.Z)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:t.endpoint?o.initStore(s,t.endpoint,t.serviceApiKey,t.protocol):n.setNotification({category:"error",message:"Failed to fetch project configuration. Try refreshing your browser, or reach out to us at support@supabase.io"}),o.setLoaded(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(ds,{title:t||"Storage",product:"Storage",productMenu:(0,d.jsx)(An,{}),children:r})})),Un=r(31559),Mn=r(17994);function Bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Wn=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Mn.Z},e))},Gn=r(35814);function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Vn=function(e){return(0,d.jsx)(Q.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){(0,D.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Gn.Z},e))},Hn=function(e){var t=e.title,r=e.header,n=e.breadcrumbs,s=void 0===n?[]:n,a=e.children,i=e.sections,o=e.subitems,c=e.subitemsParentKey,l=e.hideSidebar,u=void 0!==l&&l,p=e.customSidebarContent,f=!i&&!p,h=(0,m.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,d.jsxs)("div",{className:"flex max-h-full",children:[!u&&!f&&(0,d.jsxs)("div",{id:"with-sidebar",style:{height:h,maxHeight:h},className:["h-full bg-body","hide-scrollbar w-64 overflow-auto border-r border-scale-500"].join(" "),children:[t&&(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)("div",{className:"flex h-12 max-h-12 items-center border-b px-6 border-scale-500",children:(0,d.jsx)("h4",{className:"mb-0 text-lg truncate",title:t,children:t})})}),r&&r,(0,d.jsx)("div",{className:"-mt-1",children:(0,d.jsxs)(mr.ZP,{children:[p,i.map((function(e,t){return Boolean(e.heading)?(0,d.jsx)(Yn,{section:e,subitems:o,subitemsParentKey:c},e.key):(0,d.jsx)("div",{className:"border-b py-5 px-6 border-scale-400",children:(0,d.jsx)(Qn,{links:e.links,subitems:o,subitemsParentKey:c})},e.key)}))]})})]}),(0,d.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,d.jsx)(ft,{breadcrumbs:s}),(0,d.jsx)("div",{className:"flex-1 flex-grow overflow-auto",children:a})]})]})},Yn=function(e){var t=e.section,r=e.subitems,n=e.subitemsParentKey;return(0,d.jsxs)("div",{className:"border-b py-5 px-6 border-scale-500",children:[t.heading&&(0,d.jsx)(mr.ZP.Group,{title:t.heading}),t.versionLabel&&(0,d.jsx)("div",{className:"mb-1 px-3",children:(0,d.jsx)(z.Z,{color:"yellow",children:t.versionLabel})}),(0,d.jsx)(Qn,{links:t.links,subitems:r,subitemsParentKey:n})]},t.heading)},Qn=function(e){var t=e.links,r=e.subitems,n=e.subitemsParentKey;return(0,d.jsx)("ul",{className:"space-y-1",children:t.map((function(e,t){var s=e.isActive&&!r,a=(0,d.jsx)(Kn,{id:"".concat(e.key,"-").concat(t),isActive:s,label:e.label,href:e.href,onClick:e.onClick,isExternal:e.isExternal||!1},"".concat(e.key,"-").concat(t,"-sidebarItem"));if(r&&e.subitemsKey===n){var i=r.map((function(t,r){return(0,d.jsx)(Kn,{id:"".concat(t.key||t.as,"-").concat(r),isSubitem:!0,label:t.label,onClick:t.onClick,isExternal:e.isExternal||!1},"".concat(t.key||t.as,"-").concat(r,"-sidebarItem"))}));a=[a].concat((0,f.Z)(i))}return a}))})},Kn=function(e){var t,r=e.id,n=e.label,s=e.href,a=e.isActive,i=e.isSubitem,o=e.isExternal,l=e.onClick;return(0,de.isUndefined)(s)?(o&&(t=(0,d.jsx)(Wn,{size:"tiny"})),"Logout"===n&&(t=(0,d.jsx)(Vn,{size:"tiny"})),(0,d.jsx)(mr.ZP.Item,{rounded:!0,style:{marginLeft:i?".5rem":"0rem"},active:!!a,onClick:l||function(){},icon:t,children:i?(0,d.jsx)("p",{className:"text-sm",children:n}):n},r)):(0,d.jsx)(c(),{href:s||"",children:(0,d.jsx)("a",{className:"block",target:o?"_blank":"_self",children:(0,d.jsxs)("span",{className:"group flex max-w-full cursor-pointer items-center space-x-2 border-scale-500 py-1 font-normal outline-none ring-scale-1200 focus-visible:z-10 focus-visible:ring-1 group-hover:border-scale-900",children:[o&&(0,d.jsx)("span",{className:"truncate text-sm text-scale-900 transition group-hover:text-scale-1100",children:(0,d.jsx)(Wn,{size:"tiny"})}),(0,d.jsx)("span",{title:n,className:"w-full truncate text-sm text-scale-1100 transition group-hover:text-scale-1200",children:i?(0,d.jsx)("p",{children:n}):n})]})})})},$n=function(e){var t=e.children,r=e.title,n=e.breadcrumbs,a=(0,s.useRouter)(),i=(0,lt.tl)().data,o=(0,m.lL)(),c=(0,m.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh",l=(0,Un.QJ)(),u=function(){var e=(0,v.Z)(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.next=4,a.push("/sign-in");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=(null!==i&&void 0!==i?i:[]).map((function(e){return{isActive:a.pathname.startsWith("/org/")&&(null===o||void 0===o?void 0:o.slug)===e.slug,label:e.name+(e.subscription_id?" (V2)":""),href:"/org/".concat(e.slug,"/general"),key:e.slug}})).sort((function(e,t){return e.label.localeCompare(t.label)})),x=[{heading:"Projects",key:"projects",links:[{isActive:"/projects"===a.pathname,label:"All projects",href:"/projects",key:"all-projects-item"}]}].concat((0,f.Z)(h.Qy&&(null===p||void 0===p?void 0:p.length)>0?[{heading:"Organizations",key:"organizations",links:p}]:[]),(0,f.Z)(h.Qy?[{heading:"Account",key:"account",links:[{isActive:"/account/me"===a.pathname,icon:"".concat(a.basePath,"/img/user.svg"),label:"Preferences",href:"/account/me",key:"/account/me"},{isActive:"/account/tokens"===a.pathname,icon:"".concat(a.basePath,"/img/user.svg"),label:"Access Tokens",href:"/account/tokens",key:"/account/tokens"}]}]:[]),[{heading:"Documentation",key:"documentation",links:[{key:"ext-guides",icon:"".concat(a.basePath,"/img/book.svg"),label:"Guides",href:"https://supabase.com/docs",isExternal:!0},{key:"ext-guides",icon:"".concat(a.basePath,"/img/book-open.svg"),label:"API Reference",href:"https://supabase.com/docs/guides/api",isExternal:!0}]}],(0,f.Z)(h.Qy?[{key:"logout-link",links:[{key:"logout",icon:"/icons/feather/power.svg",label:"Logout",href:void 0,onClick:u}]}]:[]));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(k(),{children:[(0,d.jsx)("title",{children:r?"".concat(r," | Supabase"):"Supabase"}),(0,d.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,d.jsx)("div",{className:"flex h-full",children:(0,d.jsx)("main",{style:{height:c,maxHeight:c},className:"flex flex-col flex-1 w-full overflow-y-auto",children:(0,d.jsx)(Hn,{title:r,breadcrumbs:n,sections:x,children:t})})})]})},Jn=(0,m.QO)($n),Xn=r(47939),es=function(e){var t=e.organization,r=e.project,n=e.children,s=(0,m.P5)("ongoingIncident")?"calc(100vh - 44px)":"100vh";return(0,d.jsxs)("div",{className:"flex w-full flex-col",style:{height:s,maxHeight:s},children:[(0,d.jsx)(ns,{organization:t,project:r}),(0,d.jsx)("div",{className:"overflow-auto",children:(0,d.jsx)("section",{className:"has-slide-in slide-in relative mx-auto my-10 max-w-2xl",children:n})})]})},ts=(0,m.QO)((0,n.Pi)(es)),rs=(0,n.Pi)(es),ns=function(e){var t=e.organization,r=e.project,n=t?1:r?2:0;return(0,d.jsx)("div",{className:"border-b p-3 dark:border-dark",children:(0,d.jsx)("div",{className:"PageHeader",children:(0,d.jsxs)("div",{className:"Breadcrumbs flex justify-between",children:[(0,d.jsx)("div",{className:"flex items-center text-sm",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(c(),{href:"/projects",children:(0,d.jsx)("a",{children:(0,d.jsx)("img",{src:"".concat(h.GW,"/img/supabase-logo.svg"),alt:"Supabase",className:"rounded border p-1 hover:border-white dark:border-dark",style:{height:24}})})}),(0,d.jsx)(Xn.Z,{size:"small",className:"text-scale-1100"}),(0,d.jsx)("p",{className:"text-sm",children:t?"Organization: ".concat(t.name):"Create an organization"}),(0,d.jsx)(Xn.Z,{size:"small",className:"text-scale-1100"}),(0,d.jsx)("p",{className:"text-sm ".concat(n<1?"text-scale-1100":""),children:r?r.name:"Create a new project"}),(0,d.jsx)(Xn.Z,{size:"small",className:"text-scale-1100"}),(0,d.jsx)("p",{className:"text-sm ".concat(n<2?"text-scale-1100":""),children:r?r.name:"Extend your database"})]})}),(0,d.jsx)("div",{className:"flex"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(Me,{}),(0,d.jsx)(Re,{})]})]})})})},ss=(r(91700),(0,m.QO)((function(e){var t=e.children,r=(0,m.lL)(),n=(0,m.Vm)();return(0,d.jsx)(ds,{hideHeader:!0,hideIconBar:!0,children:(0,d.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4 border-b py-4 px-5 dark:border-dark",children:[(0,d.jsx)(c(),{href:"/project/".concat(null===n||void 0===n?void 0:n.ref,"/settings/billing/subscription"),passHref:!0,children:(0,d.jsx)("a",{className:"text-scale-900 transition-colors hover:text-scale-1200",children:(0,d.jsx)(Ne.Z,{size:16,strokeWidth:1.5})})}),(0,d.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,d.jsx)("h1",{className:"text-sm text-scale-1200",children:"Customize your plan"}),(0,d.jsx)("div",{className:"h-6 w-px bg-scale-600"}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:null===r||void 0===r?void 0:r.name}),(0,d.jsx)("span",{className:"text-scale-800",children:(0,d.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,d.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,d.jsx)("p",{className:"text-sm text-scale-1100",children:null===n||void 0===n?void 0:n.name})]})]})]}),(0,d.jsx)("div",{className:"overflow-auto",children:(0,d.jsx)("section",{className:"relative",children:t})})]})})})),r(31027)),as=function(e){var t,r=null!==(t=null===e||void 0===e?void 0:e.ref)&&void 0!==t?t:"default";return[{title:"",items:[{name:"Custom reports",key:"",url:"/project/".concat(r,"/reports"),items:[]}]},{items:[{name:"API",key:"api-overview",url:"/project/".concat(r,"/reports/api-overview"),items:[],label:"NEW"},{name:"Database",key:"database",url:"/project/".concat(r,"/reports/database"),items:[]},{name:"Query Performance",key:"query-performance",url:"/project/".concat(r,"/reports/query-performance"),items:[],label:"NEW"}]}]},is=(0,m.QO)((function(e){var t=e.title,r=e.children,n=(0,s.useRouter)(),a=(0,m.Vm)(),i=n.pathname.split("/")[4]||"";return(0,d.jsx)(ds,{title:t,product:"Reports",productMenu:(0,d.jsx)(p.Z,{page:i,menu:as(a)}),children:(0,d.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:r})})})),os=r(65657),cs=r(31859),ls=function(e){var t,r,n,a,o=e.children,c=(0,m.lL)(),l=(0,s.useRouter)(),u=(0,i.UO)().slug,p=null===(t=l.asPath.split("/").at(-1))||void 0===t||null===(r=t.split("?")[0])||void 0===r?void 0:r.split("#")[0],f=(0,m.P5)("oauthApps"),h=(0,m.P5)("auditLogs"),x=(0,m.P5)("integrationsV2"),v=!(null===c||void 0===c||!c.subscription_id);return(0,d.jsxs)(Jn,{title:null!==(n=null===c||void 0===c?void 0:c.name)&&void 0!==n?n:"Supabase",breadcrumbs:[{key:"org-settings",label:"Settings"}],children:[(0,d.jsxs)(cs.tU,{children:[(0,d.jsx)(cs._S,{id:"billing-page-top",children:(0,d.jsxs)(cs.q7,{children:[null!==(a=null===c||void 0===c?void 0:c.name)&&void 0!==a?a:"Organization"," settings"]})}),(0,d.jsx)(cs._S,{children:(0,d.jsx)("nav",{children:(0,d.jsxs)(os.Z,{listClassNames:"border-none",size:"small",type:"underlined",activeId:p,onChange:function(e){l.push("/org/".concat(u,"/").concat(e))},children:[(0,d.jsx)(os.Z.Panel,{id:"general",label:"General",className:"!my-0"}),(0,d.jsx)(os.Z.Panel,{id:"team",label:"Team",className:"!my-0"}),x&&(0,d.jsx)(os.Z.Panel,{id:"integrations",label:"Integrations",className:"!my-0"}),(0,d.jsx)(os.Z.Panel,{id:"billing",label:"Billing",className:"!my-0"}),v&&(0,d.jsx)(os.Z.Panel,{id:"usage",label:"Usage",className:"!my-0"}),(0,d.jsx)(os.Z.Panel,{id:"invoices",label:"Invoices",className:"!my-0"}),f&&(0,d.jsx)(os.Z.Panel,{id:"apps",label:"OAuth Apps",className:"!my-0"}),h&&(0,d.jsx)(os.Z.Panel,{id:"audit",label:"Audit Logs",className:"!my-0"})]})})})]}),(0,d.jsx)(cs.I7,{}),o]})},ds=Ht},30259:function(e,t,r){var n=r(38480),s=r(20796),a=r(24246);t.Z=function(){return(0,a.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center",children:[(0,a.jsx)(n.Z,{src:"".concat(s.GW,"/img/no-search-results.svg"),preProcessor:function(e){return e.replace(/svg/,'svg className="mb-2 w-16 h-16 text-color-inherit"')}}),(0,a.jsx)("p",{className:"w-64 text-center text-sm opacity-50",children:"Hmm, we couldn't find any results that match your query."})]})}},89744:function(e,t,r){var n=r(88671),s=r(65961),a=r(64116),i=r(24246);t.Z=function(e){var t=e.title,r=void 0===t?"":t,o=e.size,c=void 0===o?"medium":o,l=e.children,d=e.ctaButtonLabel,u=void 0===d?"":d,p=e.infoButtonLabel,m=void 0===p?"":p,f=e.infoButtonUrl,h=void 0===f?"":f,x=e.onClickCta,v=void 0===x?function(){}:x,j=e.disabled,g=void 0!==j&&j,b=e.disabledMessage,y=void 0===b?"":b,w=u&&v||h&&m;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)("div",{className:"flex space-x-4 rounded border border-panel-border-light bg-panel-body-light p-6 shadow-md dark:border-panel-border-dark dark:bg-panel-body-dark",children:(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsxs)("div",{className:"".concat("medium"===c?"w-80":"w-[400px]"," space-y-4"),children:[(0,i.jsx)("h5",{children:r}),(0,i.jsx)("div",{className:"flex flex-col space-y-2",children:l}),w&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[u&&v&&(0,i.jsxs)(a.fC,{delayDuration:0,children:[(0,i.jsx)(a.xz,{children:(0,i.jsx)(n.z,{type:"primary",onClick:v,disabled:g,children:u})}),g&&y.length>0&&(0,i.jsx)(a.h_,{children:(0,i.jsxs)(a.VY,{side:"bottom",children:[(0,i.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,i.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,i.jsx)("span",{className:"text-xs text-scale-1200",children:y})})]})})]}),h&&m?(0,i.jsx)(n.z,{type:"default",icon:(0,i.jsx)(s.Z,{size:14,strokeWidth:1.5}),children:(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:h,children:m})}):null]})]})})})})}},61548:function(e,t,r){r.d(t,{De:function(){return s},Eb:function(){return l},Qo:function(){return n},R9:function(){return c},Ye:function(){return a},fh:function(){return o},l6:function(){return d},sd:function(){return i}});var n={WEEK:604800,MONTH:2592e3,YEAR:31536e3},s={COLUMNS:"COLUMNS",LIST:"LIST"},a={NAME:"name",UPDATED_AT:"updated_at",CREATED_AT:"created_at",LAST_ACCESSED_AT:"last_accessed_at"},i={ASC:"asc",DESC:"desc"},o={BUCKET:"BUCKET",FILE:"FILE",FOLDER:"FOLDER"},c={READY:"READY",LOADING:"LOADING",EDITING:"EDITING"},l={upload:["INSERT"],download:["SELECT"],list:["SELECT"],update:["SELECT","UPDATE"],move:["SELECT","UPDATE"],copy:["SELECT","INSERT"],remove:["SELECT","DELETE"],createSignedUrl:["SELECT"],createSignedUrls:["SELECT"],getPublicUrl:[]},d={STORAGE_COLUMN:"STORAGE_COLUMN",STORAGE_ITEM:"STORAGE_ITEM",STORAGE_FOLDER:"STORAGE_FOLDER"}},20183:function(e,t,r){r.d(t,{H:function(){return s},b:function(){return n}});var n,s=5368709120;!function(e){e.BYTES="bytes",e.KB="KB",e.MB="MB",e.GB="GB"}(n||(n={}))},77249:function(e,t,r){r.d(t,{F:function(){return i},K:function(){return a}});var n=r(20183),s=1024,a=function(e,t){if(e<=0)return{value:0,unit:n.b.BYTES};var r=void 0!==t?Object.values(n.b).indexOf(t):Math.floor(Math.log(e)/Math.log(s)),a=void 0!==t?r<0?0:r:r>3?3:r,i=Object.values(n.b)[a];return{value:e/Math.pow(s,a),unit:i}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.b.BYTES,r=Object.values(n.b).indexOf(t);return e<0||r<0?0:e*Math.pow(s,r)}},14760:function(e,t,r){r.d(t,{Iw:function(){return nr},cm:function(){return Qe},S:function(){return Et},cx:function(){return Ht}});var n=r(11246),s=r(90849),a=r(55732),i=r(34707),o=r.n(i),c=r(98784),l=r(43659),d=r(27378),u=r(54782),p=r(17737),m=r(61548),f=r(94269),h=r(88671),x=r(11597),v=r(24246),j=function(e){var t=e.visible,r=void 0!==t&&t,n=e.selectedItemsToDelete,s=void 0===n?[]:n,a=e.onSelectCancel,i=void 0===a?function(){}:a,o=e.onSelectDelete,c=void 0===o?function(){}:o,l=(0,d.useState)(!1),u=l[0],p=l[1];(0,d.useEffect)((function(){p(!1)}),[r]);var m=s.length>1,j=m?"Confirm deletion of ".concat(s.length," items"):1===s.length?"Confirm deletion of ".concat(s[0].name):"",g=m?"Are you sure you want to delete the selected ".concat(s.length," items?"):1===s.length?"Are you sure you want to delete the selected ".concat(s[0].type.toLowerCase(),"?"):"";return(0,v.jsx)(f.C,{visible:r,header:(0,v.jsx)("span",{className:"break-words",children:j}),size:"medium",onCancel:i,customFooter:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(h.z,{type:"default",disabled:u,onClick:i,children:"Cancel"}),(0,v.jsx)(h.z,{type:"danger",disabled:u,loading:u,onClick:function(){p(!0),c()},children:u?"Deleting":"Delete"})]}),children:(0,v.jsx)(f.C.Content,{children:(0,v.jsx)("div",{className:"my-4",children:(0,v.jsx)(x.Z,{withIcon:!0,variant:"danger",title:"This action cannot be undone.",children:g})})})})},g=r(77758),b=r(3648),y=(0,l.Pi)((function(e){var t=e.onCopyUrl,r=(0,p.HN)(),n=r.getFileUrl,s=r.selectedFileCustomExpiry,i=r.setSelectedFileCustomExpiry,c=void 0!==s,l=function(){return i(void 0)};return(0,v.jsx)(f.C,{hideFooter:!0,size:"small",header:"Custom expiry for signed URL",visible:c,alignFooter:"right",confirmText:"Get URL",onCancel:function(){return l()},children:(0,v.jsx)(g.Z,{validateOnBlur:!0,initialValues:{expiresIn:""},onSubmit:function(){var e=(0,a.Z)(o().mark((function e(r,a){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=a.setSubmitting)(!0),e.t0=t,e.t1=s.name,e.next=6,n(s,r.expiresIn);case 6:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),i(!1),l();case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),validate:function(e){var t={};return""!==e.expiresIn&&e.expiresIn<=0&&(t.expiresIn="Expiry duration cannot be less than 0"),t},children:function(e){var t=e.values,r=e.isSubmitting;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"py-6",children:(0,v.jsx)(f.C.Content,{children:(0,v.jsx)(b.Z,{disabled:r,type:"number",id:"expiresIn",label:"Enter the duration for which the URL will be valid:",actions:(0,v.jsx)("p",{className:"text-sm text-scale-1000 mr-2",children:"seconds"})})})}),(0,v.jsx)(f.C.Separator,{}),(0,v.jsx)(f.C.Content,{children:(0,v.jsxs)("div",{className:"flex items-center justify-end space-x-2 pt-1 pb-3",children:[(0,v.jsx)(h.z,{type:"default",onClick:function(){return l()},children:"Cancel"}),(0,v.jsx)(h.z,{disabled:""===t.expiresIn||r,loading:r,htmlType:"submit",type:"primary",children:"Get signed URL"})]})})]})}})})})),w=r(7501),N=(r(94039),r(68043)),k=r(92325),O=r(47939),P=r(67863),S=r(58643),C=r(12163);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var E=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:S.Z},e))},_=r(65194),I=r(77597);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var T=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:I.Z},e))},R=r(45355),L=(0,l.Pi)((function(e){var t=e.id,r=void 0===t?"":t,n=e.onCopyUrl,s=void 0===n?c.noop:n,i=(0,p.HN)(),l=i.getFileUrl,d=i.downloadFile,u=i.selectedBucket,f=i.setSelectedItemsToDelete,h=i.setSelectedItemToRename,x=i.setSelectedItemsToMove,j=i.setSelectedFileCustomExpiry,g=u.public,b=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*"),y=function(){var e=(0,a.Z)(o().mark((function e(t,r,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isCorrupted){e.next=2;break}return e.abrupt("return");case 2:e.t0=t,e.next="copy"===e.t0?5:"rename"===e.t0?15:"move"===e.t0?16:"download"===e.t0?17:20;break;case 5:if(!(void 0!==n&&n<0)){e.next=9;break}return e.abrupt("return",j(r));case 9:return e.t1=s,e.t2=r.name,e.next=13,l(r,n);case 13:return e.t3=e.sent,e.abrupt("return",(0,e.t1)(e.t2,e.t3));case 15:return e.abrupt("return",h(r));case 16:return e.abrupt("return",x([r]));case 17:return e.next=19,d(r);case 19:return e.abrupt("return",e.sent);case 20:return e.abrupt("break",21);case 21:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return(0,v.jsxs)(w.v2,{id:r,animation:"fade",children:[g?(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return y("copy",t.item)},children:[(0,v.jsx)(k.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Get URL"})]}):(0,v.jsxs)(w.rS,{label:(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(k.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"text-xs",children:"Get URL"})]}),arrow:(0,v.jsx)(O.Z,{size:"tiny"}),children:[(0,v.jsx)(w.ck,{onClick:function(e){var t=e.props;return y("copy",t.item,m.Qo.WEEK)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 week"})}),(0,v.jsx)(w.ck,{onClick:function(e){var t=e.props;return y("copy",t.item,m.Qo.MONTH)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 month"})}),(0,v.jsx)(w.ck,{onClick:function(e){var t=e.props;return y("copy",t.item,m.Qo.YEAR)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Expire in 1 year"})}),(0,v.jsx)(w.ck,{onClick:function(e){var t=e.props;return y("copy",t.item,-1)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Custom expiry"})})]}),b&&[(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return y("rename",t.item)},children:[(0,v.jsx)(P.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]},"rename-file"),(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return y("move",t.item)},children:[(0,v.jsx)(E,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Move"})]},"move-file"),(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return y("download",t.item)},children:[(0,v.jsx)(_.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]},"download-file"),(0,v.jsx)(w.Z0,{},"file-separator"),(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return f([t.item])},children:[(0,v.jsx)(T,{size:"tiny",stroke:"red"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete-file")]]})})),z=function(e){var t=e.id,r=void 0===t?"":t,n=(0,p.HN)(),s=n.downloadFolder,a=n.setSelectedItemToRename,i=n.setSelectedItemsToDelete,o=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*");return(0,v.jsxs)(w.v2,{id:r,animation:"fade",children:[o&&(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return a(t.item)},children:[(0,v.jsx)(P.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Rename"})]}),(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return s(t.item)},children:[(0,v.jsx)(_.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Download"})]}),o&&[(0,v.jsx)(w.Z0,{},"separator"),(0,v.jsxs)(w.ck,{onClick:function(e){var t=e.props;return i([t.item])},children:[(0,v.jsx)(T,{size:"tiny",stroke:"red"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Delete"})]},"delete")]]})},A=r(4427);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var U=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:A.Z},e))},M=r(44292),B=r(68464),W=r(52492);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var q=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:W.Z},e))};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y=function(e){var t=e.id,r=void 0===t?"":t,n=(0,p.HN)(),s=n.columns,a=n.selectedItems,i=n.setSelectedItems,o=n.setView,l=n.setSortBy,d=n.setSortByOrder,u=n.addNewFolderPlaceholder;return(0,v.jsxs)(w.v2,{id:r,animation:"fade",children:[(0,v.jsxs)(w.ck,{onClick:function(e){return function(){u(arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1)}(e.props.index)},children:[(0,v.jsx)(U,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"New folder"})]}),(0,v.jsx)(w.Z0,{}),(0,v.jsxs)(w.ck,{onClick:function(e){return function(e){var t=s[e].items.filter((function(e){return e.type===m.fh.FILE})).map((function(t){return H(H({},t),{},{columnIndex:e})})),r=(0,c.compact)(t.map((function(e){return e.id})));if(a.filter((function(e){return r.includes(e.id)})).length===t.length){var n=a.filter((function(e){return!r.includes(e.id)}));i(n)}else{var o=(0,c.uniqBy)(a.concat(t),"id");i(o)}}(e.props.index)},children:[(0,v.jsx)(k.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Select all items"})]}),(0,v.jsxs)(w.rS,{label:(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(M.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"text-xs",children:"View"})]}),arrow:(0,v.jsx)(O.Z,{size:"tiny"}),children:[(0,v.jsx)(w.ck,{onClick:function(){return o(m.De.COLUMNS)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"As columns"})}),(0,v.jsx)(w.ck,{onClick:function(){return o(m.De.LIST)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"As list"})})]}),(0,v.jsxs)(w.rS,{label:(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(B.Z,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Sort by"})]}),arrow:(0,v.jsx)(O.Z,{size:"tiny"}),children:[(0,v.jsx)(w.ck,{onClick:function(){return l(m.Ye.NAME)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Name"})}),(0,v.jsx)(w.ck,{onClick:function(){return l(m.Ye.CREATED_AT)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Last created"})}),(0,v.jsx)(w.ck,{onClick:function(){return l(m.Ye.UPDATED_AT)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Last modified"})}),(0,v.jsx)(w.ck,{onClick:function(){return l(m.Ye.LAST_ACCESSED_AT)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Last accessed"})})]}),(0,v.jsxs)(w.rS,{label:(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(q,{size:"tiny"}),(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Sort by order"})]}),arrow:(0,v.jsx)(O.Z,{size:"tiny"}),children:[(0,v.jsx)(w.ck,{onClick:function(){return d(m.sd.ASC)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Ascending"})}),(0,v.jsx)(w.ck,{onClick:function(){return d(m.sd.DESC)},children:(0,v.jsx)("span",{className:"ml-2 text-xs",children:"Descending"})})]})]})},Q=r(46578),K=r(90907),$=r(30335),J=r(89301),X=r(51452),ee=r(44285),te=r(14971),re=r(52979),ne=r(9922);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:ne.Z},e))},ie=r(77909);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ce=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:ie.Z},e))},le=r(96026);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ue=function(e){return(0,v.jsx)(C.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:le.Z},e))},pe=r(33769),me=r(2674),fe=r(43555),he=r(38480),xe=r(64116),ve=r(33954),je=r(20796);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=function(e){var t,r=e.item,n=e.view,s=e.columnIndex,i=(0,p.HN)(),l=i.renameFile,u=i.renameFolder,f=i.addNewFolder,h=(0,d.useRef)(null),x=(0,d.useState)(r.name),j=x[0],g=x[1],b=function(){var e=(0,a.Z)(o().mark((function e(t,n){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(n.preventDefault(),n.stopPropagation()),r.type!==m.fh.FILE){e.next=6;break}return e.next=4,l(r,t,s);case 4:e.next=7;break;case 6:(0,c.has)(r,"id")?(a=be(be({},r),{},{columnIndex:s}),u(a,t,s)):f(t,s);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){h.current&&h.current.select();var e=function(e){"Escape"===e.key&&(void 0!==(null===r||void 0===r?void 0:r.id)?b(r.name):f("",s))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,v.jsx)("div",{className:"storage-row flex items-center justify-between rounded bg-gray-500",children:(0,v.jsxs)("div",{className:"flex h-full flex-grow items-center px-2.5",children:[(0,v.jsx)("div",{className:"",children:(0,v.jsx)(ke,{view:n,status:r.status,fileType:r.type,mimeType:null===(t=r.metadata)||void 0===t?void 0:t.mimetype})}),(0,v.jsxs)("form",{className:"h-9",onSubmit:function(e){return b(j,e)},children:[(0,v.jsx)("input",{autoFocus:!0,ref:h,className:"storage-row-input ml-3 h-full bg-inherit p-0 px-1 text-sm",type:"text",value:j,onChange:function(e){return g(e.target.value)},onBlur:function(e){return b(j,e)}}),(0,v.jsx)("button",{className:"hidden",type:"submit",onClick:function(e){return b(j,e)}})]})]})})};function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke=function(e){var t=e.view,r=e.status,n=e.fileType,s=e.mimeType;if(t===m.De.LIST&&r===m.R9.LOADING)return(0,v.jsx)(te.Z,{size:16,strokeWidth:2,className:"animate-spin"});if(n===m.fh.BUCKET||n===m.fh.FOLDER){var a=n===m.fh.BUCKET?"".concat(je.GW,"/img/bucket-filled.svg"):n===m.fh.FOLDER?"".concat(je.GW,"/img/folder-filled.svg"):"".concat(je.GW,"/img/file-filled.svg");return(0,v.jsx)(he.Z,{src:a,preProcessor:function(e){return e.replace(/svg/,'svg class="w-4 h-4 text-color-inherit opacity-75"')}})}return null!==s&&void 0!==s&&s.includes("image")?(0,v.jsx)(re.Z,{size:16,strokeWidth:2}):null!==s&&void 0!==s&&s.includes("audio")?(0,v.jsx)(ae,{size:16,strokeWidth:2}):null!==s&&void 0!==s&&s.includes("video")?(0,v.jsx)(ce,{size:16,strokeWidth:2}):(0,v.jsx)(ue,{size:16,strokeWidth:2})},Oe=function(e){var t,r=e.index,n=e.item,s=void 0===n?{}:n,i=e.view,l=void 0===i?m.De.COLUMNS:i,d=e.columnIndex,u=void 0===d?0:d,f=e.selectedItems,h=void 0===f?[]:f,x=e.openedFolders,j=void 0===x?[]:x,g=e.selectedFilePreview,b=void 0===g?{}:g,y=e.onCopyUrl,S=(0,p.HN)(),C=S.getFileUrl,Z=S.popColumnAtIndex,I=S.pushOpenedFolderAtIndex,D=S.popOpenedFoldersAtIndex,L=S.setFilePreview,z=S.closeFilePreview,A=S.clearSelectedItems,F=S.selectedBucket,U=S.setSelectedItems,M=S.setSelectedItemsToDelete,B=S.setSelectedItemToRename,W=S.setSelectedItemsToMove,G=S.setSelectedFileCustomExpiry,q=S.fetchFolderContents,V=S.downloadFile,H=S.downloadFolder,Y=S.selectRangeItems,Q=F.public,$=Ne(Ne({},s),{},{columnIndex:u}),J=void 0!==(0,c.find)(h,s),X=j.length>u&&(0,c.isEqual)(j[u],s),re=!(0,c.isEmpty)(b)&&(0,c.isEqual)(b.id,s.id),ne=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*"),se=(0,w.av)().show,ae=function(){var e=(0,a.Z)(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(t),D(t-1),L(r),A();case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ie=function(){var e=(0,a.Z)(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(),A(t+1),D(t-1),I(r,t),e.next=6,q(r.id,r.name,t);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),oe=s.type===m.fh.FOLDER?[].concat((0,ee.Z)(ne?[{name:"Rename",icon:(0,v.jsx)(P.Z,{size:"tiny"}),onClick:function(){return B($)}}]:[]),[{name:"Download",icon:(0,v.jsx)(_.Z,{size:"tiny"}),onClick:function(){return H($)}}],(0,ee.Z)(ne?[{name:"Separator",icon:void 0,onClick:void 0},{name:"Delete",icon:(0,v.jsx)(T,{size:"tiny"}),onClick:function(){return M([$])}}]:[])):[].concat((0,ee.Z)(s.isCorrupted?[]:[].concat((0,ee.Z)(Q?[{name:"Get URL",icon:(0,v.jsx)(k.Z,{size:"tiny"}),onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.t1=$.name,e.next=4,C($);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]:[{name:"Get URL",icon:(0,v.jsx)(k.Z,{size:"tiny"}),children:[{name:"Expire in 1 week",onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.t1=$.name,e.next=4,C($,m.Qo.WEEK);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Expire in 1 month",onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.t1=$.name,e.next=4,C($,m.Qo.MONTH);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Expire in 1 year",onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.t1=$.name,e.next=4,C($,m.Qo.YEAR);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Custom expiry",onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G($));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]}]),(0,ee.Z)(ne?[{name:"Rename",icon:(0,v.jsx)(P.Z,{size:"tiny"}),onClick:function(){return B($)}},{name:"Move",icon:(0,v.jsx)(E,{size:"tiny"}),onClick:function(){return W([$])}},{name:"Download",icon:(0,v.jsx)(_.Z,{size:"tiny"}),onClick:function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V($);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"Separator",icon:void 0,onClick:void 0}]:[]))),(0,ee.Z)(ne?[{name:"Delete",icon:(0,v.jsx)(T,{size:"tiny"}),onClick:function(){return M([$])}}]:[])),ce=s.metadata?(0,ve.td)(s.metadata.size):"-",le=s.metadata?s.metadata.mimetype:"-",de=s.created_at?new Date(s.created_at).toLocaleString():"-",ue=s.updated_at?new Date(s.updated_at).toLocaleString():"-",he=function(e,t){se(e,{id:t===m.fh.FILE?m.l6.STORAGE_ITEM:m.l6.STORAGE_FOLDER,props:{item:$}})},je=l===m.De.LIST&&s.isCorrupted?"calc(100% - 60px)":l!==m.De.LIST||s.isCorrupted?"100%":"calc(100% - 50px)";return s.status===m.R9.EDITING?(0,v.jsx)(ye,{view:l,item:s,columnIndex:u}):(0,v.jsx)("div",{className:"h-full border-b dark:border-dark",onContextMenu:function(e){e.stopPropagation(),s.type===m.fh.FILE?he(e,m.fh.FILE):he(e,m.fh.FOLDER)},children:(0,v.jsxs)("div",{className:["storage-row group flex h-full items-center px-2.5","hover:bg-panel-footer-light dark:hover:bg-panel-footer-dark","".concat(X?"bg-scale-400":""),"".concat(re?"bg-green-500 hover:bg-green-500 dark:hover:bg-green-500":""),"".concat(s.status!==m.R9.LOADING?"cursor-pointer":"")].join(" "),onClick:function(e){e.stopPropagation(),e.preventDefault(),s.status===m.R9.LOADING||X||re||(s.type===m.fh.FOLDER||s.type===m.fh.BUCKET?ie(u,s):ae(u,s))},children:[(0,v.jsxs)("div",{className:["flex items-center",l===m.De.LIST?"w-[40%] min-w-[250px]":"w-[90%]"].join(" "),children:[(0,v.jsxs)("div",{className:"relative w-[30px]",onClick:function(e){return e.stopPropagation()},children:[!J&&(0,v.jsx)("div",{className:"absolute ".concat(s.type===m.fh.FILE?"group-hover:hidden":""),style:{top:"2px"},children:(0,v.jsx)(ke,{view:l,status:s.status,fileType:s.type,mimeType:null===(t=s.metadata)||void 0===t?void 0:t.mimetype})}),(0,v.jsx)(K.Z,{label:"",className:"w-full ".concat(s.type!==m.fh.FILE?"invisible":""," ").concat(J?"opacity-100":"opacity-0 group-hover:opacity-100"),checked:J,onChange:function(e){e.stopPropagation(),e.nativeEvent.shiftKey&&0!==h.length?Y(u,r):(void 0!==(0,c.find)(h,(function(e){return $.id===e.id}))?U(h.filter((function(e){return $.id!==e.id}))):U([].concat((0,ee.Z)(h),[$])),z())}})]}),(0,v.jsx)("p",{title:s.name,className:"truncate text-sm",style:{width:je},children:s.name}),s.isCorrupted&&(0,v.jsxs)(xe.fC,{delayDuration:0,children:[(0,v.jsx)(xe.xz,{children:(0,v.jsx)(pe.Z,{size:18,strokeWidth:2,className:"text-scale-1000"})}),(0,v.jsx)(xe.h_,{children:(0,v.jsxs)(xe.VY,{side:"bottom",children:[(0,v.jsx)(xe.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"File is corrupted, please delete and reupload again."})})]})})]})]}),l===m.De.LIST&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{className:"w-[11%] min-w-[100px] truncate text-sm",children:ce}),(0,v.jsx)("p",{className:"w-[14%] min-w-[100px] truncate text-sm",children:le}),(0,v.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:de}),(0,v.jsx)("p",{className:"w-[15%] min-w-[160px] truncate text-sm",children:ue})]}),(0,v.jsx)("div",{className:"flex items-center justify-end ".concat(l===m.De.LIST?"flex-grow":"w-[10%]"),onClick:function(e){return e.stopPropagation()},children:s.status===m.R9.LOADING?(0,v.jsx)(te.Z,{className:"animate-spin ".concat(l===m.De.LIST?"invisible":""),size:16,strokeWidth:2}):(0,v.jsx)(me.ZP,{side:"bottom",align:"end",overlay:[oe.map((function(e){var t,r,n;return(null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:[]).length>0?(0,v.jsx)(me.ZP,{isNested:!0,side:"right",align:"start",overlay:null===(r=null!==(n=null===e||void 0===e?void 0:e.children)&&void 0!==n?n:[])||void 0===r?void 0:r.map((function(e){return(0,v.jsx)(me.ZP.Item,{onClick:e.onClick,children:e.name},e.name)})),children:(0,v.jsxs)("div",{className:["flex items-center justify-between px-4 py-1.5 text-xs text-scale-1100","w-full focus:bg-scale-300 dark:focus:bg-scale-500 focus:text-scale-1200"].join(" "),children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon,(0,v.jsx)("p",{children:e.name})]}),(0,v.jsx)(O.Z,{size:"tiny"})]})},e.name):"Separator"===e.name?(0,v.jsx)(me.ZP.Separator,{},"row-separator"):(0,v.jsx)(me.ZP.Item,{icon:e.icon||(0,v.jsx)(v.Fragment,{}),onClick:e.onClick,children:e.name},e.name)}))],children:(0,v.jsx)("div",{className:"storage-row-menu opacity-0",children:(0,v.jsx)(fe.Z,{size:16,strokeWidth:2})})})})]})})},Pe=function(e){var t=e.isOpen,r=e.onDragLeave,n=e.onDrop,s=e.folderIsEmpty;return(0,v.jsx)($.u,{show:t,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",className:"h-full w-full absolute top-0",children:(0,v.jsx)("div",{onDragLeave:r,onDrop:n,className:"absolute top-0 flex h-full w-full items-center justify-center",style:{backgroundColor:s?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.2)"},children:!s&&(0,v.jsxs)("div",{className:"w-3/4 h-32 border-2 border-dashed border-gray-400 rounded-md flex flex-col items-center justify-center p-6 pointer-events-none",style:{backgroundColor:"rgba(0,0,0,0.4)"},children:[(0,v.jsx)(Q.Z,{className:"text-white pointer-events-none",size:20,strokeWidth:2}),(0,v.jsx)("p",{className:"text-center text-sm  text-white mt-2 pointer-events-none",children:"Drop your files to upload to this folder"})]})})})},Se=function(e){var t=e.index,r=void 0===t?0:t,n=e.view,s=void 0===n?m.De.COLUMNS:n,a=e.column,i=e.fullWidth,o=void 0!==i&&i,l=e.openedFolders,u=void 0===l?[]:l,p=e.selectedItems,f=void 0===p?[]:p,h=e.selectedFilePreview,x=void 0===h?{}:h,j=e.onFilesUpload,g=void 0===j?c.noop:j,b=e.onSelectAllItemsInColumn,y=void 0===b?c.noop:b,N=e.onSelectColumnEmptySpace,k=void 0===N?c.noop:N,O=e.onColumnLoadMore,P=void 0===O?c.noop:O,S=e.onCopyUrl,C=void 0===S?c.noop:S,Z=(0,d.useState)(!1),E=Z[0],_=Z[1],I=(0,d.useRef)(null);(0,d.useEffect)((function(){if(I){var e=I.current,t=e.scrollHeight,r=e.clientHeight;t>r&&(I.current.scrollTop+=t-r)}}),[a]);var D=f.length>0,T=a.items.map((function(e){return e.id})),R=a.items.filter((function(e){return e.type===m.fh.FILE})),L=f.filter((function(e){return T.includes(e.id)})).filter((function(e){return e.type===m.fh.FILE})),z=a.items,A=(0,c.sum)(z.map((function(e){return(0,c.get)(e,["metadata","size"],0)}))),F=(0,w.av)().show,U=function(e){e&&(e.stopPropagation(),e.preventDefault(),"dragover"!==e.type||E||_(!0))},M=function(){return(0,v.jsx)(K.Z,{label:"",className:"-mt-0.5",checked:0!==R.length&&L.length===R.length,disabled:0===R.length,onChange:function(){return y(r)}})};return(0,v.jsxs)("div",{ref:I,className:"\n        ".concat(o?"w-full":"w-64 border-r border-panel-border-light dark:border-panel-border-dark","\n        ").concat((m.De.COLUMNS,""),"\n        hide-scrollbar relative flex flex-shrink-0 flex-col overflow-auto\n      "),onContextMenu:function(e){F(e,{id:m.l6.STORAGE_COLUMN,props:{index:r}})},onDragOver:U,onDrop:function(e){U(e),g(e,r)},onClick:function(e){var t=(0,c.get)(e.target,["className"],"");"string"===typeof t&&t.includes("react-contexify")||k(r)},children:[s===m.De.COLUMNS&&(0,v.jsx)("div",{className:"sticky top-0 z-10 mb-0 flex items-center bg-table-header-light px-2.5 dark:bg-table-header-dark ".concat(D?"h-10 py-3 opacity-100":"h-0 py-0 opacity-0"," transition-all duration-200"),onClick:function(e){return e.stopPropagation()},children:R.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(M,{}),(0,v.jsxs)("p",{className:"text-sm text-scale-1100",children:["Select all ",R.length," files"]})]}):(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"No files available for selection"})}),s===m.De.LIST&&(0,v.jsxs)("div",{className:" sticky top-0 z-10 flex min-w-min items-center border-b border-panel-border-light bg-panel-footer-light px-2.5 py-2 dark:border-panel-border-dark dark:bg-panel-footer-dark ",children:[(0,v.jsxs)("div",{className:"flex w-[40%] min-w-[250px] items-center",children:[(0,v.jsx)(M,{}),(0,v.jsx)("p",{className:"text-sm",children:"Name"})]}),(0,v.jsx)("p",{className:"w-[11%] min-w-[100px] text-sm",children:"Size"}),(0,v.jsx)("p",{className:"w-[14%] min-w-[100px] text-sm",children:"Type"}),(0,v.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Created at"}),(0,v.jsx)("p",{className:"w-[15%] min-w-[160px] text-sm",children:"Last modified at"})]}),a.status===m.R9.LOADING&&(0,v.jsxs)("div",{className:"\n            ".concat(o?"w-full":"w-64 border-r border-gray-500","\n            px-2 py-1 my-1 flex flex-shrink-0 flex-col space-y-2 overflow-auto\n          "),children:[(0,v.jsx)(X.Z,{}),(0,v.jsx)(X.Z,{}),(0,v.jsx)(X.Z,{})]}),(0,v.jsx)(J.Z,{items:z,itemProps:{view:s,columnIndex:r,selectedItems:f,openedFolders:u,selectedFilePreview:x,onCopyUrl:C},ItemComponent:Oe,getItemSize:function(e){return 0!==e&&e===z.length?85:37},hasNextPage:a.status!==m.R9.LOADING&&a.hasMoreItems,isLoadingNextPage:a.isLoadingMoreItems,onLoadNextPage:function(){return P(r,a)}}),0===a.items.length&&a.status!==m.R9.LOADING&&(0,v.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,v.jsx)("img",{src:"".concat(je.GW,"/img/storage-placeholder.svg"),className:"opacity-75 pointer-events-none"}),(0,v.jsx)("p",{className:"my-3 opacity-75",children:"Drop your files here"}),(0,v.jsx)("p",{className:"w-40 text-center text-sm text-scale-1100",children:'Or upload them via the "Upload file" button above'})]}),(0,v.jsx)(Pe,{isOpen:E,onDragLeave:function(){return _(!1)},onDrop:function(){return _(!1)},folderIsEmpty:0===a.items.filter((function(e){return e.status!==m.R9.LOADING})).length}),s===m.De.LIST&&(0,v.jsx)("div",{className:" sticky bottom-0 z-10 flex min-w-min items-center bg-panel-footer-light px-2.5 py-2 dark:bg-panel-footer-dark ",children:(0,v.jsxs)("p",{className:"text-sm",children:[(0,ve.td)(A)," for ",z.length," items"]})})]})},Ce=(0,l.Pi)((function(e){var t=e.view,r=void 0===t?m.De.COLUMNS:t,n=e.columns,s=void 0===n?[]:n,a=e.openedFolders,i=void 0===a?[]:a,o=e.selectedItems,l=void 0===o?[]:o,u=e.selectedFilePreview,p=void 0===u?{}:u,f=e.onFilesUpload,h=void 0===f?c.noop:f,x=e.onSelectAllItemsInColumn,j=void 0===x?c.noop:x,g=e.onSelectColumnEmptySpace,b=void 0===g?c.noop:g,y=e.onColumnLoadMore,w=void 0===y?c.noop:y,N=e.onCopyUrl,k=void 0===N?c.noop:N,O=(0,d.useRef)(null);return(0,d.useEffect)((function(){if(O){var e=O.current,t=e.scrollWidth,r=e.clientWidth;t>r&&(O.current.scrollLeft+=t-r)}}),[s]),(0,v.jsxs)("div",{ref:O,className:"file-explorer flex flex-grow overflow-x-auto justify-between h-full w-full",children:[(0,v.jsx)(Y,{id:m.l6.STORAGE_COLUMN}),(0,v.jsx)(L,{id:m.l6.STORAGE_ITEM,onCopyUrl:k}),(0,v.jsx)(z,{id:m.l6.STORAGE_FOLDER}),r===m.De.COLUMNS?(0,v.jsx)("div",{className:"flex",children:s.map((function(e,t){return(0,v.jsx)(Se,{index:t,view:r,column:e,openedFolders:i,selectedItems:l,selectedFilePreview:p,onFilesUpload:h,onSelectAllItemsInColumn:j,onSelectColumnEmptySpace:b,onColumnLoadMore:w,onCopyUrl:k},"column-".concat(t))}))}):r===m.De.LIST?(0,v.jsx)(v.Fragment,{children:s.length>0&&(0,v.jsx)(Se,{fullWidth:!0,index:s.length-1,view:r,column:s[s.length-1],selectedItems:l,selectedFilePreview:p,onFilesUpload:h,onSelectAllItemsInColumn:j,onSelectColumnEmptySpace:b,onColumnLoadMore:w,onCopyUrl:k})}):(0,v.jsxs)("div",{children:["Unknown view: ",r]})]})})),Ze=r(93986),Ee=r(86673),_e=r(95992),Ie=r(2686),De=r(62929),Te=r(1296),Re=r(70946),Le=function(e){var t=e.loading,r=e.breadcrumbs,n=e.togglePathEdit;return(0,v.jsx)("div",{className:"group ".concat(t?"":"cursor-pointer"),onClick:function(){return t.isLoading?{}:n()},children:t.isLoading?(0,v.jsxs)("div",{className:"ml-2 flex items-center",children:[(0,v.jsx)(te.Z,{size:16,strokeWidth:2,className:"animate-spin"}),(0,v.jsx)("p",{className:"ml-3 text-sm",children:t.message})]}):(0,v.jsxs)("div",{className:"flex cursor-pointer items-center",children:[(0,v.jsx)("p",{className:"ml-3 text-sm truncate",children:r[r.length-1]||""}),(0,v.jsx)("div",{className:"ml-3 flex items-center space-x-2 opacity-0 transition group-hover:opacity-100",children:(0,v.jsx)(h.z,{type:"text",icon:(0,v.jsx)(Ze.Z,{}),children:"Navigate"})})]})})},ze=function(e){var t=e.loading,r=e.breadcrumbs,n=e.selectBreadcrumb,s="...",a=r.map((function(e,t){return{name:e,index:t}})),i=a.length<=5?a:a.slice(0,2).concat([{name:s,index:-1}]).concat(a.slice(a.length-2,a.length));return t.isLoading?(0,v.jsxs)("div",{className:"ml-2 flex items-center",children:[(0,v.jsx)(te.Z,{size:16,strokeWidth:2,className:"animate-spin"}),(0,v.jsx)("p",{className:"ml-3 text-sm",children:t.message})]}):(0,v.jsx)("div",{className:"ml-3 flex items-center",children:i.map((function(e,t){return(0,v.jsxs)("div",{className:"flex items-center",children:[0!==t&&(0,v.jsx)(O.Z,{size:10,strokeWidth:2,className:"mx-3"}),(0,v.jsx)("p",{className:"truncate text-sm ".concat(e.name!==s?"cursor-pointer":""),style:{maxWidth:"6rem"},onClick:function(){return e.name!==s?n(e.index):{}},children:e.name},e.name)]},e.name)}))})},Ae=function(e){var t=e.itemSearchString,r=void 0===t?"":t,n=e.setItemSearchString,s=void 0===n?function(){}:n,i=e.onFilesUpload,l=void 0===i?function(){}:i,u=(0,d.useState)(""),f=u[0],x=u[1],j=(0,d.useState)(""),g=j[0],y=j[1],w=(0,d.useState)({isLoading:!1,message:""}),k=w[0],O=w[1],P=(0,d.useState)(!1),S=P[0],C=P[1],Z=(0,d.useState)(!1),E=Z[0],_=Z[1],I=(0,d.useState)(!1),D=I[0],T=I[1],L=(0,d.useRef)(null),z=(0,d.useRef)(null),A=(0,p.HN)(),F=A.view,M=A.setView,W=A.columns,G=A.sortBy,V=A.setSortBy,H=A.sortByOrder,Y=A.setSortByOrder,K=A.popColumn,$=A.popColumnAtIndex,J=A.popOpenedFolders,X=A.fetchFoldersByPath,ee=A.refetchAllOpenedFolders,te=A.addNewFolderPlaceholder,re=A.clearOpenedFolders,ne=A.closeFilePreview,se=W.map((function(e){return e.name})),ae=W.length<=1,ie=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*");(0,d.useEffect)((function(){r&&y(r)}),[]),(0,d.useEffect)((function(){(0,c.isEqual)(z.current,se)||(C(!1),z.current=se)}),[se]);var oe=(0,d.useCallback)((0,c.debounce)(s,300),[]),ce=function(){var e=(0,a.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=6;break}$(0),re(),ne(),e.next=11;break;case 6:return r=t.join("/"),O({isLoading:!0,message:"Navigating to ".concat(r,"...")}),e.next=10,X(t);case 10:O({isLoading:!1,message:""});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){y(""),T(!1),s("")},de=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,ee();case 3:_(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:" flex h-[40px] items-center justify-between rounded-t-md border-b border-panel-border-light bg-panel-header-light px-2 dark:border-panel-border-dark dark:bg-panel-header-dark",children:[(0,v.jsxs)("div",{className:"flex items-center ".concat(S?"w-1/2":""),children:[se.length>0&&(0,v.jsx)(h.z,{icon:(0,v.jsx)(Ee.Z,{size:16,strokeWidth:2}),size:"tiny",type:"text",className:se.length>1?"opacity-100":"opacity-25",disabled:ae,onClick:function(){C(!1),K(),J(),ne()}}),S?(0,v.jsx)("form",{className:"ml-2 flex-grow",children:(0,v.jsx)(b.Z,{autoFocus:!0,type:"text",size:"small",value:f,onChange:function(e){x(e.target.value)},placeholder:"e.g Parent Folder/Child Folder",actions:[(0,v.jsx)(h.z,{type:"default",htmlType:"button",onClick:function(){C(!1)},children:"Cancel"},"cancelPath"),(0,v.jsx)(h.z,{type:"primary",htmlType:"submit",onClick:function(e){e&&(e.preventDefault(),e.stopPropagation()),C(!1),ce((0,c.compact)(f.split("/")))},children:"Go to folder"},"setPath")]},"pathSet")}):F===m.De.COLUMNS?(0,v.jsx)(Le,{loading:k,breadcrumbs:se,togglePathEdit:function(){C(!0),x(se.slice(1).join("/")),D&&le()}}):(0,v.jsx)(ze,{loading:k,breadcrumbs:se,selectBreadcrumb:function(e){$(e)}})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,v.jsx)(h.z,{className:"mr-2",size:"tiny",icon:(0,v.jsx)(_e.Z,{}),type:"text",loading:E,onClick:de,children:"Reload"}),(0,v.jsx)(me.ZP,{overlay:[(0,v.jsxs)(me.ZP.RadioGroup,{value:F,onChange:M,children:[(0,v.jsx)(me.ZP.Radio,{value:m.De.COLUMNS,children:"Columns"}),(0,v.jsx)(me.ZP.Radio,{value:m.De.LIST,children:"List"})]},"viewOptions")],children:(0,v.jsx)(h.z,{asChild:!0,icon:"LIST"===F?(0,v.jsx)(Ie.Z,{size:16,strokeWidth:2}):(0,v.jsx)(De.Z,{size:16,strokeWidth:2}),type:"text",disabled:0===se.length,onChange:M,children:(0,v.jsx)("span",{children:"View as"})})}),(0,v.jsx)(me.ZP,{overlay:[(0,v.jsxs)(me.ZP.RadioGroup,{value:G,onChange:V,children:[(0,v.jsx)(me.ZP.Radio,{value:m.Ye.NAME,children:"Name"}),(0,v.jsx)(me.ZP.Radio,{value:m.Ye.CREATED_AT,children:"Time created"}),(0,v.jsx)(me.ZP.Radio,{value:m.Ye.UPDATED_AT,children:"Time modified"}),(0,v.jsx)(me.ZP.Radio,{value:m.Ye.LAST_ACCESSED_AT,children:"Time last accessed"})]},"sortOptions")],children:(0,v.jsx)(h.z,{asChild:!0,icon:(0,v.jsx)(B.Z,{size:16,strokeWidth:2}),type:"text",disabled:0===se.length,children:(0,v.jsx)("span",{children:"Sort by"})})}),(0,v.jsx)(me.ZP,{overlay:[(0,v.jsxs)(me.ZP.RadioGroup,{value:H,onChange:Y,children:[(0,v.jsx)(me.ZP.Radio,{value:m.sd.ASC,children:"Ascending"}),(0,v.jsx)(me.ZP.Radio,{value:m.sd.DESC,children:"Descending"})]},"sortOrderOptions")],children:(0,v.jsx)(h.z,{asChild:!0,icon:H===m.sd.DESC?(0,v.jsx)(B.Z,{size:16,strokeWidth:2}):(0,v.jsx)(q,{size:16,strokeWidth:2}),type:"text",disabled:0===se.length,children:(0,v.jsx)("span",{children:"Sort Order"})})})]}),(0,v.jsx)("div",{className:"h-6 border-r border-panel-border-light dark:border-panel-border-dark"}),(0,v.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,v.jsx)("div",{className:"hidden",children:(0,v.jsx)("input",{ref:L,type:"file",multiple:!0,onChange:l})}),(0,v.jsxs)(xe.fC,{delayDuration:0,children:[(0,v.jsx)(xe.xz,{className:"w-full",children:(0,v.jsx)(h.z,{icon:(0,v.jsx)(Q.Z,{size:16,strokeWidth:2}),type:"text",disabled:!ie||0===se.length,onClick:function(){L.current&&L.current.click()},children:"Upload files"})}),!ie&&(0,v.jsx)(xe.h_,{children:(0,v.jsxs)(xe.VY,{side:"bottom",children:[(0,v.jsx)(xe.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to upload files"})})]})})]}),(0,v.jsxs)(xe.fC,{delayDuration:0,children:[(0,v.jsx)(xe.xz,{className:"w-full",children:(0,v.jsx)(h.z,{icon:(0,v.jsx)(U,{size:16,strokeWidth:2}),type:"text",disabled:!ie||0===se.length,onClick:function(){return te(-1)},children:"Create folder"})}),!ie&&(0,v.jsx)(xe.h_,{children:(0,v.jsxs)(xe.VY,{side:"bottom",children:[(0,v.jsx)(xe.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to create folders"})})]})})]})]}),F===m.De.LIST&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"h-6 border-r border-panel-border-light dark:border-panel-border-dark"}),(0,v.jsx)("div",{className:"flex items-center",children:D?(0,v.jsx)(b.Z,{size:"tiny",autoFocus:!0,className:"w-52",icon:(0,v.jsx)(Te.Z,{size:"tiny",strokeWidth:2}),actions:[(0,v.jsx)(Re.Z,{className:"mx-2 cursor-pointer text-scale-1200",size:"tiny",strokeWidth:2,onClick:le},"close")],placeholder:"Search for a file or folder",type:"text",value:g,onChange:function(e){y(e.target.value),oe(e.target.value)}}):(0,v.jsx)(h.z,{icon:(0,v.jsx)(Te.Z,{size:16,strokeWidth:2}),size:"tiny",type:"text",onClick:function(){C(!1),T(!0)}})})]})]})]})},Fe=function(){var e=(0,p.HN)(),t=e.selectedItems,r=e.downloadFile,n=e.downloadSelectedFiles,s=e.clearSelectedItems,i=e.setSelectedItemsToDelete,c=e.setSelectedItemsToMove;return(0,v.jsxs)("div",{className:"z-10 flex h-[40px] items-center rounded-t-md bg-brand-700 px-2 py-1 shadow dark:bg-brand-600",children:[(0,v.jsx)(h.z,{icon:(0,v.jsx)(Re.Z,{size:16,strokeWidth:2}),type:"text",onClick:function(){return s()}}),(0,v.jsxs)("div",{className:"ml-4 flex items-center space-x-3",children:[(0,v.jsxs)("p",{className:"mb-0 text-sm text-scale-1200",children:[(0,v.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:t.length})," items selected"]}),(0,v.jsx)(h.z,{icon:(0,v.jsx)(_.Z,{size:16,strokeWidth:2}),type:"primary",onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.length){e.next=5;break}return e.next=3,r(t[0]);case 3:e.next=7;break;case 5:return e.next=7,n(t);case 7:case"end":return e.stop()}}),e)}))),children:"Download"}),(0,v.jsx)("div",{className:"border-r border-green-800 py-3 opacity-50"}),(0,v.jsx)(h.z,{icon:(0,v.jsx)(T,{size:16,strokeWidth:2}),type:"primary",onClick:function(){return i(t)},children:"Delete"}),(0,v.jsx)(h.z,{icon:(0,v.jsx)(E,{size:16,strokeWidth:2}),type:"primary",onClick:function(){return c(t)},children:"Move"})]})]})},Ue=function(e){var t,r=e.bucketName,n=void 0===r?"":r,s=e.visible,a=void 0!==s&&s,i=e.selectedItemsToMove,o=void 0===i?[]:i,c=e.onSelectCancel,l=void 0===c?function(){}:c,u=e.onSelectMove,p=void 0===u?function(){}:u,m=(0,d.useState)(!1),x=m[0],j=m[1],g=(0,d.useState)(""),y=g[0],w=g[1];(0,d.useEffect)((function(){j(!1),w("")}),[a]);var N=o.length>1,k=N?"Moving ".concat(o.length," items within ").concat(n):1===o.length?"Moving ".concat(null===(t=o[0])||void 0===t?void 0:t.name," within ").concat(n):"",O="Enter the path to where you'd like to move the file".concat(N?"s":""," to."),P=function(e){e&&e.preventDefault(),j(!0);var t="/"===y[0]?y.slice(1):y;p(t)};return(0,v.jsx)(f.C,{visible:a,header:k,description:O,size:"medium",onCancel:l,customFooter:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(h.z,{type:"default",onClick:l,children:"Cancel"}),(0,v.jsx)(h.z,{type:"primary",loading:x,onClick:P,children:x?"Moving files":"Move files"})]}),children:(0,v.jsx)(f.C.Content,{children:(0,v.jsxs)("form",{className:"my-4",children:[(0,v.jsx)("div",{className:"relative flex items-center",children:(0,v.jsx)(b.Z,{autoFocus:!0,label:"Path to new directory in ".concat(n),type:"text",className:"w-full",placeholder:"e.g folder1/subfolder2",value:y,descriptionText:"Leave blank to move items to the root of the bucket",onChange:function(e){return w(e.target.value)}})}),(0,v.jsx)("button",{className:"hidden",type:"submit",onClick:P})]})})})},Me=r(51664),Be=function(e){var t=e.mimeType,r=e.previewUrl;return t&&r?"loading"===r?(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center text-scale-900",children:(0,v.jsx)(te.Z,{size:14,strokeWidth:2,className:"animate-spin"})}):"skipped"===r?(0,v.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center",children:[(0,v.jsx)(he.Z,{src:"".concat(je.GW,"/img/file-filled.svg"),preProcessor:function(e){return e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}}),(0,v.jsx)("p",{className:"mt-2 w-2/5 text-center text-sm",children:"File size is too large to preview in the explorer"})]}):t.includes("image")?(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-contain bg-center bg-no-repeat",style:{backgroundImage:"url('".concat(r,"')")}}):t.includes("audio")?(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center px-10",children:(0,v.jsxs)("audio",{controls:!0,style:{width:"inherit"},children:[(0,v.jsx)("source",{src:r,type:"audio/mpeg"}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"Your browser does not support the audio element."})]},r)}):t.includes("video")?(0,v.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,v.jsxs)("video",{controls:!0,style:{maxHeight:"100%"},children:[(0,v.jsx)("source",{src:r,type:"video/mp4"}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"Your browser does not support the video tag."})]},r)}):(0,v.jsx)(he.Z,{src:"".concat(je.GW,"/img/file-filled.svg"),preProcessor:function(e){return e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}}):(0,v.jsx)(he.Z,{src:"".concat(je.GW,"/img/file-filled.svg"),preProcessor:function(e){return e.replace(/svg/,'svg class="mx-auto w-32 h-32 text-color-inherit opacity-75"')}})},We=function(e){var t=e.onCopyUrl,r=(0,p.HN)(),n=r.getFileUrl,s=r.downloadFile,i=r.selectedBucket,l=r.selectedFilePreview,d=r.closeFilePreview,u=r.setSelectedItemsToDelete,f=r.setSelectedFileCustomExpiry,x=!(0,c.isEmpty)(l),j=l.metadata?(0,ve.td)(l.metadata.size):null,g=l.metadata?l.metadata.mimetype:null,b=l.created_at?new Date(l.created_at).toLocaleString():"Unknown",y=l.updated_at?new Date(l.updated_at).toLocaleString():"Unknown",w=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*");return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)($.u,{show:x,enter:"transition ease-out duration-150",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-100",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0",children:(0,v.jsxs)("div",{className:" h-full border-l border-panel-border-light bg-panel-header-light p-4 dark:border-panel-border-dark dark:bg-panel-header-dark",style:{width:450},children:[(0,v.jsx)("div",{className:"flex w-full justify-end text-scale-900 transition-colors hover:text-scale-1200",children:(0,v.jsx)(Re.Z,{className:"cursor-pointer",size:14,strokeWidth:2,onClick:function(){return d()}})}),(0,v.jsx)("div",{className:"my-4 border border-panel-border-light dark:border-panel-border-dark",children:(0,v.jsx)("div",{className:"flex h-56 w-full items-center 2xl:h-72",children:(0,v.jsx)(Be,{mimeType:g,previewUrl:l.previewUrl})})}),(0,v.jsxs)("div",{className:"w-full space-y-6",children:[(0,v.jsxs)("div",{className:"space-y-1",children:[(0,v.jsx)("h5",{className:"break-words text-base text-scale-1200",children:l.name}),l.isCorrupted&&(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(pe.Z,{size:14,strokeWidth:2,className:"text-scale-1100"}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"File is corrupted, please delete and reupload this file again"})]}),g&&(0,v.jsxs)("p",{className:"text-sm text-scale-1100",children:[g,j&&(0,v.jsxs)("span",{children:[" - ",j]})]})]}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"mb-1 text-xs text-scale-900",children:"Added on"}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:b})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"mb-1 text-xs text-scale-900",children:"Last modified"}),(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:y})]})]}),(0,v.jsxs)("div",{className:"flex space-x-2 border-b border-panel-border-light pb-4 dark:border-panel-border-dark",children:[(0,v.jsx)(h.z,{type:"default",icon:(0,v.jsx)(_.Z,{size:16,strokeWidth:2}),disabled:l.isCorrupted,onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Download"}),i.public?(0,v.jsx)(h.z,{type:"outline",icon:(0,v.jsx)(k.Z,{size:16,strokeWidth:2}),onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=l.name,e.next=4,n(l);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))),disabled:l.isCorrupted,children:"Get URL"}):(0,v.jsx)(me.ZP,{side:"bottom",align:"center",overlay:[(0,v.jsx)(me.ZP.Item,{onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=l.name,e.next=4,n(l,m.Qo.WEEK);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))),children:"Expire in 1 week"},"expires-one-week"),(0,v.jsx)(me.ZP.Item,{onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=l.name,e.next=4,n(l,m.Qo.MONTH);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))),children:"Expire in 1 month"},"expires-one-month"),(0,v.jsx)(me.ZP.Item,{onClick:(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=l.name,e.next=4,n(l,m.Qo.YEAR);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)}))),children:"Expire in 1 year"},"expires-one-year"),(0,v.jsx)(me.ZP.Item,{onClick:function(){return f(l)},children:"Custom expiry"},"custom-expiry")],children:(0,v.jsx)(h.z,{type:"outline",icon:(0,v.jsx)(k.Z,{size:16,strokeWidth:2}),iconRight:(0,v.jsx)(Me.Z,{}),disabled:l.isCorrupted,children:"Get URL"})})]}),(0,v.jsxs)(xe.fC,{delayDuration:0,children:[(0,v.jsx)(xe.xz,{children:(0,v.jsx)(h.z,{type:"outline",disabled:!w,size:"tiny",icon:(0,v.jsx)(T,{size:16,strokeWidth:2}),onClick:function(){return u([l])},children:"Delete file"})}),!w&&(0,v.jsx)(xe.h_,{children:(0,v.jsxs)(xe.VY,{side:"bottom",children:[(0,v.jsx)(xe.Eh,{className:"radix-tooltip-arrow"}),(0,v.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,v.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to delete this file"})})]})})]})]})]})})})},Ge=r(1588),qe=r(18229);function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ye=(0,l.Pi)((function(e){var t,r,s,i=e.bucket,l=(0,p.HN)(),f=l.columns,h=l.selectedFilePreview,x=l.closeFilePreview,g=l.selectedItems,b=l.setSelectedItems,w=l.clearSelectedItems,N=l.selectedItemsToDelete,k=l.clearSelectedItemsToDelete,O=l.openedFolders,P=l.popColumnAtIndex,S=l.popOpenedFoldersAtIndex,C=l.selectedItemsToMove,Z=l.clearSelectedItemsToMove,E=l.view,_=l.currentBucketName,I=l.openBucket,D=l.loadExplorerPreferences,T=l.fetchFolderContents,L=l.fetchMoreFolderContents,z=l.deleteFolder,A=l.uploadFiles,F=l.deleteFiles,U=l.moveFiles,M=(0,d.useRef)(null),B=(0,R.oR)().ui,W=(0,u.UO)().ref,G=(0,Ge.zZ)({projectRef:W}).data,q=(0,qe.oF)({projectRef:W}).data,V=(null!==(t=null===q||void 0===q?void 0:q.services)&&void 0!==t?t:[]).find((function(e){return e.app.id==je.pG})),H=null===V||void 0===V?void 0:V.app_config,Y="".concat(null!==(r=null===H||void 0===H?void 0:H.protocol)&&void 0!==r?r:"https","://").concat(null!==(s=null===H||void 0===H?void 0:H.endpoint)&&void 0!==s?s:"-"),Q=(0,d.useState)(""),K=Q[0],$=Q[1],J=window.innerHeight-122;(0,d.useEffect)((0,a.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.length-1,r=O[t],!K){e.next=12;break}if(r){e.next=8;break}return e.next=6,T(i.id,i.name,-1,K);case 6:e.next=10;break;case 8:return e.next=10,T(r.id,r.name,t,K);case 10:case 15:e.next=19;break;case 12:if(r){e.next=17;break}return e.next=15,T(i.id,i.name,-1);case 17:return e.next=19,T(r.id,r.name,t);case 19:case"end":return e.stop()}}),e)}))),[K]),(0,d.useEffect)((function(){D()}),[]),(0,d.useEffect)((function(){I(i)}),[i]);var X=function(){var e=(0,a.Z)(o().mark((function e(t){var r,n,s,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:-1,t.persist(),n=t.target.files||t.dataTransfer.items,s=!(0,c.isEmpty)((0,c.get)(t,["dataTransfer","items"],[])),e.next=6,A(n,r,s);case 6:t.target.value="";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=(0,a.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==N.length){e.next=15;break}if(t=(0,n.Z)(N,1),r=t[0]){e.next=4;break}return e.abrupt("return");case 4:e.t0=r.type,e.next=e.t0===m.fh.FOLDER?7:e.t0===m.fh.FILE?10:13;break;case 7:return e.next=9,z(r);case 9:case 12:return e.abrupt("break",13);case 10:return e.next=12,F([r]);case 13:e.next=17;break;case 15:return e.next=17,F(N);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e,t){var r,n="active"===(null===G||void 0===G||null===(r=G.customDomain)||void 0===r?void 0:r.status)?t.replace(Y,"https://".concat(G.customDomain.hostname)):t;(0,ve.vQ)(n,(function(){B.setNotification({category:"success",message:"Copied URL for ".concat(e," to clipboard."),duration:4e3})}))};return(0,v.jsxs)("div",{ref:M,className:" bg-scale-200 border-panel-border-light dark:border-panel-border-dark flex h-full w-full flex-col rounded-md border",children:[0===g.length?(0,v.jsx)(Ae,{itemSearchString:K,setItemSearchString:$,onFilesUpload:X}):(0,v.jsx)(Fe,{}),(0,v.jsxs)("div",{className:"flex h-full",style:{height:J},children:[(0,v.jsx)(Ce,{view:E,columns:f,openedFolders:O,selectedItems:g,selectedFilePreview:h,onFilesUpload:X,onSelectAllItemsInColumn:function(e){var t=f[e].items.filter((function(e){return e.type===m.fh.FILE})).map((function(t){return He(He({},t),{},{columnIndex:e})})),r=(0,c.compact)(t.map((function(e){return e.id})));if(g.filter((function(e){return r.includes(e.id)})).length===t.length){var n=g.filter((function(e){return!r.includes(e.id)}));b(n)}else{var s=(0,c.uniqBy)(g.concat(t),"id");b(s)}},onSelectColumnEmptySpace:function(e){P(e),S(e-1),x(),w()},onColumnLoadMore:function(e,t){return L(e,t,K)},onCopyUrl:re}),(0,v.jsx)(We,{onCopyUrl:re})]}),(0,v.jsx)(j,{visible:N.length>0,selectedItemsToDelete:N,onSelectCancel:k,onSelectDelete:te}),(0,v.jsx)(Ue,{bucketName:_,visible:C.length>0,selectedItemsToMove:C,onSelectCancel:Z,onSelectMove:ee}),(0,v.jsx)(y,{onCopyUrl:re})]})})),Qe=Ye;function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je=function(e){for(var t=0,r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return new Uint32Array([t])[0].toString(36)},Xe=function(e,t){if(0===t.length)return t;var r=et(e,t);return rt(r)},et=function(e,t){var r=e.map((function(e){return e.name}));return t.map((function(e){var t=e.definition,n=e.check,s=tt(null!==t?t:n);return s&&r.includes(s)?$e($e({},e),{},{bucket:s}):$e($e({},e),{},{bucket:"Ungrouped"})}))},tt=function(e){var t,r=(null!==(t=null===e||void 0===e?void 0:e.split(" AND "))&&void 0!==t?t:[]).filter((function(e){return e.includes("bucket_id")})),s=(0,n.Z)(r,1)[0];return s?s.split("'")[1]:null},rt=function(e){var t=(0,c.groupBy)(e,"bucket");return Object.keys(t).map((function(e){return{name:e,policies:t[e]}}))},nt=function(e,t,r,n,s,a,i){var o=Je(t);return{name:i?"".concat(r," ").concat(o,"_").concat(e):r,definition:"INSERT"===s?void 0:"(".concat(n,")"),action:"PERMISSIVE",check:"INSERT"===s?"(".concat(n,")"):void 0,command:s,schema:"storage",table:"objects",roles:a.length>0?a:void 0}},st=function(e,t,r,n,s,a,i){var o=Je(t),c=i?"".concat(r," ").concat(o,"_").concat(e):r,l="Add policy for the ".concat(s,' operation under the policy "').concat(r,'"'),d=0===a.length?["public"]:a;return{description:l,statement:'\n    CREATE POLICY "'.concat(c,'"\n    ON storage.objects\n    FOR ').concat(s,"\n    TO ").concat(d.join(", "),"\n    ").concat("INSERT"===s?"WITH CHECK":"USING"," (").concat(n,");\n").replace(/\s+/g," ").trim()}},at=r(23753),it=r(96423),ot=function(e){e.guiHeight;return(0,v.jsx)(it.Z,{title:[(0,v.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(at.Z,{size:"small"}),(0,v.jsx)("h4",{children:"Bucket policies"})]})},"storagePlaceholder")],children:(0,v.jsx)("div",{className:"p-4 px-6",children:(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:"Create a bucket first to start writing policies!"})})})},ct=r(44315),lt=r(84364),dt=function(e){var t=e.policy,r=e.table,n=e.bucketName,s=e.onSelectPolicyEdit,a=void 0===s?function(){}:s,i=e.onSelectPolicyDelete,o=void 0===i?function(){}:i,c=t.name,l=t.command;return(0,v.jsx)("div",{className:"group",children:(0,v.jsxs)(it.Z.Content,{className:"flex justify-between gap-2 border-b border-panel-border-light py-4 dark:border-panel-border-dark",children:[(0,v.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center",children:[(0,v.jsx)("div",{className:"font-mono text-xs text-scale-900",children:l}),(0,v.jsx)("div",{className:"flex flex-col gap-2 lg:flex-row",children:(0,v.jsx)("span",{className:"truncate text-sm text-scale-1200",children:c})})]}),(0,v.jsx)(me.ZP,{side:"bottom",align:"end",size:"small",overlay:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(me.ZP.Item,{icon:(0,v.jsx)(P.Z,{size:14}),type:"outline",className:"mx-2",onClick:function(){return a(t,n,r)},children:"Edit"}),(0,v.jsx)(me.ZP.Separator,{}),(0,v.jsx)(me.ZP.Item,{icon:(0,v.jsx)(ct.Z,{size:14}),type:"outline",onClick:function(){return o(t)},children:"Delete"})]}),children:(0,v.jsx)(h.z,{type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,v.jsx)(fe.Z,{})})})]})})},ut=function(e){var t=e.table,r=void 0===t?"":t,n=e.label,s=void 0===n?"":n,a=e.bucket,i=void 0===a?{}:a,o=e.policies,l=void 0===o?[]:o,d=e.onSelectPolicyAdd,u=void 0===d?function(){}:d,p=e.onSelectPolicyEdit,m=void 0===p?function(){}:p,f=e.onSelectPolicyDelete,x=void 0===f?function(){}:f;return(0,v.jsx)(it.Z,{title:[(0,v.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)(at.Z,{className:"text-scale-1000",size:"small"}),(0,v.jsx)("h4",{className:"m-0 text-lg",children:(0,v.jsx)("span",{children:s})}),i.public&&(0,v.jsx)(lt.Z,{color:"yellow",children:"Public"})]}),(0,v.jsx)(h.z,{type:"outline",onClick:function(){return u(i.name,r)},children:"New policy"})]},s)],children:0===l.length?(0,v.jsx)("div",{className:"p-4 px-6",children:(0,v.jsx)("p",{className:"text-sm text-scale-900",children:"No policies created yet"})}):(0,v.jsxs)("div",{className:"grid grid-cols-1 divide-y dark:divide-dark",children:[l.map((function(e){return(0,v.jsx)(dt,{policy:e,table:r,bucketName:i.name,onSelectPolicyEdit:m,onSelectPolicyDelete:x},e.name)})),0!==l.length?(0,v.jsx)("div",{className:"px-6 py-2",children:(0,v.jsx)("p",{className:"text-sm text-scale-1100",children:(0,c.isEmpty)(i)?"objects"===r?"".concat(l.length," polic").concat(l.length>1?"ies":"y"," that are not tied to any buckets"):"".concat(l.length," polic").concat(l.length>1?"ies":"y"," that target your buckets"):"".concat(l.length," polic").concat(l.length>1?"ies":"y"," in ").concat(i.name)})}):null]})})},pt=r(90089),mt=[{id:"policy-1",templateName:"Allow access to JPG images in a public folder to anonymous users",description:"This policy uses native postgres functions, functions from auth and storage schema",name:"Give anon users access to JPG images in folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n  -- restrict bucket\n  bucket_id = {bucket_name}\n  -- allow access to only jpg file\n  AND storage.\"extension\"(name) = 'jpg'\n  -- in the public folder\n  AND LOWER((storage.foldername(name))[1]) = 'public'\n  -- to anonymous users\n  AND auth.role() = 'anon'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND storage.\"extension\"(name) = 'jpg' AND LOWER((storage.foldername(name))[1]) = 'public' AND auth.role() = 'anon'",allowedOperations:[]},{id:"policy-2",templateName:"Give users access to only their own a top level folder named as uid",description:"For example a user with id d7bed83c-44a0-4a4f-925f-efc384ea1e50 will be able to access anything under the folder d7bed83c-44a0-4a4f-925f-efc384ea1e50/",name:"Give users access to own folder",statement:'\nCREATE POLICY "policy_name"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n    -- restrict bucket\n    bucket_id = {bucket_name}\n    and auth.uid()::text = (storage.foldername(name))[1]\n);\n    '.trim(),definition:"bucket_id = {bucket_id} AND auth.uid()::text = (storage.foldername(name))[1]",allowedOperations:[]},{id:"policy-3",templateName:"Give users access to a folder only to authenticated users",description:"This policy gives users access to a folder (e.g private) only if they are authenticated",name:"Give users authenticated access to folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n    -- restrict bucket\n    bucket_id = {bucket_name}\n    AND (storage.foldername(name))[1] = 'private'\n    AND auth.role() = 'authenticated'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND (storage.foldername(name))[1] = 'private' AND auth.role() = 'authenticated'",allowedOperations:[]},{id:"policy-4",templateName:"Give access to a nested folder called admin/assets only to a specific user",description:'This policy gives read access to all authenticated users for your project to the folder "public"',name:"Give access to a folder",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n\t  -- restrict bucket\n    bucket_id = {bucket_name}\n    AND (storage.foldername(name))[1] = 'admin' AND (storage.foldername(name))[2] = 'assets'\n    AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND (storage.foldername(name))[1] = 'admin' AND (storage.foldername(name))[2] = 'assets' AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'",allowedOperations:[]},{id:"policy-5",templateName:"Give access to a file to a user",description:"This policy gives access to a specific file to a specific user",name:"Give access to a file to user",statement:"\nCREATE POLICY \"policy_name\"\nON storage.objects FOR {operation} {USING | WITH CHECK} (\n\t  -- restrict bucket\n    bucket_id = {bucket_name}\n    AND name = 'admin/assets/Costa Rican Frog.jpg'\n    AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'\n);\n    ".trim(),definition:"bucket_id = {bucket_id} AND name = 'admin/assets/Costa Rican Frog.jpg' AND auth.uid()::text = 'd7bed83c-44a0-4a4f-925f-efc384ea1e50'",allowedOperations:[]}],ft=r(8190),ht=r(78906),xt=r(33885),vt=function(e){var t=e.definition,r=void 0===t?"":t,n=e.onUpdatePolicyDefinition,s=void 0===n?function(){}:n;return(0,v.jsxs)("div",{className:"flex space-x-12",children:[(0,v.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,v.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"policy-name",children:"Policy definition"}),(0,v.jsx)("p",{className:"text-sm text-scale-900",children:"Provide a SQL conditional expression that returns a boolean."})]}),(0,v.jsx)("div",{className:"h-56 w-2/3",children:(0,v.jsx)(ht.Z,{defaultValue:r,onInputChange:s})})]})},jt=function(e){var t=e.allowedOperations,r=void 0===t?[]:t,n=e.onToggleOperation,s=void 0===n?function(){}:n,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(m.Eb).filter((function(t){var r=m.Eb[t];if(0===(0,c.difference)(r,e).length)return t}))}(r);return(0,v.jsxs)("div",{className:"flex justify-between space-x-12",children:[(0,v.jsxs)("div",{className:"flex w-1/3 flex-col space-y-2",children:[(0,v.jsx)("label",{className:"text-base text-scale-1100",htmlFor:"allowed-operation",children:"Allowed operation"}),(0,v.jsxs)("p",{className:"text-sm text-scale-900",children:["Based on the operations you have selected, you can use the highlighted functions in the"," ",(0,v.jsx)("a",{href:"https://supabase.com/docs/reference/javascript/storage-from-list",target:"_blank",rel:"noreferrer",className:"underline",children:"client library"}),"."]})]}),(0,v.jsxs)("div",{className:"w-2/3",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,v.jsx)(K.Z,{label:"SELECT",onChange:function(){return s("SELECT")},checked:r.includes("SELECT")}),(0,v.jsx)(K.Z,{label:"INSERT",onChange:function(){return s("INSERT")},checked:r.includes("INSERT")}),(0,v.jsx)(K.Z,{label:"UPDATE",onChange:function(){return s("UPDATE")},checked:r.includes("UPDATE")}),(0,v.jsx)(K.Z,{label:"DELETE",onChange:function(){return s("DELETE")},checked:r.includes("DELETE")})]}),(0,v.jsx)("div",{className:"flex w-5/6 flex-wrap",children:Object.keys(m.Eb).map((function(e){return(0,v.jsx)("div",{className:"mr-2 mt-2 font-mono",children:(0,v.jsx)(lt.Z,{color:a.includes(e)?"green":"gray",children:e})},e)}))})]})]})},gt=function(e){var t=e.onViewTemplates,r=void 0===t?function(){}:t,n=e.onReviewPolicy,s=void 0===n?function(){}:n;return(0,v.jsxs)("div",{className:"flex w-full items-center justify-end space-x-4 border-t px-6 py-3 dark:border-dark",children:[(0,v.jsx)(h.z,{type:"default",onClick:r,children:"View templates"}),(0,v.jsx)(h.z,{type:"primary",onClick:s,children:"Review"})]})},bt=function(e){var t=e.policyFormFields,r=void 0===t?{}:t,n=e.roles,s=void 0===n?[]:n,a=e.onViewTemplates,i=void 0===a?function(){}:a,o=e.onUpdatePolicyName,c=void 0===o?function(){}:o,l=e.onUpdatePolicyDefinition,d=void 0===l?function(){}:l,u=e.onToggleOperation,p=void 0===u?function(){}:u,m=e.onUpdatePolicyRoles,h=void 0===m?function(){}:m,x=e.onReviewPolicy,j=void 0===x?function(){}:x,g=r.definition,b=r.roles;return(0,v.jsxs)("div",{className:"",children:[(0,v.jsxs)("div",{className:"mb-8 space-y-8 py-6",children:[(0,v.jsx)(f.C.Content,{children:(0,v.jsx)(xt.CM,{name:r.name,limit:50,onUpdatePolicyName:c})}),(0,v.jsx)(f.C.Separator,{}),(0,v.jsx)(f.C.Content,{children:(0,v.jsx)(jt,{allowedOperations:r.allowedOperations,onToggleOperation:p})}),(0,v.jsx)(f.C.Separator,{}),(0,v.jsx)(f.C.Content,{children:(0,v.jsx)(xt.$L,{roles:s,selectedRoles:b,onUpdateSelectedRoles:h})}),(0,v.jsx)(f.C.Separator,{}),(0,v.jsx)(f.C.Content,{children:(0,v.jsx)(vt,{definition:g,onUpdatePolicyDefinition:d})})]}),(0,v.jsx)(gt,{onViewTemplates:i,onReviewPolicy:j})]})},yt=function(){return(0,v.jsx)("div",{className:"my-10 flex items-center justify-center space-x-2 opacity-50",children:(0,v.jsx)("p",{children:"There are no changes made to this policy"})})},wt=function(e){var t=e.policyStatements,r=void 0===t?[]:t,n=e.onSelectBack,s=void 0===n?function(){}:n,a=e.onSelectSave,i=void 0===a?function(){}:a,o=(0,d.useState)(!1),c=o[0],l=o[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.C.Content,{children:(0,v.jsxs)("div",{className:"space-y-6 py-8",children:[(0,v.jsx)("div",{className:"flex items-center justify-between space-y-8 space-x-4",children:(0,v.jsx)("div",{className:"flex flex-col",children:(0,v.jsxs)("p",{className:"text-sm text-scale-1100",children:["These are the SQL statements that will be used to create your policies. The suffix appended to the end of your policy name (",(0,v.jsx)("code",{children:"[hashString]_[number]"}),") just functions as a unique identifier for each of your policies."]})})}),(0,v.jsxs)("div",{className:"space-y-4 overflow-y-auto",style:{maxHeight:"25rem"},children:[0===r.length&&(0,v.jsx)(yt,{}),r.map((function(e,t){var r=e.statement||"";return(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsx)("span",{children:e.description}),(0,v.jsx)("div",{className:"h-40",children:(0,v.jsx)(ht.Z,{readOnly:!0,defaultValue:r})})]},"policy_".concat(t))}))]})]})}),(0,v.jsxs)("div",{className:"flex w-full items-center justify-end gap-2 border-t px-6 py-4 dark:border-dark",children:[(0,v.jsx)(h.z,{type:"default",onClick:s,children:"Back to edit"}),r.length>0&&(0,v.jsx)(h.z,{type:"primary",onClick:function(){l(!0),i()},loading:c,children:"Save policy"})]})]})},Nt=["id"];function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt={name:"",roles:[],policyIds:[],definition:"",allowedOperations:[]},St=function(e){var t=e.visible,r=void 0!==t&&t,n=e.bucketName,s=void 0===n?"":n,i=e.roles,l=void 0===i?[]:i,u=e.onSelectCancel,p=void 0===u?function(){}:u,m=e.onCreatePolicies,h=void 0===m?function(){}:m,x=e.onSaveSuccess,j=void 0===x?function(){}:x,g=(0,R.oR)().ui,b=(0,d.useState)(""),y=b[0],w=b[1],N=(0,d.useState)(""),k=N[0],O=N[1],P=(0,d.useState)(Pt),S=P[0],C=P[1],Z=(0,d.useState)([]),E=Z[0],_=Z[1];(0,d.useEffect)((function(){r&&(I(),C(Pt))}),[r]);var I=function(){return O(ft.$A.SELECTION)},D=function(e){"new"===e&&C(Ot(Ot({},S),{},{definition:"bucket_id = '".concat(s,"'")})),O(ft.$A.EDITOR)},T=function(){w(k),O(ft.$A.TEMPLATES)},L=function(){return O(y)},z=function(){var e=(0,a.Z)(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:r=e.sent,-1!==r.indexOf(!0)?D():j();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.view,r=e.bucketName,n=e.onSelectBackFromTemplates,s=void 0===n?function(){}:n;return t===ft.$A.TEMPLATES?(0,v.jsx)("div",{className:"",children:(0,v.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,v.jsx)("span",{onClick:s,className:"cursor-pointer text-scale-900 transition-colors hover:text-scale-1200",children:(0,v.jsx)(Ee.Z,{strokeWidth:2,size:14})}),(0,v.jsx)("h4",{className:"textlg m-0",children:"Select a template to use for your new policy"})]})}):(0,v.jsx)("div",{className:"flex items-center space-x-3",children:(0,v.jsx)("h4",{className:"m-0 text-lg",children:t===ft.$A.EDITOR||t===ft.$A.SELECTION?"Adding new policy to ".concat(r):t===ft.$A.REVIEW?"Reviewing policies to be created for ".concat(r):void 0})})};return(0,v.jsx)(f.C,{size:k===ft.$A.SELECTION?"medium":"xxlarge",closable:!0,hideFooter:!0,visible:r,contentStyle:{padding:0},header:[(0,v.jsx)(A,{view:k,bucketName:s,onSelectBackFromTemplates:L},"0")],onCancel:p,children:(0,v.jsx)("div",{className:"w-full",children:k===ft.$A.SELECTION?(0,v.jsx)(ft.pT,{description:"PostgreSQL policies control access to your files and folders",onViewTemplates:T,onViewEditor:function(){return D("new")}}):k===ft.$A.EDITOR?(0,v.jsx)(bt,{roles:l,policyFormFields:S,onViewTemplates:T,onUpdatePolicyName:function(e){e.length<=50&&C(Ot(Ot({},S),{},{name:e}))},onUpdatePolicyDefinition:function(e){C(Ot(Ot({},S),{},{definition:e}))},onToggleOperation:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return C(Ot(Ot({},S),{},{allowedOperations:[e]}));var r=S.allowedOperations.includes(e)?(0,c.pull)(S.allowedOperations.slice(),e):S.allowedOperations.concat([e]);return C(Ot(Ot({},S),{},{allowedOperations:r}))},onUpdatePolicyRoles:function(e){C(Ot(Ot({},S),{},{roles:e}))},onReviewPolicy:function(){var e=S.name,t=S.definition,r=S.allowedOperations;if(0===e.length)return g.setNotification({category:"info",message:"Do give your policy a name"});if(0===t.length)return g.setNotification({category:"info",message:"Did you forget to provide a definition for your policy?"});if(0===r.length)return g.setNotification({category:"info",message:"You will need to allow at least one operation in your policy"});var n=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.name,s=t.definition,a=t.allowedOperations,i=t.roles;return a.map((function(t,a){return st(a,e,n,s||"",t,i,r)}))}(s,S);_(n),O(ft.$A.REVIEW)}}):k===ft.$A.TEMPLATES?(0,v.jsx)(ft.jm,{templates:mt,onSelectBackFromTemplates:L,onUseTemplate:function(e){e.id;var t=(0,pt.Z)(e,Nt),r=function(e,t){return e.replace("{bucket_id}","'".concat(t,"'"))}(t.definition,s);C(Ot(Ot(Ot({},S),t),{},{definition:r})),D()}}):k===ft.$A.REVIEW?(0,v.jsx)(wt,{policyStatements:E,onSelectBack:D,onSelectSave:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.name,s=t.definition,a=t.allowedOperations,i=t.roles,o=s?s.replace(/\s+/g," ").trim():"";return a.map((function(t,s){return nt(s,e,n,o,t,i,r)}))}(s,S);z(e)}}):(0,v.jsx)("div",{})})})},Ct=r(96364),Zt=r(92493),Et=(0,l.Pi)((function(){var e=(0,R.oR)(),t=e.ui,r=e.meta,n=(0,u.UO)().ref,s=(0,p.HN)().loaded,i=(0,Zt.KR)({projectRef:n}).data,l=null!==i&&void 0!==i?i:[],m=r.roles.list((function(e){return!r.roles.systemRoles.includes(e.name)})),f=(0,d.useState)([]),h=f[0],x=f[1],j=(0,d.useState)({}),g=j[0],b=j[1],y=(0,d.useState)({}),w=y[0],N=y[1],k=(0,d.useState)({}),O=k[0],P=k[1],S=(0,c.isEmpty)(g)&&!(0,c.isEmpty)(O)&&(0,c.get)(O,["bucket"],"").length>0,C=!(0,c.isEmpty)(O)&&!S,Z=(0,c.filter)(h,{table:"objects"}),E=Xe(l,Z),_=(0,c.get)((0,c.find)(E,{name:"Ungrouped"}),["policies"],[]),I=(0,c.filter)(h,{table:"buckets"});(0,d.useEffect)((function(){D()}),[]);var D=function(){var e=(0,a.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,r.policies.load();case 3:n=null!==(t=null===r||void 0===r?void 0:r.policies.list((function(e){return"storage"===e.schema}),{allSchemas:!0}))&&void 0!==t?t:[],x(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";b({}),P({bucket:e,table:t})},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";P({bucket:t,table:r}),b(e)},z=function(){P({})},A=function(e){return N(e)},F=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setNotification({category:"success",message:"Successfully saved policy!"}),e.next=3,D();case 3:z();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,a.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=(0,a.Z)(o().mark((function e(n){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.policies.create(n);case 2:if(!(s=e.sent).error){e.next=6;break}return t.setNotification({category:"error",message:"Error adding policy: ".concat(s.error.message)}),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)(o().mark((function e(n){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.policies.create(n);case 2:if(!(s=e.sent).error){e.next=6;break}return t.setNotification({category:"error",message:"Error adding policy: ".concat(s.error.message)}),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,a.Z)(o().mark((function e(n){var s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.policies.update(n.id,n);case 2:if(!(s=e.sent).error){e.next=6;break}return t.setNotification({category:"error",message:"Error updating policy: ".concat(s.error.message)}),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.policies.del(w.id);case 2:return(n=e.sent).error?t.setNotification({category:"error",message:"Failed to delete policy: ".concat(n.error.message)}):t.setNotification({category:"success",message:"Successfully deleted policy!"}),N({}),e.next=7,D();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"flex min-h-full w-full flex-col",children:[(0,v.jsx)("h3",{className:"text-xl",children:"Storage policies"}),(0,v.jsx)("p",{className:"mt-2 text-sm text-scale-1100",children:"Safeguard your files with policies that define the operations allowed for your users at the bucket level."}),s?(0,v.jsxs)("div",{className:"mt-4 space-y-4",children:[0===l.length&&(0,v.jsx)(ot,{}),l.map((function(e){var t=(0,c.get)((0,c.find)(E,{name:e.name}),["policies"],[]);return(0,v.jsx)(ut,{table:"objects",label:e.name,bucket:e,policies:t,onSelectPolicyAdd:T,onSelectPolicyEdit:L,onSelectPolicyDelete:A},e.name)})),(0,v.jsx)("div",{className:"!mb-4 w-full border-b border-gray-600"}),(0,v.jsx)("p",{className:"text-sm text-scale-1000",children:"You may also write policies for the tables under the storage schema directly for greater control"}),(0,v.jsx)(ut,{table:"objects",label:"Other policies under storage.objects",policies:_,onSelectPolicyAdd:T,onSelectPolicyEdit:L,onSelectPolicyDelete:A}),(0,v.jsx)(ut,{table:"buckets",label:"Policies under storage.buckets",policies:I,onSelectPolicyAdd:T,onSelectPolicyEdit:L,onSelectPolicyDelete:A})]}):(0,v.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,v.jsx)(te.Z,{className:"animate-spin",size:16})}),(0,v.jsx)(St,{visible:S,bucketName:O.bucket,roles:m,onSelectCancel:z,onCreatePolicies:U,onSaveSuccess:F}),(0,v.jsx)(ft.yV,{visible:C,schema:"storage",roles:m,table:O.table,target:O.bucket,selectedPolicyToEdit:g,onSelectCancel:z,onCreatePolicy:M,onUpdatePolicy:B,onSaveSuccess:F}),(0,v.jsx)(Ct.Z,{danger:!0,visible:!(0,c.isEmpty)(w),title:"Confirm to delete policy",description:'This is permanent! Are you sure you want to delete the policy "'.concat(w.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return N({})},onSelectConfirm:W})]})})),_t=r(58728),It=r(43881),Dt=r(33582),Tt=r(85945),Rt=r(48228),Lt=r(14919),zt=r(49175),At=["onSuccess"];function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,a.Z)(o().mark((function e(t){var r,n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.projectRef,n=t.fileSizeLimit,e.next=3,(0,Lt.r$)("".concat(je.T5,"/projects/").concat(r,"/config/storage"),{fileSizeLimit:n});case 3:if(!(s=e.sent).error){e.next=6;break}throw s.error;case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wt=r(69497),Gt=r(77249),qt=r(20183),Vt=function(e){var t=e.config,r=e.projectRef,n=t.fileSizeLimit,s=t.isFreeTier,i=(0,Gt.K)(n),c=i.value,l=i.unit,u=(0,R.oR)().ui,p=(0,d.useState)(l),m=p[0],f=p[1],x={fileSizeLimit:c,unformattedFileSizeLimit:n},j=(0,R.Xo)(N.KA.STORAGE_ADMIN_WRITE,"*"),y="".concat(new Intl.NumberFormat("en-US").format(qt.H)," bytes"),w=(0,Gt.K)(qt.H,m).value,k=function(e){var t={};return e.fileSizeLimit>w&&(t.fileSizeLimit="Maximum limit is up to ".concat(w.toLocaleString()," ").concat(m,".")),t},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,pt.Z)(e,At),n=(0,Tt.NL)();return(0,Rt.D)((function(e){return Mt(e)}),Ut({onSuccess:function(e,r,s){return(0,a.Z)(o().mark((function a(){var i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r.projectRef,a.next=3,n.invalidateQueries(zt.U.storage(i));case 3:return a.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return a.stop()}}),a)})))()}},r))}(),P=O.mutateAsync,S=function(){var e=(0,a.Z)(o().mark((function e(t){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k(t).fileSizeLimit){e.next=5;break}u.setNotification({category:"error",message:"Upload file size limit must be up to 5GB (".concat(y,")")}),e.next=17;break;case 5:return e.prev=5,e.next=8,P({projectRef:r,fileSizeLimit:(0,Gt.F)(t.fileSizeLimit,m)});case 8:n=e.sent,s=(0,Gt.K)(n.fileSizeLimit),x={fileSizeLimit:s.value,unformattedFileSizeLimit:n.fileSizeLimit},u.setNotification({category:"success",message:"Successfully updated settings"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),u.setNotification({category:"error",message:"Failed to update storage settings: ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message)});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{className:"mx-auto w-[56rem] max-w-4xl px-5 pt-12 pb-20",children:(0,v.jsx)(g.Z,{validateOnBlur:!0,initialValues:x,validate:k,onSubmit:S,children:function(e){var t=e.values,n=e.isSubmitting,a=e.handleReset,i=x.unformattedFileSizeLimit!==(0,Gt.F)(t.fileSizeLimit,m);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"mb-6",children:[(0,v.jsx)("h3",{className:"mb-2 text-xl text-scale-1200",children:"Storage settings"}),(0,v.jsx)("div",{className:"text-sm text-scale-900",children:"Configure your project's storage settings"})]}),(0,v.jsx)("div",{className:"space-y-20",children:(0,v.jsxs)("div",{className:["bg-scale-100 dark:bg-scale-300","overflow-hidden border-scale-400","rounded-md border shadow"].join(" "),children:[(0,v.jsx)("div",{className:"flex flex-col gap-0 divide-y divide-scale-400",children:(0,v.jsxs)("div",{className:"grid grid-cols-12 gap-6 px-8 py-8 lg:gap-12",children:[(0,v.jsx)("div",{className:"relative flex flex-col col-span-12 gap-6 lg:col-span-4",children:(0,v.jsx)("p",{className:"text-sm",children:"Upload file size limit"})}),(0,v.jsxs)("div",{className:"relative flex flex-col col-span-12 gap-x-6 gap-y-2 lg:col-span-8",children:[(0,v.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-2",children:[(0,v.jsx)("div",{className:"col-span-8",children:(0,v.jsx)(b.Z,{id:"fileSizeLimit",name:"fileSizeLimit",type:"number",disabled:s||!j,step:1,onKeyPress:function(e){(e.charCode<48||e.charCode>57)&&e.preventDefault()}})}),(0,v.jsx)("div",{className:"col-span-4",children:(0,v.jsx)(_t.Z,{disabled:s,value:m,onChange:f,children:Object.values(qt.b).map((function(e){return(0,v.jsx)(_t.Z.Option,{disabled:s,label:e,value:e,children:(0,v.jsx)("div",{children:e})},e)}))})})]}),(0,v.jsxs)("p",{className:"text-sm text-scale-1100",children:[m!==qt.b.BYTES&&"Equivalent to ".concat((0,Gt.F)(t.fileSizeLimit,m).toLocaleString()," bytes. "),"Maximum size in bytes of a file that can be uploaded is 5 GB (",y,")."]})]})]})}),s&&(0,v.jsx)("div",{className:"px-6 pb-6",children:(0,v.jsx)(Wt.Z,{icon:(0,v.jsx)(It.Z,{size:"large"}),primaryText:"Free Plan has a fixed upload file size limit of 50 MB.",projectRef:r,secondaryText:"Upgrade to the Pro plan for a configurable upload file size limit of up to 5 GB."})}),(0,v.jsx)("div",{className:"border-t border-scale-400"}),(0,v.jsx)("div",{className:"flex justify-between px-8 py-4",children:(0,v.jsxs)("div",{className:"flex items-center justify-between w-full gap-2",children:[j?(0,v.jsx)("div",{}):(0,v.jsx)("p",{className:"text-sm text-scale-1000",children:"You need additional permissions to update storage settings"}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsx)(h.z,{type:"default",htmlType:"reset",onClick:function(){return a()},disabled:!i&&void 0!==i,children:"Cancel"}),(0,v.jsx)(h.z,{type:"primary",htmlType:"submit",loading:n,disabled:!j||!i&&void 0!==i,children:"Save"})]})]})})]})})]})}})})},Ht=function(e){var t=e.projectRef,r=(0,Dt.kl)({projectRef:t},{enabled:je.Qy}),n=r.data;return r.error||null!==n&&void 0!==n&&n.error?(0,v.jsx)("div",{className:"p-6 mx-auto text-center sm:w-full md:w-3/4",children:(0,v.jsx)("p",{className:"text-sm",children:"Error loading storage settings"})}):n?(0,v.jsx)(Vt,{config:n,projectRef:t}):(0,v.jsx)("div",{className:"p-6 mx-auto text-center sm:w-full md:w-3/4",children:(0,v.jsx)("p",{className:"text-sm",children:"Loading..."})})},Yt=r(86677),Qt=r(44198),Kt=r(80965),$t=["onSuccess"];function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=(0,a.Z)(o().mark((function e(t){var r,n,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef,n=t.id,r){e.next=3;break}throw new Error("projectRef is required");case 3:if(n){e.next=5;break}throw new Error("Bucket name is requried");case 5:return e.next=7,(0,Lt.v_)("".concat(je.T5,"/storage/").concat(r,"/buckets/").concat(n,"/empty"),{});case 7:if(!(s=e.sent).error){e.next=10;break}throw s.error;case 10:return e.next=12,(0,Lt.$v)("".concat(je.T5,"/storage/").concat(r,"/buckets/").concat(n));case 12:if(!(a=e.sent).error){e.next=15;break}throw a.error;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,pt.Z)(e,$t),n=(0,Tt.NL)();return(0,Rt.D)((function(e){return er(e)}),Xt({onSuccess:function(e,r,s){return(0,a.Z)(o().mark((function a(){var i;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=r.projectRef,a.next=3,n.invalidateQueries(Kt.m.buckets(i));case 3:return a.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return a.stop()}}),a)})))()}},r))},nr=function(e){var t,r=e.visible,n=void 0!==r&&r,s=e.bucket,i=e.onClose,l=(0,Yt.useRouter)(),p=(0,R.oR)(),m=p.ui,f=p.meta,h=(0,u.UO)().ref,x=(0,d.useState)(!1),j=x[0],g=x[1],b=(0,Zt.KR)({projectRef:h}).data,y=rr().mutateAsync,w=null!==b&&void 0!==b?b:[];(0,d.useEffect)((function(){g(!1)}),[n]);var N=function(){var e=(0,a.Z)(o().mark((function e(){var t,r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return",console.error("Project ref is required"));case 2:if(s){e.next=4;break}return e.abrupt("return",console.error("No bucket is selected"));case 4:return g(!0),e.prev=5,e.next=8,y({projectRef:h,id:s.id});case 8:return e.next=10,f.policies.loadBySchema("storage");case 10:return t=f.policies.list(),r=t.filter((function(e){return"objects"===e.table})),n=Xe(w,r),a=(0,c.get)((0,c.find)(n,{name:s.name}),["policies"],[]),e.next=16,Promise.all(a.map((function(e){f.policies.del(e.id)})));case 16:m.setNotification({category:"success",message:"Successfully deleted bucket ".concat(s.name)}),l.push("/project/".concat(h,"/storage/buckets")),i(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),g(!1),m.setNotification({category:"error",message:"Failed to delete bucket: ".concat(e.t0.message)});case 25:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(Qt.Z,{visible:n,title:"Confirm deletion of ".concat(null===s||void 0===s?void 0:s.name),confirmPlaceholder:"Type in name of bucket",onConfirm:N,onCancel:i,confirmString:null!==(t=null===s||void 0===s?void 0:s.name)&&void 0!==t?t:"",loading:j,text:(0,v.jsxs)(v.Fragment,{children:["Your bucket ",(0,v.jsx)("span",{className:"font-bold",children:null===s||void 0===s?void 0:s.name})," and all its contents will be permanently deleted."]}),alert:"You cannot recover this bucket once it is deleted.",confirmLabel:"Delete bucket ".concat(null===s||void 0===s?void 0:s.name)})}},84151:function(e,t,r){var n=r(44285),s=(r(27378),r(14971)),a=r(47939),i=r(79894),o=r.n(i),c=r(24246);t.Z=function(e){var t=e.title,r=e.description,i=e.children,l=e.footer,d=e.url,u=void 0===d?"":d,p=e.linkHref,m=void 0===p?"":p,f=e.imgUrl,h=e.imgAlt,x=e.onClick,v=e.icon,j=e.containerHeightClassName,g=void 0===j?"h-32":j,b=e.loading,y=void 0!==b&&b,w=function(e){var t=e.children;return(0,c.jsx)(o(),{href:m,children:(0,c.jsx)("a",{children:t})})},N=function(e){var t=e.children;return(0,c.jsx)("a",{href:u,children:t})},k=function(e){var t=e.children;return(0,c.jsx)("div",{children:t})},O=function(e){var t=e.children;return(0,c.jsx)("button",{onClick:x,children:t})},P=u||m||x,S=["group relative text-left","bg-panel-header-light dark:bg-panel-header-dark","border border-panel-border-light dark:border-panel-border-dark","rounded-md py-4 px-6 flex flex-row","transition ease-in-out duration-150",g];P&&(S=[].concat((0,n.Z)(S),["cursor-pointer","hover:bg-panel-border-light dark:hover:bg-panel-border-dark","hover:border-panel-border-hover-light","dark:hover:border-panel-border-hover-dark hover:border-gray-300"]));var C=function(e){var t=e.children;return(0,c.jsx)("div",{className:"mr-4 flex flex-col",children:t})},Z=(0,c.jsxs)("div",{className:S.join(" "),children:[f&&(0,c.jsx)(C,{children:(0,c.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(f),alt:"".concat(h),width:"26"})}),v&&(0,c.jsx)(C,{children:v}),(0,c.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:[(0,c.jsx)("h5",{className:"text-scale-1200",children:t}),(i||r)&&(0,c.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,c.jsx)("p",{className:"text-sm text-scale-1100",children:r}),(0,c.jsx)("div",{className:"w-full",children:i&&i})]}),l&&(0,c.jsx)("div",{className:"w-full",children:l})]}),P&&(0,c.jsx)("div",{className:" absolute right-4 top-4 text-scale-900 transition-all duration-200 group-hover:right-3 group-hover:text-scale-1200 ",children:y?(0,c.jsx)(s.Z,{className:"animate-spin"}):(0,c.jsx)(a.Z,{})})]});return x?(0,c.jsx)(O,{children:Z}):m?(0,c.jsx)(w,{children:Z}):u?(0,c.jsx)(N,{children:Z}):(0,c.jsx)(k,{children:Z})}},96364:function(e,t,r){var n=r(94269),s=r(77758),a=r(88671),i=r(27378),o=r(24246);t.Z=function(e){var t=e.visible,r=void 0!==t&&t,c=e.danger,l=void 0!==c&&c,d=e.title,u=void 0===d?"":d,p=e.description,m=void 0===p?"":p,f=e.size,h=void 0===f?"small":f,x=e.buttonLabel,v=void 0===x?"":x,j=e.buttonLoadingLabel,g=void 0===j?"":j,b=e.onSelectCancel,y=void 0===b?function(){}:b,w=e.onSelectConfirm,N=void 0===w?function(){}:w;(0,i.useEffect)((function(){r&&P(!1)}),[r]);var k=(0,i.useState)(!1),O=k[0],P=k[1];return(0,o.jsx)(n.C,{header:u,visible:r,title:u,description:m,size:h,hideFooter:!0,onCancel:y,children:(0,o.jsx)(s.Z,{initialValues:{},validateOnBlur:!0,onSubmit:function(){return P(!0),void N()},validate:function(){return[]},children:function(){return(0,o.jsxs)("div",{className:"space-y-4 py-4",children:[(0,o.jsx)(n.C.Content,{children:(0,o.jsx)("p",{className:"text-sm text-scale-1100",children:m})}),(0,o.jsx)(n.C.Separator,{}),(0,o.jsx)(n.C.Content,{children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(a.z,{block:!0,htmlType:"button",type:"default",onClick:y,disabled:O,children:"Cancel"}),(0,o.jsx)(a.z,{htmlType:"submit",block:!0,type:l?"danger":"primary",disabled:O,loading:O,children:g&&O?g:v||"Confirm"})]})})]})}})})}},89301:function(e,t,r){var n=r(90849),s=r(27378),a=r(56583),i=r(3258),o=r(9543),c=r(63532),l=r(33954),d=r(51452),u=r(24246);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=(0,a.Z)((function(e,t){return m({items:e},t)})),h=(0,s.memo)((function(e){var t=e.data,r=e.index,n=e.style,s=t.items,a=t.itemProps,i=t.ItemComponent,o=r<s.length?s[r]:void 0;return o?(0,u.jsx)("div",{style:n,children:(0,u.jsx)(i,m({index:r,item:o},a))}):(0,u.jsxs)("div",{className:"space-y-1 my-1",style:n,children:[(0,u.jsx)(d.Z,{}),(0,u.jsx)(d.Z,{}),(0,u.jsx)(d.Z,{})]})}),i.wy);function x(e){var t=e.items,r=void 0===t?[]:t,n=e.itemProps,s=void 0===n?{}:n,a=e.hasNextPage,l=void 0!==a&&a,d=e.isLoadingNextPage,p=void 0!==d&&d,m=e.getItemSize,x=void 0===m?function(){return 40}:m,v=e.onLoadNextPage,j=void 0===v?function(){}:v,g=e.ItemComponent,b=void 0===g?function(){return null}:g,y=p?function(){}:j,w=function(e){return!l||e<r.length},N=l?r.length+1:r.length,k=f(r,{itemProps:s,ItemComponent:b});return(0,u.jsxs)("div",{className:"relative flex flex-col flex-grow",children:[(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsx)(o.ZP,{children:function(e){var t=e.height,r=e.width;return(0,u.jsx)(c.Z,{itemCount:N,isItemLoaded:w,loadMoreItems:y,children:function(e){var n=e.onItemsRendered,s=e.ref;return(0,u.jsx)(i.S_,{ref:s,height:null!==t&&void 0!==t?t:0,width:null!==r&&void 0!==r?r:0,itemCount:N,itemData:k,itemSize:x,onItemsRendered:n,children:h})}})}})}),(0,u.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,pointerEvents:"none"}})]})}t.Z=(0,s.memo)(x,l.t0)},44198:function(e,t,r){var n=r(94269),s=r(77758),a=r(11597),i=r(3648),o=r(88671),c=r(24246);t.Z=function(e){var t=e.title,r=e.size,l=void 0===r?"small":r,d=e.onConfirm,u=e.visible,p=e.onCancel,m=e.loading,f=e.confirmLabel,h=e.confirmPlaceholder,x=e.confirmString,v=e.alert,j=e.text,g=e.children;return(0,c.jsx)(n.C,{hideFooter:!0,closable:!0,size:l,visible:u,header:t,onCancel:p,children:(0,c.jsx)(s.Z,{validateOnBlur:!0,initialValues:{confirmValue:""},validate:function(e){var t={};return 0===e.confirmValue.length?t.confirmValue="Enter the required value.":e.confirmValue!==x&&(t.confirmValue="Value entered does not match."),t},onSubmit:d,children:function(){return(0,c.jsx)("div",{className:"w-full py-4",children:(0,c.jsxs)("div",{className:"space-y-4",children:[g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.C.Content,{children:g}),(0,c.jsx)(n.C.Separator,{})]}),v&&(0,c.jsx)(n.C.Content,{children:(0,c.jsx)(a.Z,{variant:"warning",withIcon:!0,title:v})}),void 0!==j&&(0,c.jsx)(n.C.Content,{children:(0,c.jsx)("p",{className:"mb-2 block text-sm",children:j})}),(0,c.jsx)(n.C.Separator,{}),(0,c.jsx)(n.C.Content,{children:(0,c.jsx)(i.Z,{id:"confirmValue",label:(0,c.jsxs)("span",{children:["Type ",(0,c.jsx)("span",{className:"text-scale-1200",children:x})," to confirm."]}),placeholder:h})}),(0,c.jsx)(n.C.Separator,{}),(0,c.jsx)(n.C.Content,{children:(0,c.jsx)(o.z,{block:!0,type:"danger",size:"medium",htmlType:"submit",loading:m,disabled:m,children:f})})]})})}})})}},38230:function(e,t,r){var n=r(79305),s=r(33769),a=r(24246);t.Z=function(e){var t=e.resourceText,r=e.isFullPage,i=function(e){return(0,n.Z)(e),(0,a.jsx)("div",{className:["block w-full rounded border border-opacity-20 py-4 px-6","border-gray-600 bg-gray-100","dark:border-gray-300 dark:bg-gray-400"].join(" "),children:(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(s.Z,{size:"large"})}),(0,a.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-scale-1100",children:"Contact your organization owner or adminstrator for assistance."})})]})})]})})};return void 0!==r&&r?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("div",{className:"w-[550px]",children:(0,a.jsx)(i,{})})}):(0,a.jsx)(i,{})}},96423:function(e,t,r){var n=r(72853),s=(r(27378),r(24246));function a(e){var t=[];t=e.hideHeaderStyling?["\n    bg-panel-body-light dark:bg-panel-body-dark"]:["\n    bg-panel-header-light dark:bg-panel-header-dark\n    border-b border-panel-border-light dark:border-panel-border-dark"];var r=(0,s.jsxs)("div",{className:"\n        ".concat(e.noHideOverflow?"":"overflow-hidden"," rounded-md border\n        border-panel-border-light shadow-sm\n        dark:border-panel-border-dark ").concat(e.noMargin?"":"mb-8"," ").concat(e.className),children:[e.title&&(0,s.jsx)("div",{className:t.join(" "),children:(0,s.jsx)("div",{className:"flex items-center px-6 py-4",children:e.title})}),(0,s.jsx)("div",{className:"bg-panel-body-light dark:bg-panel-body-dark ".concat(e.bodyClassName||""),children:e.children}),e.footer&&(0,s.jsx)("div",{className:" border-t border-panel-border-interior-light bg-panel-footer-light dark:border-panel-border-interior-dark dark:bg-panel-footer-dark",children:(0,s.jsx)("div",{className:"flex h-12 items-center px-6",children:e.footer})})]});return!1===e.wrapWithLoading?r:(0,s.jsx)(n.Z,{active:Boolean(e.loading),children:r})}a.Content=function(e){var t=e.children,r=e.className,n=["px-6 py-4"];return r&&n.push(r),(0,s.jsx)("div",{className:n.join(" "),children:t})},t.Z=a},24954:function(e,t,r){var n=r(79894),s=r.n(n),a=r(37772),i=r(88671),o=r(24246);t.Z=function(e){var t=e.name,r=void 0===t?"":t,n=e.isActive,c=e.isExternal,l=e.icon,d=e.url,u=void 0===d?"":d,p=e.target,m=void 0===p?"_self":p,f=e.onClick,h=e.textClassName,x=void 0===h?"":h,v=e.hoverText,j=void 0===v?"":v,g=e.label,b=(0,o.jsx)(a.ZP.Item,{icon:l,rounded:!0,active:n,onClick:f,children:(0,o.jsx)("div",{className:"flex w-full items-center justify-between gap-1",children:(0,o.jsxs)("div",{title:j||("string"===typeof r?r:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,o.jsxs)("span",{className:"truncate",children:[r," "]}),void 0!==g&&(0,o.jsx)("span",{className:"text-orange-800 text-xs font-normal truncate",children:g})]})})});return u?c?(0,o.jsx)(s(),{href:u,children:(0,o.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,o.jsx)(i.z,{block:!0,className:"!justify-start",type:"text",size:"small",icon:l,children:r})})}):(0,o.jsx)(s(),{href:u,passHref:!0,children:(0,o.jsx)("a",{className:"block",target:m,children:b})}):b}},24376:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(37772),s=r(84364),a=r(24954),i=r(24246),o=function(e){var t=e.page,r=e.menu;return(0,i.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,i.jsx)(n.ZP,{type:"pills",children:r.map((function(e,o){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"my-6 space-y-8",children:(0,i.jsxs)("div",{className:"mx-3",children:[(0,i.jsx)(n.ZP.Group,{title:e.title?(0,i.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,i.jsx)("span",{children:e.title}),e.isPreview&&(0,i.jsx)(s.Z,{color:"amber",children:"Not production ready"})]}):null}),(0,i.jsx)("div",{children:e.items.map((function(e){return(0,i.jsx)(a.Z,{url:e.url,name:e.name,icon:e.icon,isActive:t===e.key,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)}))})]})}),o!==r.length-1&&(0,i.jsx)("div",{className:"h-px w-full bg-scale-500"})]},e.title)}))})})}},941:function(e,t,r){r.d(t,{D:function(){return v},m:function(){return j}});var n=r(68043),s=r(25024),a=r(88671),i=r(49239),o=r(33769),c=r(14971),l=r(3648),d=r(36802),u=r(96423),p=r(43109),m=r(18229),f=r(45355),h=r(20796),x=r(24246),v=function(){var e,t,r=(0,d.UO)().ref,v=(0,m.oF)({projectRef:r}),j=v.data,g=v.isError,b=v.isLoading,y=(0,p.tb)({projectRef:r}),w=y.data,N=y.isError,k=y.isLoading,O=null===w||void 0===w?void 0:w.jwtSecretUpdateStatus,P=(0,f.Xo)(n.KA.READ,"service_api_keys"),S=void 0===O||O===s.iL.Updated,C=(null!==(e=null===j||void 0===j?void 0:j.services)&&void 0!==e?e:[]).find((function(e){return e.app.id==h.pG})),Z=null!==(t=null===C||void 0===C?void 0:C.service_api_keys)&&void 0!==t?t:[],E=0===Z.length;return(0,x.jsx)(u.Z,{title:(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsx)("h5",{className:"text-base",children:"Project API keys"}),(0,x.jsxs)("p",{className:"text-sm text-scale-1000",children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,x.jsx)("br",{}),"You can use the keys below in the Supabase client libraries.",(0,x.jsx)("br",{}),(0,x.jsx)("a",{href:"https://supabase.com/docs#client-libraries",target:"_blank",rel:"noreferrer",children:(0,x.jsx)(a.z,{icon:(0,x.jsx)(i.Z,{}),type:"default",className:"mt-4",children:"Client Docs"})})]})]}),children:g||N?(0,x.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,x.jsx)(o.Z,{size:16,strokeWidth:1.5}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:g?"Failed to retrieve API keys":"Failed to update JWT secret"})]}):E||b||k?(0,x.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,x.jsx)(c.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:b||E?"Retrieving API keys":"JWT secret is being updated"})]}):Z.map((function(e,t){var r;return(0,x.jsx)(u.Z.Content,{className:t>=1&&"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,x.jsx)(l.Z,{readOnly:!0,disabled:!0,layout:"horizontal",className:"input-mono",label:(0,x.jsxs)(x.Fragment,{children:[null===(r=e.tags)||void 0===r?void 0:r.split(",").map((function(e,t){return(0,x.jsx)("code",{className:"text-xs text-code",children:e},"".concat(e).concat(t))})),"service_role"===e.tags&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("code",{className:"bg-red-900 text-xs text-white",children:"secret"})}),"anon"===e.tags&&(0,x.jsx)("code",{className:"text-xs text-code",children:"public"})]}),copy:P&&S,reveal:"anon"!==e.tags&&P&&S,value:P?O===s.iL.Failed?"JWT secret update failed, new API key may have issues":O===s.iL.Updating?"Updating JWT secret...":e.api_key:"You need additional permissions to view API keys",onChange:function(){},descriptionText:"service_role"===e.tags?"This key has the ability to bypass Row Level Security. Never share it publicly.":"This key is safe to use in a browser if you have enabled Row Level Security for your tables and configured policies."})},e.api_key)}))})},j=function(){var e,t,r,n,a,i=(0,d.UO)().ref,f=(0,m.oF)({projectRef:i}),v=f.data,j=f.isLoading,b=f.isError,y=(0,p.tb)({projectRef:i}),w=y.data,N=y.isError,k=y.isLoading,O=null===w||void 0===w?void 0:w.jwtSecretUpdateStatus,P=void 0===O||O===s.iL.Updated,S=null!==(e=null===v||void 0===v||null===(t=v.project)||void 0===t?void 0:t.jwt_secret)&&void 0!==e?e:"",C=(null!==(r=null===v||void 0===v?void 0:v.services)&&void 0!==r?r:[]).find((function(e){return e.app.id==h.pG})),Z=null===C||void 0===C?void 0:C.app_config,E="".concat(null!==(n=null===Z||void 0===Z?void 0:Z.protocol)&&void 0!==n?n:"https","://").concat(null!==(a=null===Z||void 0===Z?void 0:Z.endpoint)&&void 0!==a?a:"-");return(0,x.jsx)(g,{children:b||N?(0,x.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,x.jsx)(o.Z,{size:16,strokeWidth:1.5}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:b?"Failed to retrieve configuration":"Failed to update JWT secret"})]}):j||k?(0,x.jsxs)("div",{className:"flex items-center justify-center py-8 space-x-2",children:[(0,x.jsx)(c.Z,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:j?"Retrieving API keys":"JWT secret is being updated"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z.Content,{children:(0,x.jsx)(l.Z,{label:"URL",readOnly:!0,copy:!0,disabled:!0,className:"input-mono",value:E,descriptionText:"A RESTful endpoint for querying and managing your database.",layout:"horizontal"})}),(0,x.jsx)(u.Z.Content,{className:"border-t border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,x.jsx)(l.Z,{label:"JWT Secret",readOnly:!0,copy:P,reveal:P,disabled:!0,value:O===s.iL.Failed?"JWT secret update failed":O===s.iL.Updating?"Updating JWT secret...":S,className:"input-mono",descriptionText:"Used to decode your JWTs. You can also use this to mint your own JWTs.",layout:"horizontal"})})]})})},g=function(e){var t=e.children;return(0,x.jsx)(u.Z,{title:(0,x.jsx)("div",{className:"space-y-3",children:(0,x.jsx)("h5",{className:"text-base",children:"Project Configuration"})}),children:t})}},71714:function(e,t,r){var n=r(24246);t.Z=function(e){return e.active?(0,n.jsx)("div",{className:"logs-shimmering-loader w-full h-0.5"}):null}},51452:function(e,t,r){r.d(t,{A:function(){return a}});var n=r(24246),s=function(e){var t=e.className,r=void 0===t?"":t,s=e.delayIndex,a=void 0===s?0:s,i=e.animationDelay,o=void 0===i?150:i;return(0,n.jsx)("div",{className:"shimmering-loader rounded py-3 ".concat(r),style:{animationFillMode:"backwards",animationDelay:"".concat(a*o,"ms")}})},a=function(){return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(s,{}),(0,n.jsx)(s,{className:"w-3/4"}),(0,n.jsx)(s,{className:"w-1/2"})]})};t.Z=s},78906:function(e,t,r){var n=r(55732),s=r(34707),a=r.n(s),i=r(57088),o=r(27378),c=r(45355),l=r(24246);t.Z=function(e){var t=e.queryId,r=e.language,s=void 0===r?"pgsql":r,d=e.defaultValue,u=void 0===d?"":d,p=e.readOnly,m=void 0!==p&&p,f=e.contextmenu,h=void 0===f||f,x=e.onInputChange,v=void 0===x?function(){}:x,j=(0,i.Ik)(),g=(0,c.oR)().meta,b=(0,o.useRef)();function y(e){return w.apply(this,arguments)}function w(){return(w=(0,n.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.formatQuery(t);case 3:if(!(r=e.sent).error){e.next=6;break}throw r.error;case 6:return e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.error("formatPgsql error:",e.t0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}(0,o.useEffect)((function(){if(j){j.editor.defineTheme("supabase",{base:"vs-dark",inherit:!0,colors:{},rules:[{token:"",background:"4a5568"},{token:"string.sql",foreground:"24b47e"},{token:"comment",foreground:"666666"},{token:"predefined.sql",foreground:"D4D4D4"}]});var e=j.languages.registerDocumentFormattingEditProvider("pgsql",{provideDocumentFormattingEdits:function(e){return(0,n.Z)(a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getValue(),t.next=3,y(r);case 3:return n=t.sent,t.abrupt("return",[{range:e.getFullModelRange(),text:n}]);case 5:case"end":return t.stop()}}),t)})))()}});return function(){e.dispose()}}}),[j]),(0,o.useEffect)((function(){var e;b.current&&(null===(e=b.current)||void 0===e||e.changeViewZones((function(e){e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})))}),[t]);var N=function(){return(0,l.jsx)("h4",{className:"text-lg",children:"Loading"})};return(0,l.jsx)(i.ZP,{className:"monaco-editor",theme:"vs-dark",defaultLanguage:s,defaultValue:u,path:t,loading:(0,l.jsx)(N,{}),options:{readOnly:m,tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:h},onMount:function(e,t){b.current=e,e.changeViewZones((function(e){e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})}))},onChange:v})}},69497:function(e,t,r){var n=r(64116),s=r(68043),a=r(79894),i=r.n(a),o=r(36802),c=r(47510),l=r(45355),d=r(20796),u=r(88671),p=r(24246);t.Z=function(e){var t=e.icon,r=e.primaryText,a=(e.projectRef,e.secondaryText),m=(0,o.UO)().ref,f=(0,c.d2)().project,h=null===f||void 0===f?void 0:f.subscription_tier,x=(0,l.Xo)(s.KA.BILLING_WRITE,"stripe.subscriptions"),v=(0,l.P5)("disableProjectCreationAndUpdate");return(0,p.jsx)("div",{className:["block w-full rounded border border-opacity-20 py-4 px-6","border-gray-600 bg-gray-100","dark:border-gray-300 dark:bg-gray-400"].join(" "),children:(0,p.jsxs)("div",{className:"flex space-x-3",children:[t&&(0,p.jsx)("div",{className:"mt-1",children:t}),(0,p.jsxs)("div",{className:"flex w-full items-center justify-between space-x-32",children:[(0,p.jsxs)("div",{className:"space-y-1",children:[(0,p.jsx)("p",{className:"text-sm",children:r}),(0,p.jsx)("div",{children:(0,p.jsx)("p",{className:"text-sm text-scale-1100",children:a})})]}),(0,p.jsxs)(n.fC,{delayDuration:0,children:[(0,p.jsx)(n.xz,{children:(0,p.jsx)(u.z,{type:"primary",disabled:!x||v,children:(0,p.jsx)(i(),{href:"/project/".concat(m,"/settings/billing/subscription").concat(h===d.ev.FREE?"?panel=subscriptionPlan":""),children:(0,p.jsx)("a",{children:h===d.ev.FREE?"Upgrade to Pro":"Enable Addon"})})})}),!x||v?(0,p.jsx)(n.h_,{children:(0,p.jsxs)(n.VY,{side:"bottom",children:[(0,p.jsx)(n.Eh,{className:"radix-tooltip-arrow"}),(0,p.jsx)("div",{className:["border border-scale-200 text-center","rounded bg-scale-100 py-1 px-2 leading-none shadow"].join(" "),children:(0,p.jsx)("span",{className:"text-xs text-scale-1200",children:v?(0,p.jsxs)(p.Fragment,{children:["Subscription changes are currently disabled.",(0,p.jsx)("br",{}),"Our engineers are working on a fix."]}):x?"":"You need additional permissions to amend subscriptions"})})]})}):(0,p.jsx)(p.Fragment,{})]})]})]})})}},43109:function(e,t,r){r.d(t,{tb:function(){return g}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(25024),l=r(85945),d=r(36492),u=r(14919),p=r(20796),m=(r(27378),r(49175)),f=["enabled"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(o().mark((function e(t,r){var n,s,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,u.U2)("".concat(p.T5,"/props/project/").concat(s,"/jwt-secret-update-status"),{signal:r});case 5:if(!(a=e.sent).error){e.next=8;break}throw a.error;case 8:return i=null===a||void 0===a||null===(n=a.jwtSecretUpdateStatus)||void 0===n?void 0:n.meta,e.abrupt("return",{changeTrackingId:null===i||void 0===i?void 0:i.change_tracking_id,jwtSecretUpdateError:null===i||void 0===i?void 0:i.error,jwtSecretUpdateProgress:null===i||void 0===i?void 0:i.progress,jwtSecretUpdateStatus:null===i||void 0===i?void 0:i.status});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,f),o=(0,l.NL)();return(0,d.a)(m.U.jwtSecretUpdatingStatus(t),(function(e){var r=e.signal;return v({projectRef:t},r)}),x({enabled:a&&"undefined"!==typeof t,refetchInterval:function(e){return!!e&&(e.jwtSecretUpdateStatus===c.iL.Updating&&1e3)},onSuccess:function(){o.invalidateQueries(m.U.postgrest(t))}},i))}},18229:function(e,t,r){r.d(t,{oF:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),d=r(20796),u=(r(27378),r(49175)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(d.T5,"/props/project/").concat(n,"/settings"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(u.U.settings(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t,refetchInterval:function(e,t){var r,n,s=(null!==(r=null===e||void 0===e?void 0:e.services)&&void 0!==r?r:[]).find((function(e){return e.app.id==d.pG}));return 0===(null!==(n=null===s||void 0===s?void 0:s.service_api_keys)&&void 0!==n?n:[]).length?2e3:0}},i))}},33582:function(e,t,r){r.d(t,{kl:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),d=r(20796),u=(r(27378),r(49175)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(d.T5,"/projects/").concat(n,"/config/storage"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(u.U.storage(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t},i))}},86051:function(e,t,r){r.d(t,{h1:function(){return g}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(85945),l=r(36492),d=r(25024),u=r(14919),p=r(20796),m=(r(27378),r(49175)),f=["enabled"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,u.U2)("".concat(p.Q2,"/projects/").concat(n,"/upgrade/status"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){var t=e.projectRef,r=e.projectStatus,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.enabled,i=void 0===a||a,o=(0,s.Z)(n,f),u=(0,c.NL)();return(0,l.a)(m.U.upgradeStatus(t),(function(e){var r=e.signal;return v({projectRef:t},r)}),x({enabled:i&&"undefined"!==typeof t,refetchInterval:function(e){var t,n,s=e;return!!s&&((r===p.S.UPGRADING&&(null===(t=s.databaseUpgradeStatus)||void 0===t?void 0:t.status)!==d.h.Upgrading||(null===(n=s.databaseUpgradeStatus)||void 0===n?void 0:n.status)===d.h.Upgrading)&&5e3)},onSuccess:function(e){var r;(null===(r=e.databaseUpgradeStatus)||void 0===r?void 0:r.status)===d.h.Upgraded&&u.invalidateQueries(m.U.upgradeEligibility(t))}},o))}},1588:function(e,t,r){r.d(t,{zZ:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),d=r(20796),u=(r(27378),r(60037)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s,a,i,c,u,p,m,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(d.Q2,"/projects/").concat(s,"/custom-hostname"),{signal:r});case 5:if(!(a=e.sent).error){e.next=14;break}if(!(400===(null===(i=a.error)||void 0===i?void 0:i.code)&&(null===(c=a.error)||void 0===c||null===(u=c.message)||void 0===u?void 0:u.includes("not allowed to set up custom domain")))){e.next=10;break}return e.abrupt("return",{customDomain:null,status:"0_not_allowed"});case 10:if(!(400===(null===(p=a.error)||void 0===p?void 0:p.code)&&(null===(m=a.error)||void 0===m||null===(f=m.message)||void 0===f?void 0:f.includes("custom hostname configuration")))){e.next=13;break}return e.abrupt("return",{customDomain:null,status:"0_no_hostname_configured"});case 13:throw a.error;case 14:return e.abrupt("return",{customDomain:null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.result,status:a.status});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(u.A.list(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t},i))}},60037:function(e,t,r){r.d(t,{A:function(){return n}});var n={list:function(e){return["projects",e,"custom-domains"]}}},76309:function(e,t,r){var n;r.d(t,{l:function(){return n}}),function(e){e.TABLE="r",e.VIEW="v",e.MATERIALIZED_VIEW="m",e.FOREIGN_TABLE="f",e.PARTITIONED_TABLE="p"}(n||(n={}))},58069:function(e,t,r){r.d(t,{H:function(){return x}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(59403),l=r(51991),d=r(30630),u=["enabled"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)(o().mark((function e(t,r){var n,s,a,i,c,d,u,p,m,f,h,x,v,j,g,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.projectRef,s=t.connectionString,a=t.schema,i=void 0===a?"public":a,c=t.search,d=t.limit,u=void 0===d?100:d,p=t.page,m=void 0===p?0:p,f=t.sort,x="alphabetical"===(h=void 0===f?"alphabetical":f)?"c.relname asc":'"type_sort" asc, c.relname asc',v="alphabetical"===h?"r.name asc":"r.type_sort asc, r.name asc",j="\n    with records as (\n      select\n        c.oid::int8 as \"id\",\n        nc.nspname as \"schema\",\n        c.relname as \"name\",\n        c.relkind as \"type\",\n        case c.relkind\n          when 'r' then 1\n          when 'v' then 2\n          when 'm' then 3\n          when 'f' then 4\n          when 'p' then 5\n        end as \"type_sort\",\n        obj_description(c.oid) as \"comment\",\n        count(*) over() as \"count\"\n      from\n        pg_namespace nc\n        join pg_class c on nc.oid = c.relnamespace\n      where\n        c.relkind in ('r', 'v', 'm', 'f', 'p')\n        and not pg_is_other_temp_schema(nc.oid)\n        and (\n          pg_has_role(c.relowner, 'USAGE')\n          or has_table_privilege(\n            c.oid,\n            'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n          )\n          or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n        )\n        and nc.nspname = '".concat(i,"'\n        ").concat(c?"and c.relname ilike '%".concat(c,"%'"):"","\n      order by ").concat(x,"\n      limit ").concat(u,"\n      offset ").concat(m*u,"\n    )\n    select\n      jsonb_build_object(\n        'entities', coalesce(jsonb_agg(\n          jsonb_build_object(\n            'id', r.id,\n            'schema', r.schema,\n            'name', r.name,\n            'type', r.type,\n            'comment', r.comment\n          )\n          order by ").concat(v,"\n        ), '[]'::jsonb),\n        'count', coalesce(min(r.count), 0)\n      ) \"data\"\n    from records r;\n  "),e.next=6,(0,l.Rj)({projectRef:n,connectionString:s,sql:j,queryKey:["public","entity-types"]},r);case 6:return g=e.sent,b=g.result,e.abrupt("return",b[0]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){var t=e.projectRef,r=e.connectionString,n=e.schema,a=void 0===n?"public":n,i=e.search,o=e.limit,l=void 0===o?100:o,p=e.sort,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=h.enabled,v=void 0===x||x,j=(0,s.Z)(h,u);return(0,c.N)(d.C.list(t,{schema:a,search:i,sort:p,limit:l}),(function(e){var n=e.signal,s=e.pageParam;return f({projectRef:t,connectionString:r,schema:a,search:i,limit:l,page:s,sort:p},n)}),m({enabled:v&&"undefined"!==typeof t&&"undefined"!==typeof r,getNextPageParam:function(e,t){var r=t.length;if(!(r*l>=e.data.count))return r}},j))}},30630:function(e,t,r){r.d(t,{C:function(){return s}});var n=r(44285),s={list:function(e,t){return["projects",e,"entity-types"].concat((0,n.Z)(t?[t]:[]))}}},65966:function(e,t,r){r.d(t,{u:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),d=r(20796),u=(r(27378),r(61276)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.slug){e.next=3;break}throw new Error("slug is required");case 3:return e.next=5,(0,l.U2)("".concat(d.T5,"/organizations/").concat(n,"/members/reached-free-project-limit"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.slug,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(u.O.freeProjectLimitCheck(t),(function(e){var r=e.signal;return h({slug:t},r)}),f({enabled:a&&"undefined"!==typeof t},i))}},92493:function(e,t,r){r.d(t,{KR:function(){return v}});var n=r(90849),s=r(90089),a=r(55732),i=r(34707),o=r.n(i),c=r(36492),l=r(14919),d=r(20796),u=(r(27378),r(80965)),p=["enabled"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(o().mark((function e(t,r){var n,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(d.T5,"/storage/").concat(n,"/buckets"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,a=void 0===n||n,i=(0,s.Z)(r,p);return(0,c.a)(u.m.buckets(t),(function(e){var r=e.signal;return h({projectRef:t},r)}),f({enabled:a&&"undefined"!==typeof t},i))}},80965:function(e,t,r){r.d(t,{m:function(){return n}});var n={buckets:function(e){return["projects",e,"buckets"]}}},54564:function(e,t,r){r.d(t,{Z:function(){return n}});var n={usage:function(e){return["projects",e,"usage"]},orgUsage:function(e){return["organizations",e,"usage"]}}},33027:function(e,t,r){r.d(t,{DK:function(){return j}});var n=r(11246),s=r(90849),a=r(90089),i=r(55732),o=r(34707),c=r.n(o),l=r(36492),d=r(14919),u=r(20796),p=(r(27378),r(54564)),m=["enabled"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)(c().mark((function e(t,r){var n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,d.U2)("".concat(u.T5,"/projects/").concat(n,"/usage"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.enabled,i=void 0===s||s,o=(0,a.Z)(r,m);return(0,l.a)(p.Z.usage(t),(function(e){var r=e.signal;return x({projectRef:t},r)}),h({enabled:i&&"undefined"!==typeof t,select:function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,n.Z)(e,2),r=t[0],s=t[1];return"object"===typeof s?[r,h(h({},s),{},{usage:Number(s.usage)})]:[r,s]})))}},o))}},98248:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(85945),s=r(47510),a=r(90849),i=r(90089),o=r(27378),c=r(51991),l=["enabled"],d=["projectRef","connectionString","id"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.id;return"\n    select\n      c.oid::int8 as \"id\",\n      nc.nspname as \"schema\",\n      c.relname as \"name\",\n      c.relkind as \"type\",\n      obj_description(c.oid) as \"comment\",\n      count(*) over() as \"count\"\n    from\n      pg_namespace nc\n      join pg_class c on nc.oid = c.relnamespace\n    where\n      c.relkind in ('r', 'v', 'm', 'f', 'p')\n      and not pg_is_other_temp_schema(nc.oid)\n      and (\n        pg_has_role(c.relowner, 'USAGE')\n        or has_table_privilege(\n          c.oid,\n          'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n        )\n        or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n      )\n      and c.oid = '".concat(t,"'\n    limit 1;\n  ")},f=r(30630);var h=function(e,t){var r=(0,n.NL)(),a=(0,s.d2)().project,u=(0,o.useMemo)((function(){var t,n,s,i;return null===(t=r.getQueryCache().find(f.C.list(null===a||void 0===a?void 0:a.ref)))||void 0===t||null===(n=t.state.data)||void 0===n||null===(s=n.pages)||void 0===s||null===(i=s.flatMap((function(e){return e.data.entities})))||void 0===i?void 0:i.find((function(t){return t.id===e}))}),[null===a||void 0===a?void 0:a.ref,e]),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enabled,n=(0,i.Z)(t,l),s=e.projectRef,a=e.connectionString,o=e.id,u=(0,i.Z)(e,d);return(0,c.cp)({projectRef:s,connectionString:a,sql:m(p({id:o},u)),queryKey:["entity-type",o]},p({select:function(e){var t;return null!==(t=e.result[0])&&void 0!==t?t:null},enabled:r&&"undefined"!==typeof s&&"undefined"!==typeof o&&!isNaN(o)},n))}({projectRef:null===a||void 0===a?void 0:a.ref,connectionString:null===a||void 0===a?void 0:a.connectionString,id:e},{enabled:!u,onSettled:function(r){r||void 0===e||null===t||void 0===t||t(e)}}),x=h.data;return null!==u&&void 0!==u?u:x}},17737:function(e,t,r){r.d(t,{HN:function(){return E}});var n=r(11246),s=r(90089),a=r(44285),i=r(55732),o=r(43350),c=r(80040),l=r(90849),d=r(34707),u=r.n(d),p=r(48507),m=r(57476),f=r(98784),h=r(79588),x=(r(27378),r(5332)),v=r(61548),j=r(45355),g=r(14919),b=r(20796),y=r(27061),w=new URL(y.env.SUPABASE_PUBLIC_URL||"http://localhost:8000"),N=("".concat(y.env.LOGFLARE_URL,"/api/"),"".concat(w.origin,"/rest/v1/"),w.host,w.protocol.replace(":","")),k=(y.env.DEFAULT_PROJECT_NAME,["previewUrl"]);function O(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=null;function E(){return null===Z&&(Z=new L(null)),Z}var _=9e5,I=200,D=31536e4,T=".emptyFolderPlaceholder",R="Please do not close the browser until it's completed",L=function(){function e(t){var r=this;(0,o.Z)(this,e),(0,l.Z)(this,"projectRef",""),(0,l.Z)(this,"loaded",!1),(0,l.Z)(this,"view",v.De.COLUMNS),(0,l.Z)(this,"sortBy",v.Ye.NAME),(0,l.Z)(this,"sortByOrder","asc"),(0,l.Z)(this,"buckets",[]),(0,l.Z)(this,"selectedBucket",{}),(0,l.Z)(this,"columns",[]),(0,l.Z)(this,"openedFolders",[]),(0,l.Z)(this,"selectedItems",[]),(0,l.Z)(this,"selectedItemsToDelete",[]),(0,l.Z)(this,"selectedItemsToMove",[]),(0,l.Z)(this,"selectedFilePreview",{}),(0,l.Z)(this,"selectedFileCustomExpiry",void 0),(0,l.Z)(this,"DEFAULT_OPTIONS",{limit:I,offset:0,sortBy:{column:this.sortBy,order:this.sortByOrder}}),(0,l.Z)(this,"ui",null),(0,l.Z)(this,"supabaseClient",null),(0,l.Z)(this,"endpoint",""),(0,l.Z)(this,"filePreviewCache",[]),(0,l.Z)(this,"uploadProgress",0),(0,l.Z)(this,"abortController",null),(0,l.Z)(this,"initializeSupabaseClient",(function(e,t,n){r.supabaseClient=(0,p.eI)("".concat(b.Qy?"https":n,"://").concat(t),e,{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:function(e){},setItem:function(e,t){},removeItem:function(e){}}}})})),(0,l.Z)(this,"updateFileInPreviewCache",(function(e){var t=r.filePreviewCache.map((function(t){return t.id===e.id?e:t}));r.filePreviewCache=t})),(0,l.Z)(this,"addFileToPreviewCache",(function(e){var t=r.filePreviewCache.concat([e]);r.filePreviewCache=t})),(0,l.Z)(this,"clearFilePreviewCache",(function(){r.filePreviewCache=[]})),(0,l.Z)(this,"getLocalStorageKey",(function(){return"supabase-storage-".concat(r.projectRef)})),(0,l.Z)(this,"getLatestColumnIndex",(function(){return r.columns.length-1})),(0,l.Z)(this,"getCurrentlySelectedBucket",(function(){return r.columns.length>1?r.columns[1]:null})),(0,l.Z)(this,"getPathAlongOpenedFolders",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?r.openedFolders.length>0?"".concat(r.selectedBucket.name,"/").concat(r.openedFolders.map((function(e){return e.name})).join("/")):r.selectedBucket.name:r.openedFolders.map((function(e){return e.name})).join("/")})),(0,l.Z)(this,"abortApiCalls",(function(){r.abortController.abort(),r.abortController=new AbortController})),(0,l.Z)(this,"setLoaded",(function(e){r.loaded=e})),(0,l.Z)(this,"setSelectedBucket",(function(e){r.selectedBucket=e,r.clearOpenedFolders(),r.closeFilePreview(),r.clearSelectedItems()})),(0,l.Z)(this,"setView",(function(e){r.view=e,r.closeFilePreview(),r.updateExplorerPreferences()})),(0,l.Z)(this,"setSortBy",function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sortBy=t,r.closeFilePreview(),r.updateExplorerPreferences(),e.next=5,r.refetchAllOpenedFolders();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"setSortByOrder",function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sortByOrder=t,r.closeFilePreview(),r.updateExplorerPreferences(),e.next=5,r.refetchAllOpenedFolders();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"clearColumns",(function(){r.columns=[]})),(0,l.Z)(this,"pushColumnAtIndex",(function(e,t){r.columns=r.columns.slice(0,t+1).concat([e])})),(0,l.Z)(this,"popColumn",(function(){r.abortApiCalls(),r.columns=r.columns.slice(0,r.getLatestColumnIndex())})),(0,l.Z)(this,"popColumnAtIndex",(function(e){r.columns=r.columns.slice(0,e+1)})),(0,l.Z)(this,"setColumnIsLoadingMore",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.columns=r.columns.map((function(r,n){return n===e?C(C({},r),{},{isLoadingMoreItems:t}):r}))})),(0,l.Z)(this,"pushOpenedFolderAtIndex",(function(e,t){r.openedFolders=r.openedFolders.slice(0,t).concat(e)})),(0,l.Z)(this,"popOpenedFolders",(function(){r.openedFolders=r.openedFolders.slice(0,r.openedFolders.length-1)})),(0,l.Z)(this,"popOpenedFoldersAtIndex",(function(e){r.openedFolders=r.openedFolders.slice(0,e+1)})),(0,l.Z)(this,"clearOpenedFolders",(function(){r.openedFolders=[]})),(0,l.Z)(this,"setSelectedItems",(function(e){r.selectedItems=e})),(0,l.Z)(this,"clearSelectedItems",(function(e){r.selectedItems=void 0!==e?r.selectedItems.filter((function(t){return t.columnIndex!==e})):[]})),(0,l.Z)(this,"setSelectedItemsToDelete",(function(e){r.selectedItemsToDelete=e})),(0,l.Z)(this,"clearSelectedItemsToDelete",(function(){r.selectedItemsToDelete=[]})),(0,l.Z)(this,"setSelectedItemsToMove",(function(e){r.selectedItemsToMove=e})),(0,l.Z)(this,"clearSelectedItemsToMove",(function(){r.selectedItemsToMove=[]})),(0,l.Z)(this,"setSelectedFileCustomExpiry",(function(e){r.selectedFileCustomExpiry=e})),(0,l.Z)(this,"addNewFolderPlaceholder",(function(e){var t=v.fh.FOLDER,n=-1===e?r.getLatestColumnIndex():e;r.addTempRow(t,"Untitled folder",v.R9.EDITING,n,{},!0)})),(0,l.Z)(this,"addNewFolder",function(){var e=(0,i.Z)(u().mark((function e(t,n){var s,a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1,null!==(s=r.sanitizeNameForDuplicateInColumn(t,false,n))){e.next=4;break}return e.abrupt("return");case 4:if(/^[a-zA-Z0-9_-\s]*$/.test(s)){e.next=6;break}return e.abrupt("return",r.ui.setNotification({message:"Folder name contains invalid special characters",category:"error",duration:8e3}));case 6:if(!s.includes("/")&&!s.includes("\\")){e.next=8;break}return e.abrupt("return",r.ui.setNotification({message:"Folder names should not have forward or back slashes.",category:"error",duration:8e3}));case 8:if(0!==s.length){e.next=10;break}return e.abrupt("return",r.removeTempRows(n));case 10:return r.updateFolderAfterEdit(s,n),a="".concat(s,"/").concat(T),i=r.openedFolders.slice(0,n).map((function(e){return e.name})).join("/"),o=i.length>0?"".concat(i,"/").concat(a):a,e.next=16,r.supabaseClient.storage.from(r.selectedBucket.name).upload(o,new File([],T));case 16:if(!(i.length>0)){e.next=19;break}return e.next=19,(0,g.$v)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects"),{paths:["".concat(i,"/").concat(T)]});case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,l.Z)(this,"setFilePreview",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,m,h,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.metadata)||void 0===n?void 0:n.size,!(null===(s=t.metadata)||void 0===s?void 0:s.mimetype)||!a){e.next=25;break}if(!(a>1e7)){e.next=6;break}return r.selectedFilePreview=C(C({},t),{},{previewUrl:"skipped"}),e.abrupt("return");case 6:if(r.selectedFilePreview=C(C({},t),{},{previewUrl:"loading"}),c=(0,f.find)(r.filePreviewCache,{id:t.id}),l=null!==(i=null===c||void 0===c?void 0:c.fetchedAt)&&void 0!==i?i:null,d=null!==(o=null===c||void 0===c?void 0:c.expiresIn)&&void 0!==o?o:null,!(p=null!==l&&null!==d)||l+1e3*d<Date.now()){e.next=16;break}r.selectedFilePreview=C(C({},t),{},{previewUrl:c.url}),e.next=23;break;case 16:return e.next=18,r.fetchFilePreview(t.name);case 18:m=e.sent,h=r.selectedBucket.public?"".concat(m,"?t=").concat((new Date).toISOString()):m,r.selectedFilePreview=C(C({},t),{},{previewUrl:h}),x={id:t.id,url:m,expiresIn:D,fetchedAt:Date.now()},p?r.updateFileInPreviewCache(x):r.addFileToPreviewCache(x);case 23:e.next=26;break;case 25:r.selectedFilePreview=C(C({},t),{},{previewUrl:null});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"closeFilePreview",(function(){r.selectedFilePreview={}})),(0,l.Z)(this,"getFileUrl",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i,o,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:0,void 0===(s=(0,f.find)(r.filePreviewCache,{id:t.id}))||0!==n){e.next=6;break}return e.abrupt("return",s.url);case 6:return e.next=8,r.fetchFilePreview(t.name,n);case 8:return a=e.sent,(i=new URL(a)).searchParams.set("t",(new Date).toISOString()),o=i.toString(),c={id:t.id,url:o,expiresIn:D,fetchedAt:Date.now()},r.addFileToPreviewCache(c),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"openBucket",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,s=t.name,-1,(0,f.isEqual)(r.selectedBucket,t)){e.next=6;break}return r.setSelectedBucket(t),e.next=6,r.fetchFolderContents(n,s,-1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"getFile",function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){return t.file(e,r)}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.error("getFile error:",e.t0),e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"getFilesDataTransferItems",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,i,o,c,l,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.ui.setNotification({category:"loading",message:"Retrieving items to upload..."}),s=[],i=[],o=O(t);try{for(o.s();!(c=o.n()).done;)l=c.value,i.push(l.webkitGetAsEntry())}catch(u){o.e(u)}finally{o.f()}case 5:if(!(i.length>0)){e.next=25;break}if(!(d=i.shift()||{}).isFile){e.next=14;break}return e.next=10,r.getFile(d);case 10:void 0!==(p=e.sent)&&(p.path=d.fullPath.slice(1),s.push(p)),e.next=23;break;case 14:if(!d.isDirectory){e.next=23;break}return e.t0=i.push,e.t1=i,e.t2=a.Z,e.next=20,r.readAllDirectoryEntries(d.createReader());case 20:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 23:e.next=5;break;case 25:return x.ZP.dismiss(n),e.abrupt("return",s);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"readAllDirectoryEntries",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,r.readEntriesPromise(t);case 3:s=e.sent;case 4:if(!(s.length>0)){e.next=11;break}return n.push.apply(n,(0,a.Z)(s)),e.next=8,r.readEntriesPromise(t);case 8:s=e.sent,e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"readEntriesPromise",function(){var e=(0,i.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,r){t.readEntries(e,r)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("readEntriesPromise error:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"uploadFiles",function(){var e=(0,i.Z)(u().mark((function e(t,n){var s,a,o,c,l,d,p,m,h,j,b,y,w,N,k,O,P,S,C,Z=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Z.length>2&&void 0!==Z[2]&&Z[2],l=new Date,d=!0,!c){e.next=9;break}return e.next=6,r.getFilesDataTransferItems(t);case 6:e.t0=e.sent.filter((function(e){return!e.path.includes("#/")})),e.next=10;break;case 9:e.t0=Array.from(t);case 10:return p=e.t0,m=-1===n?r.getLatestColumnIndex():n,h=(null!==(s=null===(a=r.columns)||void 0===a||null===(o=a[m])||void 0===o?void 0:o.items)&&void 0!==s?s:[]).filter((function(e){return!e.id})).map((function(e){return e.name})),j=p.map((function(e){if(!e.path)return e;var t=e.path.split("/"),s=t.length>1?t[0]:null;if(h.includes(s)){var a=r.sanitizeNameForDuplicateInColumn(s,d,n);t[0]=a,e.path=t.join("/")}return e})),r.uploadProgress=0,b=[],y=j.length,w=0,N=0,k=r.openedFolders.slice(0,m).map((function(e){return e.name})).join("/"),O=r.ui.setNotification({category:"loading",message:"Uploading ".concat(j.length," file").concat(j.length>1?"s":"","..."),description:R,progress:0}),P=j.map((function(e){var t,n={cacheControl:"3600"},s={mimetype:e.type,size:e.size},a=(null!==(t=null===e||void 0===e?void 0:e.path)&&void 0!==t?t:"").split("/").length>1,o=a?e.name:r.sanitizeNameForDuplicateInColumn(e.name,d),c=(0,f.has)(e,["path"])&&a?e.path:o,l=k.length>0?"".concat(k,"/").concat(c):c;if(a){var p=e.path.split("/")[0];b.includes(p)||(r.addTempRow(v.fh.FOLDER,p,v.R9.LOADING,m,s),b.push(p))}else r.addTempRow(v.fh.FILE,o,v.R9.LOADING,m,s);return function(){return new Promise(function(){var t=(0,i.Z)(u().mark((function t(s){var a,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.supabaseClient.storage.from(r.selectedBucket.name).upload(l,e,n);case 2:a=t.sent,i=a.error,r.uploadProgress=r.uploadProgress+1/j.length,i?(N+=1,r.ui.setNotification({message:"Failed to upload ".concat(e.name,": ").concat(i.message),category:"error"}),s()):(w+=1,s());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),S=(0,f.chunk)(P,10),e.prev=23,e.next=26,S.reduce(function(){var e=(0,i.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.allSettled(n.map((function(e){return e()})));case 4:r.ui.setNotification({id:O,category:"loading",message:"Uploading ".concat(j.length," file").concat(j.length>1?"s":"","..."),description:R,progress:100*r.uploadProgress});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 26:if(!(w>0)){e.next=29;break}return e.next=29,(0,g.$v)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects"),{paths:["".concat(k,"/").concat(T)]});case 29:return e.next=31,r.refetchAllOpenedFolders();case 31:0===y?x.ZP.dismiss(O):N===y?r.ui.setNotification({id:O,category:"error",message:"Failed to upload ".concat(y," file").concat(y>1?"s":"","!")}):w===y?r.ui.setNotification({id:O,category:"success",message:"Successfully uploaded ".concat(y," file").concat(y>1?"s":"","!")}):r.ui.setNotification({id:O,category:"success",message:"Successfully uploaded ".concat(w," out of ").concat(y," file").concat(y>1?"s":"","!")}),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(23),r.ui.setNotification({id:O,error:e.t1,message:"Failed to upload files",category:"error"});case 37:C=new Date,console.log("Total time taken for ".concat(j.length," files: ").concat((C-l)/1e3," seconds"));case 39:case"end":return e.stop()}}),e,null,[[23,34]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,l.Z)(this,"moveFiles",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,f.compact)(t.split("/")),s=n.join("/"),a=0,r.clearSelectedItems(),o=(0,x.ZP)("Please do not close the browser until the move is completed",{duration:1/0}),e.next=7,Promise.all(r.selectedItemsToMove.map(function(){var e=(0,i.Z)(u().mark((function e(n){var i,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.openedFolders.slice(0,n.columnIndex).map((function(e){return e.name})).join("/"),o=i.length>0?"".concat(i,"/").concat(n.name):n.name,c=t.length>0?"".concat(s,"/").concat(n.name):n.name,e.next=5,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/move"),{from:o,to:c});case 5:(l=e.sent).error&&(a+=1,r.ui.setNotification({category:"error",message:l.error.message}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return a===r.selectedItemsToMove.length?r.ui.setNotification({message:"Failed to move files",category:"error"}):r.ui.setNotification({message:"Successfully moved ".concat(r.selectedItemsToMove.length-a," to ").concat(s),category:"success"}),x.ZP.dismiss(o),c=r.selectedItemsToMove.map((function(e){return e.id})),l=r.filePreviewCache.filter((function(e){return!c.includes(e.id)})),r.filePreviewCache=l,e.next=14,r.refetchAllOpenedFolders();case 14:r.clearSelectedItemsToMove();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"fetchFilePreview",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i,o,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:0,s=!1,a=r.getPathAlongOpenedFolders(s),i=a.length>0?"".concat(a,"/").concat(t):t,!r.selectedBucket.public){e.next=15;break}return e.next=7,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/public-url"),{path:i});case 7:if((o=e.sent).error){e.next=12;break}return e.abrupt("return",o.publicUrl);case 12:console.error("Failed to fetch public file preview",o.error.message);case 13:e.next=23;break;case 15:return e.next=17,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/sign"),{path:i,expiresIn:n||D});case 17:if((c=e.sent).error){e.next=22;break}return e.abrupt("return",c.signedUrl);case 22:console.error("Failed to fetch signed url preview",c.error.message);case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"deleteFiles",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,o,c,l,d,p,m=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>1&&void 0!==m[1]&&m[1],r.closeFilePreview(),s=0,a=(0,f.some)(t,"prefix")?t.map((function(e){return"".concat(e.prefix,"/").concat(e.name)})):t.map((function(e){var t=e.name,n=e.columnIndex,s=r.openedFolders.slice(0,n).map((function(e){return e.name})).join("/");return r.updateRowStatus(t,v.R9.LOADING,n),s.length>0?"".concat(s,"/").concat(t):t})),r.clearSelectedItems(),o=r.ui.setNotification({category:"loading",message:"Deleting ".concat(a.length," file(s)..."),description:R,progress:0}),c=(0,f.chunk)(a,2).map((function(e){return function(){return s+=e.length/a.length,(0,g.$v)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.name,"/objects"),{paths:e})}})),e.next=9,(0,f.chunk)(c,2).reduce(function(){var e=(0,i.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.all(n.map((function(e){return e()})));case 4:r.ui.setNotification({id:o,category:"loading",message:"Deleting ".concat(a.length," file(s)..."),description:R,progress:100*s});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 9:if(l=t.map((function(e){return e.id})),d=r.filePreviewCache.filter((function(e){return!l.includes(e.id)})),r.filePreviewCache=d,n){e.next=22;break}return p=(0,f.uniq)(a.map((function(e){var t=e.split("/");return t.slice(0,t.length-1).join("/")}))),e.next=16,Promise.all(p.map((function(e){return r.validateParentFolderEmpty(e)})));case 16:return r.ui.setNotification({id:o,category:"success",message:"Successfully deleted ".concat(a.length," file(s)")}),e.next=19,r.refetchAllOpenedFolders();case 19:r.clearSelectedItemsToDelete(),e.next=23;break;case 22:x.ZP.dismiss(o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"downloadFolder",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,o,c,l,d,p,h,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,s=r.ui.setNotification({category:"loading",message:"Retrieving files from folder..."}),e.next=4,r.getAllItemsAlongFolder(t);case 4:return a=e.sent,r.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(a.length," files..."),description:R,progress:0}),o=a.map((function(e){var t,s,o=null!==(t=null===(s=e.metadata)||void 0===s?void 0:s.mimetype)&&void 0!==t?t:null;return function(){return new Promise(function(){var t=(0,i.Z)(u().mark((function t(s){var i,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/download"),{path:"".concat(e.prefix,"/").concat(e.name)});case 2:if(i=t.sent,n+=1/a.length,i.error){t.next=11;break}return t.next=7,i.blob();case 7:c=t.sent,s({name:e.name,prefix:e.prefix,blob:new Blob([c],{type:o})}),t.next=13;break;case 11:console.error("Failed to download file","".concat(e.prefix,"/").concat(e.name)),s(!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),c=(0,f.chunk)(o,10),e.next=10,c.reduce(function(){var e=(0,i.Z)(u().mark((function e(t,i){var o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return o=e.sent,e.next=5,Promise.allSettled(i.map((function(e){return e()})));case 5:return c=e.sent,r.ui.setNotification({id:s,category:"loading",message:"Downloading ".concat(a.length," file").concat(a.length>1?"s":"","..."),description:R,progress:100*n}),e.abrupt("return",(null!==o&&void 0!==o?o:[]).concat(c.map((function(e){return e.value})).filter(Boolean)));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 10:if(l=e.sent,d=new m.U5("application/zip"),p=new m._Q(d,{bufferedWrite:!0}),0!==l.length){e.next=15;break}return e.abrupt("return",r.ui.setNotification({id:s,category:"error",message:"Failed to download files from the ".concat(t.name)}));case 15:return l.forEach((function(e){e.blob&&p.add("".concat(e.prefix,"/").concat(e.name),new m.Nt(e.blob))})),e.t0=URL,e.next=19,p.close();case 19:e.t1=e.sent,h=e.t0.createObjectURL.call(e.t0,e.t1),(x=document.createElement("a")).href=h,x.setAttribute("download","".concat(t.name,".zip")),document.body.appendChild(x),x.click(),x.parentNode.removeChild(x),r.ui.setNotification({id:s,category:"success",message:'Successfully downloaded folder "'.concat(t.name,'"')});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"downloadSelectedFiles",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,o,c,l,d,p,h,x,v,j;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.min.apply(Math,(0,a.Z)(t.map((function(e){return e.columnIndex})))),s=t.map((function(e){var t=e.name,s=e.columnIndex,a=r.openedFolders.slice(n,s).map((function(e){return e.name})).join("/"),i=a.length>0?"".concat(a,"/").concat(t):t;return C(C({},e),{},{formattedPathToFile:i})})),o=0,!0,!1,c=r.ui.setNotification({category:"loading",message:"Downloading ".concat(t.length," files...")}),l=s.map((function(e){return function(){return new Promise(function(){var t=(0,i.Z)(u().mark((function t(n){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.downloadFile(e,false,true);case 2:a=t.sent,o+=1/s.length,n(C(C({},a),{},{name:e.formattedPathToFile}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})),d=(0,f.chunk)(l,10),e.next=10,d.reduce(function(){var e=(0,i.Z)(u().mark((function e(n,s){var a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return a=e.sent,e.next=5,Promise.allSettled(s.map((function(e){return e()})));case 5:return i=e.sent,r.ui.setNotification({id:c,category:"loading",message:"Downloading ".concat(t.length," file").concat(t.length>1?"s":"","..."),description:R,progress:100*o}),e.abrupt("return",(null!==a&&void 0!==a?a:[]).concat(i.map((function(e){return e.value})).filter(Boolean)));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 10:return p=e.sent,h=new m.U5("application/zip"),x=new m._Q(h,{bufferedWrite:!0}),p.forEach((function(e){x.add(e.name,new m.Nt(e.blob))})),e.t0=URL,e.next=17,x.close();case 17:e.t1=e.sent,v=e.t0.createObjectURL.call(e.t0,e.t1),(j=document.createElement("a")).href=v,j.setAttribute("download","supabase-files.zip"),document.body.appendChild(j),j.click(),j.parentNode.removeChild(j),r.ui.setNotification({id:c,category:"success",message:"Successfully downloaded ".concat(p.length," files")});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"downloadFile",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,m,f,h,x,v,j=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(j.length>1&&void 0!==j[1])||j[1],i=j.length>2&&void 0!==j[2]&&j[2],o=t.name,c=null!==(n=null===t||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.mimetype)&&void 0!==n?n:null,l=a?r.ui.setNotification({category:"loading",message:"Retrieving ".concat(o,"...")}):void 0,d=r.openedFolders.slice(0,t.columnIndex).map((function(e){return e.name})).join("/"),p=d.length>0?"".concat(d,"/").concat(o):o,e.next=9,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/download"),{path:p});case 9:if((m=e.sent).error){e.next=29;break}return e.next=13,m.blob();case 13:if(f=e.sent,h=new Blob([f],{type:c}),!i){e.next=17;break}return e.abrupt("return",{name:o,blob:h});case 17:return x=window.URL.createObjectURL(h),(v=document.createElement("a")).href=x,v.setAttribute("download","".concat(o)),document.body.appendChild(v),v.click(),v.parentNode.removeChild(v),window.URL.revokeObjectURL(f),l&&r.ui.setNotification({id:l,category:"success",message:"Downloading ".concat(o)}),e.abrupt("return",!0);case 29:return l&&r.ui.setNotification({error:m.error,id:l,category:"error",message:"Failed to download ".concat(o)}),e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"renameFile",function(){var e=(0,i.Z)(u().mark((function e(t,n,a){var i,o,c,l,d,p,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=t.name)!==n&&0!==n.length){e.next=5;break}r.updateRowStatus(i,v.R9.READY,a),e.next=23;break;case 5:return r.updateRowStatus(i,v.R9.LOADING,a,n),!1,o=r.getPathAlongOpenedFolders(false),c=o.length>0?"".concat(o,"/").concat(i):i,l=o.length>0?"".concat(o,"/").concat(n):n,e.next=12,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/move"),{from:c,to:l});case 12:if(!(d=e.sent).error){e.next=17;break}r.ui.setNotification({category:"error",message:d.error.message}),e.next=23;break;case 17:return r.ui.setNotification({category:"success",message:'Successfully renamed "'.concat(i,'" to "').concat(n,'"')}),p=r.filePreviewCache.filter((function(e){return e.id!==t.id})),r.filePreviewCache=p,r.selectedFilePreview.name===i&&(t.previewUrl,m=(0,s.Z)(t,k),r.setFilePreview(C(C({},m),{},{name:n}))),e.next=23,r.refetchAllOpenedFolders();case 23:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"fetchFolderContents",function(){var e=(0,i.Z)(u().mark((function e(t,n,s){var a,i,o,c,l,d=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:"",r.abortApiCalls(),r.updateRowStatus(n,v.R9.LOADING,s),r.pushColumnAtIndex({id:t,name:n,status:v.R9.LOADING,items:[]},s),i=r.openedFolders.map((function(e){return e.name})).join("/"),o={limit:I,offset:0,search:a,sortBy:{column:r.sortBy,order:r.sortByOrder}},e.next=8,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/list"),{path:i,options:o},{abortSignal:r.abortController.signal});case 8:c=e.sent,r.updateRowStatus(n,v.R9.READY,s),c.error||(l=r.formatFolderItems(c),r.pushColumnAtIndex({id:t||n,name:n,items:l,hasMoreItems:l.length===I,isLoadingMoreItems:!1},s));case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"fetchMoreFolderContents",function(){var e=(0,i.Z)(u().mark((function e(t,n){var s,a,i,o,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]?l[2]:"",r.setColumnIsLoadingMore(t),a=r.openedFolders.map((function(e){return e.name})).join("/"),i={limit:I,offset:n.items.length,search:s,sortBy:{column:r.sortBy,order:r.sortByOrder}},e.next=6,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/list"),{path:a,options:i},{abortSignal:r.abortController.signal});case 6:(o=e.sent).error||(c=r.formatFolderItems(o),r.columns=r.columns.map((function(e,r){return r===t?C(C({},e),{},{items:e.items.concat(c),isLoadingMoreItems:!1,hasMoreItems:o.length===I}):e})));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,l.Z)(this,"refetchAllOpenedFolders",(0,i.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.openedFolders.map((function(e){return e.name})),e.next=3,r.fetchFoldersByPath(t);case 3:case"end":return e.stop()}}),e)})))),(0,l.Z)(this,"fetchFoldersByPath",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[""].concat(t),e.next=3,Promise.all(n.map(function(){var e=(0,i.Z)(u().mark((function e(n,s){var a,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.slice(0,s).join("/"),i={limit:I,offset:0,sortBy:{column:r.sortBy,order:r.sortByOrder}},e.next=4,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/list"),{path:a,options:i});case 4:if(!(o=e.sent).error){e.next=8;break}return console.error("Error at fetchFoldersByPath:",o.error),e.abrupt("return",[]);case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:s=e.sent,a=s.map((function(e,t){var s=r.formatFolderItems(e);return{id:null,name:0===t?r.selectedBucket.name:n[t],items:s,hasMoreItems:s.length===I,isLoadingMoreItems:!1}})),r.columns=a,o=t.map((function(e,t){var r=(0,f.find)(a[t].items,{name:e});return r||{id:null,name:e,type:v.fh.FOLDER,status:v.R9.READY}})),r.openedFolders=o;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"validateParentFolderEmpty",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.id,"/objects/list"),{path:t,options:r.DEFAULT_OPTIONS});case 2:if((n=e.sent).error||0!==n.length){e.next=7;break}return s="".concat(t,"/").concat(T),e.next=7,r.supabaseClient.storage.from(r.selectedBucket.name).upload(s,new File([],T));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"deleteFolder",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!0,e.next=3,r.getAllItemsAlongFolder(t);case 3:return a=e.sent,e.next=6,r.deleteFiles(a,s);case 6:if((null===(n=r.openedFolders[r.openedFolders.length-1])||void 0===n?void 0:n.name)===t.name&&(r.popColumnAtIndex(t.columnIndex),r.popOpenedFoldersAtIndex(t.columnIndex-1)),i=r.openedFolders.map((function(e){return e.name})).join("/"),!(i.length>0)){e.next=12;break}return e.next=12,r.validateParentFolderEmpty(i);case 12:return e.next=14,r.refetchAllOpenedFolders();case 14:r.clearSelectedItemsToDelete(),r.ui.setNotification({category:"success",message:"Successfully deleted ".concat(t.name)});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"renameFolder",function(){var e=(0,i.Z)(u().mark((function e(t,n,s){var a,o,c,l,d,p,m,h,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.name)!==n){e.next=3;break}return e.abrupt("return",r.updateRowStatus(a,v.R9.READY,s));case 3:if(o=r.ui.setNotification({category:"loading",message:"Renaming folder to ".concat(n),description:R,progress:0}),!n.includes("/")&&!n.includes("\\")){e.next=6;break}return e.abrupt("return",r.ui.setNotification({message:"Folder name cannot contain forward or back slashes.",type:"error"}));case 6:return r.updateRowStatus(a,v.R9.LOADING,s,n),e.next=9,r.getAllItemsAlongFolder(t);case 9:return c=e.sent,l=0,d=!1,p=c.map((function(e){var t="".concat(e.prefix,"/").concat(e.name),a=t.split("/"),o=a.slice(0,s).concat(n).concat(a.slice(s+1)).join("/");return function(){return new Promise(function(){var e=(0,i.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l+=1/c.length,e.next=3,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.name,"/objects/move"),{from:t,to:o});case 3:e.sent.error&&(d=!0,r.ui.setNotification({category:"error",message:"Failed to move ".concat(t," to the new folder")})),n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})),m=(0,f.chunk)(p,2),e.prev=14,e.next=17,m.reduce(function(){var e=(0,i.Z)(u().mark((function e(t,s){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,Promise.all(s.map((function(e){return e()})));case 4:r.ui.setNotification({id:o,category:"loading",message:"Renaming folder to ".concat(n),description:R,progress:100*l});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve());case 17:return d?r.ui.setNotification({id:o,message:"Renamed folder to ".concat(n," with some errors"),category:"error"}):r.ui.setNotification({id:o,message:"Successfully renamed folder to ".concat(n),category:"success"}),e.next=20,r.refetchAllOpenedFolders();case 20:h=c.map((function(e){return e.id})),x=r.filePreviewCache.filter((function(e){return!h.includes(e.id)})),r.filePreviewCache=x,e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),r.ui.setNotification({id:o,message:"Failed to rename folder to ".concat(n),category:"error"});case 28:case"end":return e.stop()}}),e,null,[[14,25]])})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,l.Z)(this,"getAllItemsAlongFolder",function(){var e=(0,i.Z)(u().mark((function e(t){var n,s,a,i,o,c,l,d,p,m,f,h,x,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],c="",l=t.name,d=t.columnIndex,void 0===(p=t.prefix)?(m=r.openedFolders.slice(0,d).map((function(e){return e.name})).join("/"),c=m.length>0?"".concat(m,"/").concat(l):l):c="".concat(p,"/").concat(l),f={limit:1e4,offset:0,sortBy:{column:r.sortBy,order:r.sortByOrder}},h=[];case 6:return e.next=8,(0,g.v_)("".concat(r.endpoint,"/buckets/").concat(r.selectedBucket.name,"/objects/list"),{path:c,options:f});case 8:if(x=e.sent,h=h.concat(x),f.offset+=f.limit,!((x||[]).length<f.limit)){e.next=13;break}return e.abrupt("break",15);case 13:e.next=6;break;case 15:return v=null!==(n=null===(s=h)||void 0===s?void 0:s.filter((function(e){return null===e.id})))&&void 0!==n?n:[],(null!==(a=null===(i=h)||void 0===i?void 0:i.filter((function(e){return null!==e.id})))&&void 0!==a?a:[]).forEach((function(e){return o.push(C(C({},e),{},{prefix:c}))})),e.next=20,Promise.all(v.map((function(e){return r.getAllItemsAlongFolder(C(C({},e),{},{prefix:c}))})));case 20:return e.sent.map((function(e){e.map((function(e){return o.push(e)}))})),e.abrupt("return",o);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l.Z)(this,"sanitizeNameForDuplicateInColumn",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.getLatestColumnIndex(),a=r.columns[s],i=a.items.filter((function(e){return e.status!==v.R9.EDITING})),o=i.filter((function(t){return t.name===e})).length>0;if(o){if(t){var c=e.split("."),l=(0,n.Z)(c,2),d=l[0],u=l[1],p=new RegExp("".concat(d," \\([-0-9]+\\)").concat(u?"."+u:"","$")),m=i.filter((function(e){return e.name.match(p)})),f=d+" (".concat(m.length+1,")");return u?"".concat(f,".").concat(u):f}return r.ui.setNotification({message:"The name ".concat(e," already exists in the current directory. Please use a different name."),category:"error",duration:4e3}),null}return e})),(0,l.Z)(this,"formatFolderItems",(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=null!==(e=null===(t=null!==r&&void 0!==r?r:[])||void 0===t?void 0:t.filter((function(e){return e.name!==T})).map((function(e){var t=e.id?v.fh.FILE:v.fh.FOLDER,r=Number(new Date)-Number(new Date(e.created_at)),n=t===v.fh.FILE&&!e.metadata&&r>=_,s=t===v.fh.FILE&&!e.metadata&&r<=_?v.R9.LOADING:v.R9.READY;return C(C({},e),{},{type:t,status:s,isCorrupted:n})})))&&void 0!==e?e:[];return n})),(0,l.Z)(this,"addTempRow",(function(e,t,n,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=r.columns.map((function(r,o){if(o===s){var c={type:e,name:t,status:n,metadata:a},l=i?[c].concat(r.items):r.items.concat([c]);return C(C({},r),{},{items:l})}return r}));r.columns=o})),(0,l.Z)(this,"removeTempRows",(function(e){var t=r.columns.map((function(t,r){if(r===e){var n=t.items.filter((function(e){return(0,f.has)(e,"id")}));return C(C({},t),{},{items:n})}return t}));r.columns=t})),(0,l.Z)(this,"setSelectedItemToRename",(function(e){r.updateRowStatus(e.name,v.R9.EDITING,e.columnIndex)})),(0,l.Z)(this,"updateRowStatus",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.getLatestColumnIndex(),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=r.columns.map((function(r,a){if(a===n){var i=r.items.map((function(r){return r.name===e?C(C({},r),{},{status:t},s&&{name:s}):r}));return C(C({},r),{},{items:i})}return r}));r.columns=a})),(0,l.Z)(this,"updateFolderAfterEdit",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.getLatestColumnIndex(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.R9.READY,s=r.columns.map((function(r,s){if(s===t){var a=r.items.map((function(t){if(t.status===v.R9.EDITING){var r=(new Date).toISOString();return C(C({},t),{},{status:n,name:e,createdAt:r,lastAccessedAt:r,updatedAt:r,metadata:null,id:null})}return t}));return C(C({},r),{},{items:a})}return r}));r.columns=s})),(0,l.Z)(this,"updateExplorerPreferences",(function(){var e=r.getLocalStorageKey(),t={view:r.view,sortBy:r.sortBy,sortByOrder:r.sortByOrder};return localStorage.setItem(e,JSON.stringify(t)),t})),(0,l.Z)(this,"loadExplorerPreferences",(function(){var e,t,n=r.getLocalStorageKey(),s=null!==(e=null===(t=localStorage)||void 0===t?void 0:t.getItem(n))&&void 0!==e?e:void 0;if(void 0!==s){var a=JSON.parse(s),i=a.view,o=a.sortBy,c=a.sortByOrder;r.view=i,r.sortBy=o,r.sortByOrder=c}else{var l=r.updateExplorerPreferences(),d=l.view,u=l.sortBy,p=l.sortByOrder;r.view=d,r.sortBy=u,r.sortByOrder=p}})),(0,l.Z)(this,"selectRangeItems",(function(e,t){var n=r.columns[e].items,s=n[t],a=r.selectedItems.map((function(e){return e.id})),i=a[a.length-1],o=(0,f.findIndex)(n,{id:i}),c=Math.min(t,o),l=Math.max(t,o),d=n.slice(c,l+1).map((function(t){return C(C({},t),{},{columnIndex:e})}));if(t<o&&d.reverse(),a.includes(s.id)){var u=d.map((function(e){return e.id}));r.setSelectedItems(r.selectedItems.filter((function(e){return e.id===s.id||!u.includes(e.id)})))}else r.setSelectedItems((0,f.uniqBy)(r.selectedItems.concat(d),"id"))})),(0,h.ky)(this,{supabaseClient:!1}),this.projectRef=t,this.ui=(0,j.oR)().ui,this.abortController=new AbortController}return(0,c.Z)(e,[{key:"initStore",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N;this.projectRef=e,this.endpoint="".concat(b.T5,"/storage/").concat(e),void 0!==r&&this.initializeSupabaseClient(r,t,n)}},{key:"currentBucketName",get:function(){return this.selectedBucket.name}}]),e}()},75965:function(e,t,r){r.d(t,{vc:function(){return i.Z},RB:function(){return o},UW:function(){return a}});var n,s,a=[{text:"Working with @supabase has been one of the best dev experiences I've had lately. Incredibly easy to set up, great documentation, and so many fewer hoops to jump through than the competition. I definitely plan to use it on any and all future projects.",url:"https://twitter.com/thatguy_tex/status/1497602628410388480",handle:"thatguy_tex",img_url:"/images/twitter-profiles/09HouOSt_400x400.jpg"},{text:"@supabase is just \ud83e\udd2f Now I see why a lot of people love using it as a backend for their applications. I am really impressed with how easy it is to set up an Auth and then just code it together for the frontend. @IngoKpp now I see your joy with Supabase #coding #fullstackwebdev",url:"https://twitter.com/IxoyeDesign/status/1497473731777728512",handle:"IxoyeDesign",img_url:"/images/twitter-profiles/C8opIL-g_400x400.jpg"},{text:"I've been using @supabase for two personal projects and it has been amazing being able to use the power of Postgres and don't have to worry about the backend",url:"https://twitter.com/varlenneto/status/1496595780475535366",handle:"varlenneto",img_url:"/images/twitter-profiles/wkXN0t_F_400x400.jpg"},{text:"Y'all @supabase + @nextjs is amazing! \ud83d\ude4c Barely an hour into a proof-of-concept and already have most of the functionality in place. \ud83e\udd2f\ud83e\udd2f\ud83e\udd2f",url:"https://twitter.com/justinjunodev/status/1500264302749622273",handle:"justinjunodev",img_url:"/images/twitter-profiles/9k_ZB9OO_400x400.jpg"},{text:"And thanks to @supabase, I was able to go from idea to launched feature in a matter of hours. Absolutely amazing!",url:"https://twitter.com/BraydonCoyer/status/1511071369731137537",handle:"BraydonCoyer",img_url:"/images/twitter-profiles/8YxkpW8f_400x400.jpg"},{text:"Contributing to open-source projects and seeing merged PRs gives enormous happiness! Special thanks to @supabase, for giving this opportunity by staying open-source and being junior-friendly\u270c\ud83c\udffc",url:"https://twitter.com/damlakoksal/status/1511436907984662539",handle:"damlakoksal",img_url:"/images/twitter-profiles/N8EfTFs7_400x400.jpg"},{text:"Holy crap. @supabase is absolutely incredible. Most elegant backend as a service I've ever used. This is a dream.",url:"https://twitter.com/kentherogers/status/1512609587110719488",handle:"KenTheRogers",img_url:"/images/twitter-profiles/9l9Td-Fz_400x400.jpg"},{text:"Over the course of a few weeks, we migrated 125.000 users (email/pw, Gmail, Facebook, Apple logins) from Auth0 to @supabase and have now completed the migration. I'm just glad the migration is done \ud83d\ude05 Went well, besides a few edge cases (duplicate emails/linked accounts)",url:"https://twitter.com/kevcodez/status/1518548401587204096",handle:"kevcodez",img_url:"/images/twitter-profiles/t6lpcRcn_400x400.jpg"},{text:"Using @supabase I'm really pleased on the power of postgres (and sql in general). Despite being a bit dubious about the whole backend as a service thing I have to say I really don't miss anything. The whole experience feel very robust and secure.",url:"https://twitter.com/paoloricciuti/status/1497691838597066752",handle:"PaoloRicciuti",img_url:"/images/twitter-profiles/OCDKFUOp_400x400.jpg"},{text:"@supabase is lit. It took me less than 10 minutes to setup, the DX is just amazing.",url:"https://twitter.com/saxxone/status/1500812171063828486",handle:"saxxone",img_url:"/images/twitter-profiles/BXi6z1M7_400x400.jpg"},{text:"I\u2019m not sure what magic @supabase is using but we\u2019ve migrated @happyteamsdotio database to @supabase from @heroku and it\u2019s much much faster at half the cost.",url:"https://twitter.com/michaelcdever/status/1524753565599690754",handle:"michaelcdever",img_url:"/images/twitter-profiles/rWX8Jzp5_400x400.jpg"},{text:"There are a lot of indie hackers building in public, but it\u2019s rare to see a startup shipping as consistently and transparently as Supabase. Their upcoming March releases look to be \ud83d\udd25 Def worth a follow! also opened my eyes as to how to value add in open source.",url:"https://twitter.com/swyx/status/1366685025047994373",handle:"swyx",img_url:"/images/twitter-profiles/qhvO9V6x_400x400.jpg"},{text:"This weekend I made a personal record \ud83e\udd47 on the less time spent creating an application with social login / permissions, database, cdn, infinite scaling, git push to deploy and for free. Thanks to @supabase and @vercel",url:"https://twitter.com/jperelli/status/1366195769657720834",handle:"jperelli",img_url:"/images/twitter-profiles/_ki30kYo_400x400.jpg"},{text:"Badass! Supabase is amazing. literally saves our small team a whole engineer\u2019s worth of work constantly. The founders and everyone I\u2019ve chatted with at supabase are just awesome people as well :)",url:"https://twitter.com/KennethCassel/status/1524359528619384834",handle:"KennethCassel",img_url:"/images/twitter-profiles/pmQj3TX-_400x400.jpg"},{text:"Working with Supabase is just fun. It makes working with a DB so much easier.",url:"https://twitter.com/the_BrianB/status/1524716498442276864",handle:"the_BrianB",img_url:"/images/twitter-profiles/7NITI8Z3_400x400.jpg"},{text:"This community is STRONG and will continue to be the reason why developers flock to @supabase over an alternative. Keep up the good work! \u26a1\ufe0f",url:"https://twitter.com/_wilhelm__/status/1524074865107488769",handle:"_wilhelm__",img_url:"/images/twitter-profiles/CvqDy6YF_400x400.jpg"},{text:"Working on my next SaaS app and I want this to be my whole job because I'm just straight out vibing putting it together. @supabase and chill, if you will",url:"https://twitter.com/drewclemcr8/status/1523843155484942340",handle:"drewclemcr8",img_url:"/images/twitter-profiles/bJlKtSxz_400x400.jpg"},{text:"@supabase Putting a ton of well-explained example API queries in a self-building documentation is just a classy move all around. I also love having GraphQL-style nested queries with traditional SQL filtering. This is pure DX delight. A+++. #backend",url:"https://twitter.com/CodiferousCoder/status/1522233113207836675",handle:"CodiferousCoder",img_url:"/images/twitter-profiles/t37cVLwy_400x400.jpg"},{text:"Me using @supabase for the first time right now \ud83e\udd2f",url:"https://twitter.com/nasiscoe/status/1365140856035024902",handle:"nasiscoe",img_url:"/images/twitter-profiles/nc2Ms5hH_400x400.jpg"},{text:"I'm trying @supabase, Firebase alternative that uses PostgreSQL (and you can use GraphQL too) in the cloud. It's incredible \ud83d\ude0d",url:"https://twitter.com/JP__Gallegos/status/1365699468109242374",handle:"JP__Gallegos",img_url:"/images/twitter-profiles/1PH2mt6v_400x400.jpg"},{text:"Check out this amazing product @supabase. A must give try #newidea #opportunity",url:"https://twitter.com/digitaldaswani/status/1364447219642814464",handle:"digitaldaswani",img_url:"/images/twitter-profiles/w8HLdlC7_400x400.jpg"},{text:"I gave @supabase a try this weekend and I was able to create a quick dashboard to visualize the data from the PostgreSQL instance. It's super easy to use Supabase's API or the direct DB connection. Check out the tutorial \ud83d\udcd6",url:"https://twitter.com/razvanilin/status/1363770020581412867",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Tried @supabase for the first time yesterday. Amazing tool! I was able to get my Posgres DB up in no time and their documentation on operating on the DB is super easy! \ud83d\udc4f Can't wait for Cloud functions to arrive! It's gonna be a great Firebase alternative!",url:"https://twitter.com/chinchang457/status/1363347740793524227",handle:"chinchang457",img_url:"/images/twitter-profiles/LTw5OCnv_400x400.jpg"},{text:"10/100 All day i was migrating my project from firebase to @supabase Because it is perfect and simple!!! I like design and API for understandable. There are in BETA now. Just try!\ud83e\uddea",url:"https://twitter.com/roomahhka/status/1363155396391763971",handle:"roomahhka",img_url:"/images/twitter-profiles/e_2eQt6C_400x400.jpg"},{text:"I gave @supabase a try today and I was positively impressed! Very quick setup to get a working remote database with API access and documentation generated automatically for you \ud83d\udc4c 10/10 will play more",url:"https://twitter.com/razvanilin/status/1363002398738800640",handle:"razvanilin",img_url:"/images/twitter-profiles/AiaH9vJ2_400x400.jpg"},{text:"Wait. Is it so easy to write queries for @supabase ? It's like simple SQL stuff!",url:"https://twitter.com/T0ny_Boy/status/1362911838908911617",handle:"T0ny_Boy",img_url:"/images/twitter-profiles/UCBhUBZl_400x400.jpg"},{text:"Jeez, and @supabase have native support for magic link login?! I was going to use http://magic.link for this But if I can get my whole DB + auth + magic link support in one... Awesome",url:"https://twitter.com/louisbarclay/status/1362016666868154371",handle:"louisbarclay",img_url:"/images/twitter-profiles/6f1O8ZOW_400x400.jpg"},{text:"@MongoDB or @MySQL?!?! Please, let me introduce you to @supabase and the wonderful world of @PostgreSQL before it's too late!!",url:"https://twitter.com/jim_bisenius/status/1361772978841788416",handle:"jim_bisenius",img_url:"/images/twitter-profiles/rLgwUZSB_400x400.jpg"},{text:"Where has @supabase been all my life? \ud83d\ude0d",url:"https://twitter.com/Elsolo244/status/1360257201911320579",handle:"Elsolo244",img_url:"/images/twitter-profiles/v6citnk33y2wpeyzrq05_400x400.jpeg"},{text:"Honestly Supabase is such a killer Firebase alternative.",url:"https://twitter.com/XPCheese/status/1360229397735895043",handle:"XPCheese",img_url:"/images/twitter-profiles/eYP6YXr7_400x400.jpg"},{text:"I think you'll love @supabase :-) Open-source, PostgreSQL-based & zero magic.",url:"https://twitter.com/zippoxer/status/1360021315852328961",handle:"zippoxer",img_url:"/images/twitter-profiles/6rd3xub9_400x400.png"},{text:"@supabase is the answer to all of firebase\u2019s problems imo",url:"https://twitter.com/jim_bisenius/status/1358590362953142278",handle:"jim_bisenius",img_url:"/images/twitter-profiles/rLgwUZSB_400x400.jpg"},{text:"@supabase is insane.",url:"https://twitter.com/codewithbhargav/status/1357647840911126528",handle:"codewithbhargav",img_url:"/images/twitter-profiles/LQYfHXBp_400x400.jpg"},{text:"It\u2019s fun, feels lightweight, and really quick to spin up user auth and a few tables. Almost too easy! Highly recommend.",url:"https://twitter.com/nerdburn/status/1356857261495214085",handle:"nerdburn",img_url:"/images/twitter-profiles/66VSV9Mm_400x400.png"},{text:"I\u2019m probably the wrong person to ask because I pick tools based on UX. Supabase was immediately approachable: instant setup, fast web app, auth, and easy APIs. Same reason I liked Firebase when I first discovered.",url:"https://twitter.com/jasonbarone/status/1357015483619422210",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"Now things are starting to get interesting! Firebase has long been the obvious choice for many #flutter devs for the ease of use. But their databases are NoSQL, which has its downsides... Seems like @supabase is working on something interesting here!",url:"https://twitter.com/RobertBrunhage/status/1356973695865085953",handle:"RobertBrunhage",img_url:"/images/twitter-profiles/5LMWEACf_400x400.jpg"},{text:"Honestly, I really love what @supabase is doing, you don't need to own a complete backend, just write your logic within your app and you'll get a powerful Postgresql at your disposal.",url:"https://twitter.com/NavicsteinR/status/1356927229217959941",handle:"NavicsteinR",img_url:"/images/twitter-profiles/w_zNZAs7_400x400.jpg"},{text:"Next.js, @supabase, @stripe, and @vercel. Supastack\u2122",url:"https://twitter.com/jasonbarone/status/1356765411832922115",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"I've really enjoyed the DX! Extremely fun to use, which is odd to say about a database at least for me.",url:"https://twitter.com/Soham_Asmi/status/1373086068132745217",handle:"Soham_Asmi",img_url:"/images/twitter-profiles/Os4nhKIr_400x400.jpg"},{text:"Supabase team is doing some awesome stuff #supabase #facts @supabase",url:"https://twitter.com/_strawbird/status/1372607500499841025",handle:"_strawbird",img_url:"/images/twitter-profiles/iMBvvQdn_400x400.jpg"},{text:"Did a website with @supabase last week with no prior experience with it. Up and running in 20 minutes. It's awesome to use. Thumbs up",url:"https://twitter.com/michael_webdev/status/1352885366928404481?s=20",handle:"michael_webdev",img_url:"/images/twitter-profiles/SvAyLaWV_400x400.jpg"},{text:"Next.js, @supabase, @stripe, and @vercel. Supastack\u2122",url:"https://twitter.com/jasonbarone/status/1356765411832922115?s=20",handle:"jasonbarone",img_url:"/images/twitter-profiles/6zCnwpvi_400x400.jpg"},{text:"I just learned about @supabase and im in love \ud83d\ude0d Supabase is an open source Firebase alternative! EarListen (& react) to database changes \ud83d\udc81 Manage users & permissions \ud83d\udd27 Simple UI for database interaction",url:"https://twitter.com/0xBanana/status/1373677301905362948",handle:"0xBanana",img_url:"/images/twitter-profiles/pgHIGqZ0_400x400.jpg"}],i=r(11765);r(28623),r(31078);!function(e){e.DATABASE="Database",e.AUTHENTICATION="Authentication",e.STORAGE="Storage",e.FUNCTIONS="Edge Functions",e.REALTIME="Realtime",e.VECTOR="Vector"}(n||(n={})),function(e){e.DATABASE="database",e.AUTHENTICATION="authentication",e.STORAGE="storage",e.FUNCTIONS="functions",e.REALTIME="realtime",e.VECTOR="vector"}(s||(s={}));var o={database:{name:n.DATABASE,icon:{16:"M3.502 6h8.996v4H3.502V6ZM3 10.002h10v4H3v-4ZM3 2h10v4H3V2Z",18:"M3.00829 6.33225H15.1778V11.6648H3.00829V6.33225Z M2 13.0839C2 12.3016 2.63418 11.6674 3.41647 11.6674H14.7483C15.5306 11.6674 16.1648 12.3016 16.1648 13.0839V15.5835C16.1648 16.3658 15.5306 17 14.7483 17H3.41647C2.63418 17 2 16.3658 2 15.5835V13.0839Z M2 2.41647C2 1.63418 2.63418 1 3.41647 1H14.7483C15.5306 1 16.1648 1.63418 16.1648 2.41647V4.9161C16.1648 5.6984 15.5306 6.33257 14.7483 6.33257H3.41647C2.63418 6.33257 2 5.6984 2 4.9161V2.41647Z",24:"M5.18625 8.66531H19.5035V15.331H5.18625V8.66531Z M4 17.0007C4 16.0804 4.7461 15.3343 5.66645 15.3343H18.9984C19.9187 15.3343 20.6648 16.0804 20.6648 17.0007V20.3335C20.6648 21.2539 19.9187 22 18.9984 22H5.66646C4.7461 22 4 21.2539 4 20.3335V17.0007Z M4 3.66646C4 2.7461 4.7461 2 5.66645 2H18.9984C19.9187 2 20.6648 2.7461 20.6648 3.66645V6.99926C20.6648 7.91962 19.9187 8.66572 18.9984 8.66572H5.66646C4.7461 8.66572 4 7.91962 4 6.99926V3.66646Z"}},authentication:{name:n.AUTHENTICATION,icon:{16:"M3.494 9.975h5m-5 0v2h5v-2m-5 0v-2h5v2M10 5V3a2 2 0 1 0-4 0v2m6.473 0v9h-9V5h9Z",18:"M3.02644 12.0457H9.18048M3.02644 12.0457V14.5072H9.18048V12.0457M3.02644 12.0457V9.58414H9.18048V12.0457M11.0339 5.92308V3.46154C11.0339 2.10207 9.93179 1 8.57228 1C7.21277 1 6.11067 2.10207 6.11067 3.46154V5.92308M3 8.38465L3 14.5384C3 15.8979 4.10208 17 5.46157 17H11.6157C12.9752 17 14.0773 15.8979 14.0773 14.5384V8.38465C14.0773 7.02516 12.9752 5.92308 11.6157 5.92308L5.46158 5.92308C4.10209 5.92308 3 7.02516 3 8.38465Z",24:"M5.03305 15.8071H12.7252M5.03305 15.8071V18.884H12.7252V15.8071M5.03305 15.8071V12.7302H12.7252V15.8071M15.0419 8.15385V5.07692C15.0419 3.37759 13.6643 2 11.965 2C10.2657 2 8.88814 3.37759 8.88814 5.07692V8.15385M5 11.2307L5 18.9231C5 20.6224 6.37757 22 8.07689 22H15.769C17.4683 22 18.8459 20.6224 18.8459 18.9231V11.2307C18.8459 9.53142 17.4683 8.15385 15.769 8.15385L8.07689 8.15385C6.37757 8.15385 5 9.53142 5 11.2307Z"}},storage:{name:n.STORAGE,icon:{16:"M13 7.616V5.6l-3.618-3.6H3v4.03m9.964-.447L9.38 2v3.584h3.584ZM1.974 6v8h12V7.509h-7.59l-1.533-1.51H1.974Z",18:"M15.7014 8.34507V5.80169L10.8772 1.00033H3.7014C2.96501 1.00033 2.36805 1.59728 2.36805 2.33367V6.33312M15.6545 5.77939L10.8752 1L10.8752 4.44605C10.8752 5.18243 11.4722 5.77939 12.2086 5.77939L15.6545 5.77939ZM4.29028 6.33312H2.33335C1.59696 6.33312 1 6.93008 1 7.66647V14.3333C1 15.8061 2.19392 17 3.66669 17H14.3333C15.8061 17 17 15.8061 17 14.3333V9.67842C17 8.94203 16.403 8.34507 15.6667 8.34507H7.42712C7.07725 8.34507 6.7414 8.20755 6.492 7.96218L5.2254 6.71601C4.976 6.47063 4.64015 6.33312 4.29028 6.33312Z",24:"M20.4997 12.1386V9.15811L14.8463 3.53163H6.43717C5.57423 3.53163 4.87467 4.23119 4.87467 5.09413V9.78087M20.4447 9.13199L14.844 3.53125L14.844 7.56949C14.844 8.43243 15.5436 9.13199 16.4065 9.13199L20.4447 9.13199ZM7.12729 9.78087H4.83398C3.97104 9.78087 3.27148 10.4804 3.27148 11.3434V19.1559C3.27148 20.8818 4.67059 22.2809 6.39648 22.2809H18.8965C20.6224 22.2809 22.0215 20.8818 22.0215 19.1559V13.7011C22.0215 12.8381 21.3219 12.1386 20.459 12.1386H10.8032C10.3933 12.1386 9.99969 11.9774 9.70743 11.6899L8.22312 10.2296C7.93086 9.94202 7.53729 9.78087 7.12729 9.78087Z"}},functions:{name:n.FUNCTIONS,icon:{16:"M1.857 11.36a7 7 0 0 1 9.41-9.551M4.774 14.212a7 7 0 0 0 9.41-9.497m-8.812 7.845a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm9.296-9.13a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM12.5 8a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z",18:"M5.31216 16.101C6.41582 16.6754 7.67021 17 9.00043 17C13.419 17 17.0009 13.4183 17.0009 9C17.0009 7.66622 16.6744 6.40868 16.0971 5.30289M12.7352 1.92336C11.6203 1.33382 10.3494 1 9.00043 1C4.58192 1 1 4.58172 1 9C1 10.3615 1.34015 11.6436 1.94012 12.766M1.94012 12.766C1.61762 13.16 1.42413 13.6637 1.42413 14.2126C1.42413 15.475 2.44753 16.4983 3.70997 16.4983C4.9724 16.4983 5.99581 15.475 5.99581 14.2126C5.99581 12.9502 4.9724 11.9269 3.70997 11.9269C2.99646 11.9269 2.35931 12.2538 1.94012 12.766ZM16.6199 3.7793C16.6199 5.04166 15.5965 6.06501 14.3341 6.06501C13.0716 6.06501 12.0482 5.04166 12.0482 3.7793C12.0482 2.51693 13.0716 1.49358 14.3341 1.49358C15.5965 1.49358 16.6199 2.51693 16.6199 3.7793ZM14.1436 9C14.1436 11.8403 11.8409 14.1429 9.00043 14.1429C6.15996 14.1429 3.8573 11.8403 3.8573 9C3.8573 6.15968 6.15996 3.85714 9.00043 3.85714C11.8409 3.85714 14.1436 6.15968 14.1436 9Z",24:"M6.6594 21.8201C8.10788 22.5739 9.75418 23 11.5 23C17.299 23 22 18.299 22 12.5C22 10.7494 21.5716 9.09889 20.8139 7.64754M16.4016 3.21191C14.9384 2.43814 13.2704 2 11.5 2C5.70101 2 1 6.70101 1 12.5C1 14.287 1.44643 15.9698 2.23384 17.4428M2.23384 17.4428C1.81058 17.96 1.55664 18.6211 1.55664 19.3416C1.55664 20.9984 2.89979 22.3416 4.55664 22.3416C6.21349 22.3416 7.55664 20.9984 7.55664 19.3416C7.55664 17.6847 6.21349 16.3416 4.55664 16.3416C3.62021 16.3416 2.78399 16.7706 2.23384 17.4428ZM21.5 5.64783C21.5 7.30468 20.1569 8.64783 18.5 8.64783C16.8432 8.64783 15.5 7.30468 15.5 5.64783C15.5 3.99097 16.8432 2.64783 18.5 2.64783C20.1569 2.64783 21.5 3.99097 21.5 5.64783ZM18.25 12.5C18.25 16.2279 15.2279 19.25 11.5 19.25C7.77208 19.25 4.75 16.2279 4.75 12.5C4.75 8.77208 7.77208 5.75 11.5 5.75C15.2279 5.75 18.25 8.77208 18.25 12.5Z"}},realtime:{name:n.REALTIME,icon:{16:"M5.362.984v2.35m-1.866.144L1.365 1.282m2.052 3.92H1.052m8.023 9.653L4.557 4.523 15 9.115l-4.748 1.182-1.177 4.558Z",18:"M5.94415 1V3.85995M3.80348 3.85995L1.35903 1.34096M3.80348 5.83876H1M11.5534 11.6817L15.3703 10.7317C15.901 10.5996 15.9633 9.87023 15.4626 9.6501L6.36613 5.65053C5.8879 5.44026 5.40048 5.92671 5.60979 6.40536L9.53793 15.3879C9.75628 15.8872 10.4825 15.8291 10.6187 15.3015L11.5534 11.6817Z",24:"M9.15928 1.94531V5.84117M6.24345 5.84117L2.91385 2.40977M6.24345 8.53673H2.4248M16.7998 16.496L21.9988 15.2019C22.7217 15.022 22.8065 14.0285 22.1246 13.7286L9.73411 8.28034C9.08269 7.99391 8.41873 8.65652 8.70383 9.30851L14.0544 21.5445C14.3518 22.2247 15.341 22.1456 15.5266 21.4269L16.7998 16.496Z"}},vector:{name:n.VECTOR,icon:{16:"M7.99886 7.63216V14.4892M7.99886 7.63216L14.0488 4.11804M7.99886 7.63216L1.94922 4.11819M1.94922 4.11819V8.32332M1.94922 4.11819V4.08217L5.57319 1.97717M14.049 8.36007V4.08217L10.4251 1.97717M11.8165 12.4072L7.99913 14.6245L4.18177 12.4072",18:"M8.61033 8.15404V16.8287M8.61033 8.15404L16.264 3.70838M8.61033 8.15404L0.957031 3.70858M0.957031 3.70858V9.02842M0.957031 3.70858V3.66301L5.54166 1M16.2643 9.07491V3.66301L11.6797 1M13.44 14.1949L8.61068 17L3.7814 14.1949",24:"M11.9983 11.4482V21.7337M11.9983 11.4482L21.0732 6.17699M11.9983 11.4482L2.92383 6.17723M2.92383 6.17723V12.4849M2.92383 6.17723V6.1232L8.35978 2.9657M21.0736 12.54V6.1232L15.6376 2.9657M17.7247 18.6107L11.9987 21.9367L6.27265 18.6107"}}}},11765:function(e,t){t.Z={schemas:[{name:"API Edge",reference:"edge_logs",fields:[{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"event_message",type:"string"},{path:"metadata.request.cf.asOrganization",type:"string"},{path:"metadata.request.cf.asn",type:"number"},{path:"metadata.request.cf.botManagement.corporateProxy",type:"boolean"},{path:"metadata.request.cf.botManagement.detectionIds",type:"number[]"},{path:"metadata.request.cf.botManagement.ja3Hash",type:"string"},{path:"metadata.request.cf.botManagement.score",type:"number"},{path:"metadata.request.cf.botManagement.staticResource",type:"boolean"},{path:"metadata.request.cf.botManagement.verifiedBot",type:"boolean"},{path:"metadata.request.cf.city",type:"string"},{path:"metadata.request.cf.clientTcpRtt",type:"number"},{path:"metadata.request.cf.clientTrustScore",type:"number"},{path:"metadata.request.cf.colo",type:"string"},{path:"metadata.request.cf.continent",type:"string"},{path:"metadata.request.cf.country",type:"string"},{path:"metadata.request.cf.edgeRequestKeepAliveStatus",type:"number"},{path:"metadata.request.cf.httpProtocol",type:"string"},{path:"metadata.request.cf.latitude",type:"string"},{path:"metadata.request.cf.longitude",type:"string"},{path:"metadata.request.cf.metroCode",type:"string"},{path:"metadata.request.cf.postalCode",type:"string"},{path:"metadata.request.cf.region",type:"string"},{path:"metadata.request.cf.timezone",type:"string"},{path:"metadata.request.cf.tlsCipher",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certPresented",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certRevoked",type:"string"},{path:"metadata.request.cf.tlsClientAuth.certVerified",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.clientFinished",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.clientHandshake",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.serverFinished",type:"string"},{path:"metadata.request.cf.tlsExportedAuthenticator.serverHandshake",type:"string"},{path:"metadata.request.cf.tlsVersion",type:"string"},{path:"metadata.request.headers.cf_connecting_ip",type:"string"},{path:"metadata.request.headers.cf_ipcountry",type:"string"},{path:"metadata.request.headers.cf_ray",type:"string"},{path:"metadata.request.headers.host",type:"string"},{path:"metadata.request.headers.referer",type:"string"},{path:"metadata.request.headers.x_client_info",type:"string"},{path:"metadata.request.headers.x_forwarded_proto",type:"string"},{path:"metadata.request.headers.x_real_ip",type:"string"},{path:"metadata.request.host",type:"string"},{path:"metadata.request.method",type:"string"},{path:"metadata.request.path",type:"string"},{path:"metadata.request.protocol",type:"string"},{path:"metadata.request.search",type:"string"},{path:"metadata.request.url",type:"string"},{path:"metadata.response.headers.cf_cache_status",type:"string"},{path:"metadata.response.headers.cf_ray",type:"string"},{path:"metadata.response.headers.content_location",type:"string"},{path:"metadata.response.headers.content_range",type:"string"},{path:"metadata.response.headers.content_type",type:"string"},{path:"metadata.response.headers.date",type:"string"},{path:"metadata.response.headers.sb_gateway_version",type:"string"},{path:"metadata.response.headers.transfer_encoding",type:"string"},{path:"metadata.response.headers.x_kong_proxy_latency",type:"string"},{path:"metadata.response.origin_time",type:"number"},{path:"metadata.response.status_code",type:"number"}]},{name:"Auth",reference:"auth_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.auth_event.action",type:"string"},{path:"metadata.auth_event.actor_id",type:"string"},{path:"metadata.auth_event.actor_username",type:"string"},{path:"metadata.auth_event.log_type",type:"string"},{path:"metadata.auth_event.traits.provider",type:"string"},{path:"metadata.auth_event.traits.user_email",type:"string"},{path:"metadata.auth_event.traits.user_id",type:"string"},{path:"metadata.auth_event.traits.user_phone",type:"string"},{path:"metadata.component",type:"string"},{path:"metadata.duration",type:"number"},{path:"metadata.host",type:"string"},{path:"metadata.level",type:"string"},{path:"metadata.method",type:"string"},{path:"metadata.msg",type:"string"},{path:"metadata.path",type:"string"},{path:"metadata.referer",type:"string"},{path:"metadata.remote_addr",type:"string"},{path:"metadata.status",type:"number"},{path:"metadata.timestamp",type:"string"}]},{name:"Storage",reference:"storage_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.context.host",type:"string"},{path:"metadata.context.pid",type:"number"},{path:"metadata.level",type:"string"},{path:"metadata.project",type:"string"},{path:"metadata.req.headers.accept",type:"string"},{path:"metadata.req.headers.cf_connecting_ip",type:"string"},{path:"metadata.req.headers.cf_ray",type:"string"},{path:"metadata.req.headers.content_length",type:"string"},{path:"metadata.req.headers.content_type",type:"string"},{path:"metadata.req.headers.host",type:"string"},{path:"metadata.req.headers.referer",type:"string"},{path:"metadata.req.headers.user_agent",type:"string"},{path:"metadata.req.headers.x_client_info",type:"string"},{path:"metadata.req.headers.x_forwarded_proto",type:"string"},{path:"metadata.req.hostname",type:"string"},{path:"metadata.req.method",type:"string"},{path:"metadata.req.remoteAddress",type:"string"},{path:"metadata.req.remotePort",type:"number"},{path:"metadata.req.url",type:"string"},{path:"metadata.reqId",type:"string"},{path:"metadata.res.statusCode",type:"number"},{path:"metadata.responseTime",type:"number"},{path:"metadata.tenantId",type:"string"}]},{name:"Function Edge",reference:"function_edge_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.deployment_id",type:"string"},{path:"metadata.execution_time_ms",type:"number"},{path:"metadata.function_id",type:"string"},{path:"metadata.project_ref",type:"string"},{path:"metadata.request.headers.accept",type:"string"},{path:"metadata.request.headers.content_length",type:"string"},{path:"metadata.request.headers.host",type:"string"},{path:"metadata.request.headers.user_agent",type:"string"},{path:"metadata.request.host",type:"string"},{path:"metadata.request.method",type:"string"},{path:"metadata.request.pathname",type:"string"},{path:"metadata.request.protocol",type:"string"},{path:"metadata.request.url",type:"string"},{path:"metadata.response.headers.content_length",type:"string"},{path:"metadata.response.headers.content_type",type:"string"},{path:"metadata.response.headers.date",type:"string"},{path:"metadata.response.headers.server",type:"string"},{path:"metadata.response.headers.vary",type:"string"},{path:"metadata.response.status_code",type:"number"},{path:"metadata.version",type:"string"}]},{name:"Function Runtime",reference:"function_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.deployment_id",type:"string"},{path:"metadata.event_type",type:"string"},{path:"metadata.execution_id",type:"string"},{path:"metadata.function_id",type:"string"},{path:"metadata.level",type:"string"},{path:"metadata.project_ref",type:"string"},{path:"metadata.region",type:"string"},{path:"metadata.timestamp",type:"string"},{path:"metadata.version",type:"string"}]},{name:"Postgres",reference:"postgres_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"},{path:"metadata.parsed.backend_type",type:"string"},{path:"metadata.parsed.command_tag",type:"string"},{path:"metadata.parsed.connection_from",type:"string"},{path:"metadata.parsed.database_name",type:"string"},{path:"metadata.parsed.error_severity",type:"string"},{path:"metadata.parsed.process_id",type:"number"},{path:"metadata.parsed.query_id",type:"number"},{path:"metadata.parsed.session_id",type:"string"},{path:"metadata.parsed.session_line_num",type:"number"},{path:"metadata.parsed.session_start_time",type:"string"},{path:"metadata.parsed.sql_state_code",type:"string"},{path:"metadata.parsed.timestamp",type:"string"},{path:"metadata.parsed.transaction_id",type:"number"},{path:"metadata.parsed.user_name",type:"string"},{path:"metadata.parsed.virtual_transaction_id",type:"string"}]},{name:"Realtime",reference:"realtime_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.level",type:"string"},{path:"metadata.measurements.connected",type:"number"},{path:"metadata.measurements.connected_cluster",type:"number"},{path:"metadata.measurements.limit",type:"number"},{path:"metadata.measurements.sum",type:"number"},{path:"metadata.external_id",type:"string"}]},{name:"PostgREST",reference:"postgrest_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"}]},{name:"PgBouncer",reference:"pgbouncer_logs",fields:[{path:"event_message",type:"string"},{path:"id",type:"string"},{path:"timestamp",type:"datetime"},{path:"metadata.host",type:"string"}]}]}},28623:function(e,t,r){r.d(t,{z:function(){return n}});var n=[{id:"tier_free",name:"Free",nameBadge:"",costUnit:"/ month / project",costUnitOrg:"/ month",href:"https://supabase.com/dashboard/new/new-project",priceLabel:"",priceMonthly:0,warning:"Limit of 2 free projects",description:"Perfect for passion projects & simple websites.",preface:"Get started with:",features:["Unlimited API requests","Social OAuth providers","Up to 500MB database space","Up to 1GB file storage","Up to 2GB bandwidth","Up to 50MB file uploads","Up to 50,000 monthly active users","Up to 500K Edge Function invocations","Up to 200 concurrent Realtime connections","Up to 2 million Realtime messages","1-day log retention","Community support"],footer:"Free projects are paused after 1 week of inactivity.",cta:"Get Started"},{id:"tier_pro",name:"Pro",nameBadge:"",costUnit:"/ month / project",costUnitOrg:"/ month",href:"https://supabase.com/dashboard/new/new-project",priceLabel:"From",warning:"Usage-based plan",priceMonthly:25,description:"For production applications with the option to scale.",featuresOrg:["$10 Compute Credits","No project pausing","Daily backups stored for 7 days","8GB database space included","100GB file storage included","50GB bandwidth included","5GB file uploads included","100,000 monthly active users included","2M Edge Function invocations included","500 concurrent Realtime connections included","5 million Realtime messages included","7-day log retention","Email support"],features:["No project pausing","Daily backups stored for 7 days","8GB database space included","100GB file storage included","50GB bandwidth included","5GB file uploads included","100,000 monthly active users included","2M Edge Function invocations included","500 concurrent Realtime connections included","5 million Realtime messages included","7-day log retention","Email support"],footer:"Your cost control settings determine if you allow over-usage.",preface:"Everything in the Free plan, plus:",cta:"Get Started"},{id:"tier_team",name:"Team",nameBadge:"New",costUnit:"/ month",costUnitOrg:"/ month",href:"https://forms.supabase.com/team",priceLabel:"From",warning:"Usage-based plan",priceMonthly:599,description:"Collaborate with different permissions and access patterns.",features:["Additional Organization member roles","Daily backups stored for 14 days","Standardised Security Questionnaire","SOC2","SSO for Supabase Dashboard","Priority email support & SLAs","28-day log retention"],footer:"Additional fees apply for usage beyond included usage.",preface:"Everything in the Pro plan, plus:",cta:"Contact Us"},{id:"tier_enterprise",name:"Enterprise",href:"https://forms.supabase.com/enterprise",description:"For large-scale applications managing serious workloads.",features:["Designated Support manager & SLAs","Enterprise OAuth providers","SSO/SAML","On-premise support","24\xd77\xd7365 premium enterprise support","Private Slack channel"],priceLabel:"",priceMonthly:"Contact us",preface:"",footer:"",cta:"Contact Us"}]},31078:function(e,t,r){r.d(t,{D:function(){return n}});var n={database:{title:"Database",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Dedicated Postgres Database",tooltips:{main:"A Postgres database with no restrictions? You get it. No pseudo limited users, you are the postgres root user.  No caveats."},plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Unlimited API requests",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Database size",tooltips:{main:"Billing is based on the average daily database size in GB throughout the billing period."},plans:{free:"500 MB included",pro:"8 GB included, then $0.125 per GB",team:"8 GB included, then $0.125 per GB",enterprise:"Unlimited"},usage_based:!0},{title:"Automatic backups",tooltips:{main:"Backups are entire copies of your database that can be restored in the future.",pro:"7 days of backup (if > 1TB, contact for Enterprise pricing)",team:"14 days of backup (if > 1TB, contact for Enterprise pricing)"},plans:{free:!1,pro:"7 days",team:"14 days",enterprise:"Custom"},usage_based:!1},{title:"Point in time recovery",tooltips:{main:"PITR cannot be applied retroactively, projects can only be rolled back to the point from which PITR has been applied.",pro:"$100 per 7 days. If > 28 day rollback period, contact enterprise",team:"$100 per 7 days. If > 28 day rollback period, contact enterprise"},plans:{free:!1,pro:"$100 per 7 days",team:"$100 per 7 days",enterprise:!0},usage_based:!1},{title:"Pausing",tooltips:{main:"Projects that have no activity or API requests will be paused. They can be reactivated via the dashboard"},plans:{free:"After 1 inactive week",pro:"Never",team:"Never",enterprise:"Never"},usage_based:!1},{title:"Database egress",tooltips:{main:"Billing is based on the total sum of outgoing traffic of your database in GB throughout your billing period."},plans:{free:"2GB included",pro:"50 GB included, then $0.09 per GB",team:"50 GB included, then $0.09 per GB",enterprise:"Unlimited"},usage_based:!0}]},auth:{title:"Auth",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Total Users",tooltips:{main:"The maximum number of users your project can have"},plans:{free:"Unlimited",pro:"Unlimited",team:"Unlimited",enterprise:"Unlimited"},usage_based:!1},{title:"MAUs",tooltips:{main:"Users who log in or refresh their token count towards MAU.\nBilling is based on the sum of distinct users requesting your API throughout the billing period. Resets every billing cycle."},plans:{free:"50,000 included",pro:"100,000 included, then $0.00325 per MAU",team:"100,000 included, then $0.00325 per MAU",enterprise:"Unlimited"},usage_based:!0},{title:"Social OAuth providers",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Custom SMTP server",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Remove Supabase branding from emails",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Enterprise OAuth providers",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Audit trails",plans:{free:"1 hour",pro:"7 days",team:"28 days",enterprise:!0},usage_based:!1},{title:"Supabase Auth emails",tooltips:{main:"Rate limits do not apply to Custom SMTP"},plans:{free:"30 / hour",pro:"100 / hour",team:"100 / hour",enterprise:"Contact Us"},usage_based:!1},{title:"Single Sign-On (SAML 2.0)",plans:{free:!1,pro:"50 included, then $0.015 per MAU",team:"50 included, then $0.015 per MAU",enterprise:"Contact Us"},usage_based:!1},{title:"Advanced security features",plans:{free:!1,pro:!1,team:!1,enterprise:"Contact Us"},usage_based:!1}]},storage:{title:"Storage",icon:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4",features:[{title:"Storage",tooltips:{main:"The sum of all objects' size in your storage buckets.\nBilling is based on the average daily size in GB throughout your billing period."},plans:{free:"1 GB included",pro:"100 GB included, then $0.021 per GB",team:"100 GB included, then $0.021 per GB",enterprise:"Unlimited"},usage_based:!0},{title:"Storage egress",tooltips:{main:"All requests to view and download your storage items go through our CDN. We sum up all outgoing traffic (egress) for storage related requests through our CDN. We do not differentiate between cache and no cache hits.\nBilling is based on the total amount of egress in GB throughout your billing period."},plans:{free:"2 GB included",pro:"200 GB included, then $0.09 per GB",team:"200 GB included, then $0.09 per GB",enterprise:"Unlimited"},usage_based:!0},{title:"Custom access controls",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Max file upload size",tooltips:{main:"You can change the upload size in the dashboard"},plans:{free:"50MB",pro:"5GB",team:"5GB",enterprise:"Unlimited"},usage_based:!1},{title:"Image Transformations",tooltips:{main:"We count all images that were transformed in the billing period, ignoring any transformations.\nUsage example: You transform one image with four different size transformations and another image with just a single transformation. It counts as two, as only two images were transformed.\nBilling is based on the count of (origin) images that used transformations throughout the billing period. Resets every billing cycle."},plans:{free:!1,pro:"100 origin images, then $5 per 1000 origin images",team:"100 origin images, then $5 per 1000 origin images",enterprise:"Unlimited"},usage_based:!0}]},edge_functions:{title:"Edge Functions",icon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4",features:[{title:"Invocations",tooltips:{main:"Billing is based on the sum of all invocations, independent of response status, throughout your billing period."},plans:{free:"500K/month included",pro:"2 Million included, then $2 per 1 Million",team:"2 Million included, then $2 per 1 Million",enterprise:"Unlimited"},usage_based:!0},{title:"Script size",plans:{free:"2 MB",pro:"10 MB",team:"10 MB",enterprise:"Unlimited"},usage_based:!1},{title:"Number of functions",tooltips:{main:"Billing is based on the maximum amount of functions at any point in time throughout your billing period."},plans:{free:"10 included",pro:"100 included, then $10 per additional 100",team:"100 included, then $10 per additional 100",enterprise:"Unlimited"},usage_based:!0}]},realtime:{title:"Realtime",icon:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59",features:[{title:"Postgres Changes",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Concurrent Peak Connections",tooltips:{main:"Total number of successful connections. Connections attempts are not counted towards usage.\nBilling is based on the maximum amount of concurrent peak connections throughout your billing period."},plans:{free:"200 included",pro:"500 included, then $10 per 1000",team:"500 included, then $10 per 1000",enterprise:"Unlimited concurrent connections and volume discount"},usage_based:!0},{title:"Messages Per Month",tooltips:{main:"Count of messages going through Realtime.\nUsage example: If you do a database change and 5 clients listen to that change via Realtime, that's 5 messages. If you broadcast a message and 4 clients listen to that, that's 5 messages (1 message sent, 4 received).\nBilling is based on the total amount of messages throughout your billing period."},plans:{free:"2 Million included",pro:"5 Million included, then $2.50 per Million",team:"5 Million included, then $2.50 per Million",enterprise:"Volume discounts on messages"},usage_based:!0},{title:"Max Message Size",plans:{free:"250 KB",pro:"3 MB",team:"3 MB",enterprise:"Custom"},usage_based:!1}]},dashboard:{title:"Dashboard",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",features:[{title:"Team members",plans:{free:"Unlimited",pro:"Unlimited",team:"Unlimited",enterprise:"Unlimited"},usage_based:!1},{title:"Access controls",plans:{free:"Coming soon",pro:"Coming soon",team:!0,enterprise:!0},usage_based:!1},{title:"Audit trails",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1}]},security:{title:"Platform Security and Compliance",icon:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z",features:[{title:"On Premises / BYO cloud",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Log retention (API & Database)",plans:{free:"1 day",pro:"7 days",team:"28 days",enterprise:"90 days"},usage_based:!1},{title:"Log drain",plans:{free:!1,pro:!1,team:"Coming soon",enterprise:"Coming soon"},usage_based:!1},{title:"Metrics endpoint",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"SOC2",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1},{title:"SSO",plans:{free:!1,pro:!1,team:"Contact Us",enterprise:"Contact Us"},usage_based:!1},{title:"99.9% SLA",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Access Roles",plans:{free:"Owner, Developer",pro:"Owner, Developer",team:"Additional owner(s), admin, read-only, billing admin, custom",enterprise:"Additional owner(s), admin, read-only, billing admin, custom"},usage_based:!1},{title:"Vanity URLs",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Custom Domains",tooltips:{enterprise:"Volume discounts available."},plans:{free:!1,pro:"$10 per domain per month per project add on",team:"$10 per domain per month per project add on",enterprise:"1, additional $10/domain/month"},usage_based:!1}]},support:{title:"Support",icon:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z",features:[{title:"Community support",plans:{free:!0,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Email support",plans:{free:!1,pro:!0,team:!0,enterprise:!0},usage_based:!1},{title:"Email support SLA",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1},{title:"Designated support",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"On Boarding Support",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Designated customer success engineer ",plans:{free:!1,pro:!1,team:!1,enterprise:!0},usage_based:!1},{title:"Security Questionnaire Help",plans:{free:!1,pro:!1,team:!0,enterprise:!0},usage_based:!1}]}}},11872:function(e,t,r){var n=r(90089),s=r(54504),a=(r(27378),r(64355)),i=r(24246),o=["open","children","className"],c=function(e){var t=e.open,r=void 0===t?void 0:t,a=e.children,c=e.className,l=(0,n.Z)(e,o);return(0,i.jsx)(s.fC,{asChild:l.asChild,defaultOpen:l.defaultOpen,open:r,onOpenChange:l.onOpenChange,disabled:l.disabled,className:c,children:a})};c.Trigger=function(e){var t=e.children,r=e.asChild;return(0,i.jsx)(s.xz,{asChild:r,children:t})},c.Content=function(e){var t=e.asChild,r=e.children,n=e.className,o=(0,a.Z)("collapsible");return(0,i.jsx)(s.VY,{asChild:t,className:[o.content,n].join(" "),children:r})},t.ZP=c},83443:function(e,t,r){var n=r(90849),s=(r(27378),r(31063)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},86673:function(e,t,r){var n=r(90849),s=(r(27378),r(6905)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},68464:function(e,t,r){var n=r(90849),s=(r(27378),r(15485)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},43881:function(e,t,r){var n=r(90849),s=(r(27378),r(14349)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},40288:function(e,t,r){var n=r(90849),s=(r(27378),r(90053)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},93986:function(e,t,r){var n=r(90849),s=(r(27378),r(97738)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},44292:function(e,t,r){var n=r(90849),s=(r(27378),r(56721)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},29432:function(e,t,r){var n=r(90849),s=(r(27378),r(9017)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},52979:function(e,t,r){var n=r(90849),s=(r(27378),r(35285)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},43555:function(e,t,r){var n=r(90849),s=(r(27378),r(55931)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},93359:function(e,t,r){var n=r(90849),s=(r(27378),r(94511)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},33759:function(e,t,r){var n=r(90849),s=(r(27378),r(29571)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},46578:function(e,t,r){var n=r(90849),s=(r(27378),r(28482)),a=r(12163),i=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,i.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},72853:function(e,t,r){r.d(t,{Z:function(){return i}});r(27378);var n=r(64355),s=r(14971),a=r(24246);function i(e){var t=e.children,r=e.active,i=(0,n.Z)("loading"),o=[i.base],c=[i.content.base];r&&c.push(i.content.active);var l=[i.spinner];return(0,a.jsxs)("div",{className:o.join(" "),children:[(0,a.jsx)("div",{className:c.join(" "),children:t}),r&&(0,a.jsx)(s.Z,{size:"xlarge",className:l})]})}},37772:function(e,t,r){r.d(t,{ZP:function(){return h}});var n=r(27378),s=r(24246);var a=function(e){e.className;var t=e.level,r=void 0===t?1:t,n=e.children,a=e.style,i="h".concat(r);return(0,s.jsx)(i,{style:a,children:n})};var i=function(e){e.className;var t=e.children,r=e.style,n=(e.type,e.disabled,e.mark),a=e.code,i=e.keyboard,o=(e.underline,e.strikethrough,e.strong);return e.small,a?(0,s.jsx)("code",{style:r,children:t}):n?(0,s.jsx)("mark",{style:r,children:t}):i?(0,s.jsx)("kbd",{style:r,children:t}):o?(0,s.jsx)("strong",{style:r,children:t}):(0,s.jsx)("span",{style:r,children:t})};var o=function(e){var t=e.children,r=e.target,n=void 0===r?"_blank":r,a=e.href,i=(e.className,e.onClick),o=e.style;return(0,s.jsx)("a",{onClick:i,href:a,target:n,rel:"noopener noreferrer",style:o,children:t})};function c(e){var t=e.children,r=(e.className,e.tag),n=void 0===r?"div":r,a=e.style,i="".concat(n);return(0,s.jsx)(i,{style:a,children:t})}c.Title=a,c.Text=i,c.Link=o;var l=c,d=(0,n.createContext)({type:"text"}),u=function(e){var t={type:e.type};return(0,s.jsx)(d.Provider,{value:t,children:e.children})},p=function(){var e=(0,n.useContext)(d);if(void 0===e)throw new Error("MenuContext must be used within a MenuContextProvider.");return e},m=r(64355);function f(e){var t=e.children,r=e.className,n=e.ulClassName,a=e.style,i=e.type,o=void 0===i?"text":i;return(0,s.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:r,style:a,children:(0,s.jsx)(u,{type:o,children:(0,s.jsx)("ul",{className:n,children:t})})})}f.Item=function(e){var t=e.children,r=e.icon,n=e.active,a=(e.rounded,e.onClick),i=(e.doNotCloseOverlay,e.showActiveBar,e.style),o=(0,m.Z)("menu"),c=p().type,l=[o.item.base];l.push(o.item.variants[c].base),n?l.push(o.item.variants[c].active):l.push(o.item.variants[c].normal);var d=[o.item.content.base];n?d.push(o.item.content.active):d.push(o.item.content.normal);var u=[o.item.icon.base];return n?u.push(o.item.icon.active):u.push(o.item.icon.normal),(0,s.jsx)("li",{role:"menuitem",className:"outline-none",children:(0,s.jsxs)("a",{style:i,className:l.join(" "),onClick:a,"aria-current":n?"page":void 0,children:[r&&(0,s.jsx)("div",{className:"".concat(u.join(" ")," min-w-fit"),children:r}),(0,s.jsx)("span",{className:d.join(" "),children:t})]})})},f.Group=function(e){var t=e.children,r=e.icon,n=e.title,a=(0,m.Z)("menu"),i=p().type;return(0,s.jsxs)("div",{className:[a.group.base,a.group.variants[i]].join(" "),children:[r&&(0,s.jsx)("span",{className:a.group.icon,children:r}),(0,s.jsx)("span",{className:a.group.content,children:n}),t]})},f.Misc=function(e){var t=e.children;return(0,s.jsx)("div",{children:(0,s.jsx)(l.Text,{children:(0,s.jsx)("span",{children:t})})})};var h=f},49111:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(27378),s=r(44204),a=(0,n.createContext)({parentCallback:function(e){},type:"",name:"",activeId:"",parentSize:""}),i=r(54329),o=r(64355);var c=r(24246);function l(e){var t=e.id,r=void 0===t?function(){var e=46656*Math.random()|0,t=46656*Math.random()|0;return("00000"+e.toString(36)).slice(-3)+("00000"+t.toString(36)).slice(-3)}():t,n=e.disabled,s=e.value,l=e.label,d=e.afterLabel,u=e.beforeLabel,p=e.description,m=e.name,f=e.checked,h=e.className,x=e.onChange,v=e.onBlur,j=e.hidden,g=void 0!==j&&j,b=e.size,y=void 0===b?"medium":b,w=e.align,N=void 0===w?"vertical":w,k=e.optionalLabel,O=e.addOnBefore,P=e.children,S=(0,o.Z)("radio"),C=m,Z=(0,i.G)().handleBlur;function E(e){Z&&Z(e),v&&v(e)}return(0,c.jsx)(a.Consumer,{children:function(e){var t=e.parentCallback,a=e.type,i=e.name,o=e.activeId,m=e.parentSize,v=r,j=i||C;y=m||y;var b=o===v||(!!f||!1!==f&&void 0),w=[h,S.variants[a].container.base,"list"===a&&!g&&S.variants[a].container.size[y]];function Z(e){t&&t(e),x&&x(e)}return w.push(S.variants[a].base),w.push(S.variants[a].size[y]),b?w.push(S.variants[a].active):w.push(S.variants[a].inactive),n&&w.push(S.disabled),"list"!==a&&(g=!0),(0,c.jsxs)("label",{htmlFor:v,className:w.join(" "),children:[(0,c.jsx)("input",{id:v,name:j,type:"radio",className:[S.base,S.size[y],g&&S.hidden,S.variants[a].radio_offset,""].join(" "),checked:b,disabled:n,value:s||v,onChange:function(e){return Z(e)},onBlur:E}),O,P||(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:[S.label.base,S.label[y],S.variants[a].container.align[N]].join(" "),children:[u&&(0,c.jsx)("div",{className:[S.label_before.base,S.label_before[y]].join(" "),children:u}),(0,c.jsx)("div",{children:l}),d&&(0,c.jsx)("div",{className:[S.label_after.base,S.label_after[y]].join(" "),children:d}),p&&(0,c.jsx)("div",{className:[S.description.base,S.description[y]].join(" "),children:p})]}),k&&(0,c.jsx)("div",{className:[S.optionalLabel.base,S.optionalLabel[y]].join(" "),children:k})]})]})}})}l.Group=function(e){var t=e.id,r=e.layout,d=e.error,u=e.descriptionText,p=e.label,m=e.afterLabel,f=e.beforeLabel,h=e.labelOptional,x=e.children,v=e.className,j=e.type,g=void 0===j?"list":j,b=e.options,y=e.value,w=e.name,N=e.onChange,k=e.size,O=void 0===k?"medium":k,P=e.validation,S=e.groupClassName,C=e.labelsLayout,Z=void 0===C?"vertical":C,E=(0,n.useState)(""),_=E[0],I=E[1],D=(0,o.Z)("radio"),T=(0,i.G)(),R=T.formContextOnChange,L=T.values,z=T.errors,A=T.touched,F=T.fieldLevelValidation;return L&&!y&&(y=L[t||w]),d||(z&&!d&&(d=z[t||w]),d=A&&A[t||w]?d:void 0),(0,n.useEffect)((function(){P&&F(t,P(y))}),[]),(0,n.useEffect)((function(){I(y)}),[y]),(0,c.jsx)("fieldset",{name:w,className:v,children:(0,c.jsx)(s.l,{nonBoxInput:!0,label:p,afterLabel:m,beforeLabel:f,labelOptional:h,layout:r,id:t,error:d,descriptionText:u,size:O,labelLayout:Z,children:(0,c.jsx)("div",{className:S||D.variants[g].group,children:(0,c.jsx)(a.Provider,{value:{parentCallback:function(e){N&&N(e),R&&R(e),P&&F(t,P(e.target.value)),I(e.target.id)},type:g,name:w,activeId:_,parentSize:O},children:b?b.map((function(e){return(0,c.jsx)(l,{id:e.id,label:e.label,beforeLabel:e.beforeLabel,afterLabel:e.afterLabel,value:e.value,description:e.description})})):x})})})})};var d=l}}]);
//# sourceMappingURL=9128-fbec5f7215955a7d.js.map